(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function kA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var im={exports:{}},Cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function VA(){if(Cv)return Cl;Cv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Cl.Fragment=e,Cl.jsx=n,Cl.jsxs=n,Cl}var Iv;function UA(){return Iv||(Iv=1,im.exports=VA()),im.exports}var E=UA(),rm={exports:{}},Il={},sm={exports:{}},am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function LA(){return Nv||(Nv=1,(function(r){function e(Q,ae){var ge=Q.length;Q.push(ae);e:for(;0<ge;){var je=ge-1>>>1,Fe=Q[je];if(0<o(Fe,ae))Q[je]=ae,Q[ge]=Fe,ge=je;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var ae=Q[0],ge=Q.pop();if(ge!==ae){Q[0]=ge;e:for(var je=0,Fe=Q.length,M=Fe>>>1;je<M;){var $=2*(je+1)-1,te=Q[$],he=$+1,ve=Q[he];if(0>o(te,ge))he<Fe&&0>o(ve,te)?(Q[je]=ve,Q[he]=ge,je=he):(Q[je]=te,Q[$]=ge,je=$);else if(he<Fe&&0>o(ve,ge))Q[je]=ve,Q[he]=ge,je=he;else break e}}return ae}function o(Q,ae){var ge=Q.sortIndex-ae.sortIndex;return ge!==0?ge:Q.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var g=[],y=[],T=1,A=null,R=3,U=!1,z=!1,X=!1,G=!1,oe=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ee(Q){for(var ae=n(y);ae!==null;){if(ae.callback===null)s(y);else if(ae.startTime<=Q)s(y),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=n(y)}}function fe(Q){if(X=!1,ee(Q),!z)if(n(g)!==null)z=!0,ie||(ie=!0,L());else{var ae=n(y);ae!==null&&Ut(fe,ae.startTime-Q)}}var ie=!1,x=-1,S=5,C=-1;function O(){return G?!0:!(r.unstable_now()-C<S)}function k(){if(G=!1,ie){var Q=r.unstable_now();C=Q;var ae=!0;try{e:{z=!1,X&&(X=!1,le(x),x=-1),U=!0;var ge=R;try{t:{for(ee(Q),A=n(g);A!==null&&!(A.expirationTime>Q&&O());){var je=A.callback;if(typeof je=="function"){A.callback=null,R=A.priorityLevel;var Fe=je(A.expirationTime<=Q);if(Q=r.unstable_now(),typeof Fe=="function"){A.callback=Fe,ee(Q),ae=!0;break t}A===n(g)&&s(g),ee(Q)}else s(g);A=n(g)}if(A!==null)ae=!0;else{var M=n(y);M!==null&&Ut(fe,M.startTime-Q),ae=!1}}break e}finally{A=null,R=ge,U=!1}ae=void 0}}finally{ae?L():ie=!1}}}var L;if(typeof ne=="function")L=function(){ne(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Rt=N.port2;N.port1.onmessage=k,L=function(){Rt.postMessage(null)}}else L=function(){oe(k,0)};function Ut(Q,ae){x=oe(function(){Q(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function(Q){switch(R){case 1:case 2:case 3:var ae=3;break;default:ae=R}var ge=R;R=ae;try{return Q()}finally{R=ge}},r.unstable_requestPaint=function(){G=!0},r.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ge=R;R=Q;try{return ae()}finally{R=ge}},r.unstable_scheduleCallback=function(Q,ae,ge){var je=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?je+ge:je):ge=je,Q){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=ge+Fe,Q={id:T++,callback:ae,priorityLevel:Q,startTime:ge,expirationTime:Fe,sortIndex:-1},ge>je?(Q.sortIndex=ge,e(y,Q),n(g)===null&&Q===n(y)&&(X?(le(x),x=-1):X=!0,Ut(fe,ge-je))):(Q.sortIndex=Fe,e(g,Q),z||U||(z=!0,ie||(ie=!0,L()))),Q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Q){var ae=R;return function(){var ge=R;R=ae;try{return Q.apply(this,arguments)}finally{R=ge}}}})(am)),am}var Dv;function jA(){return Dv||(Dv=1,sm.exports=LA()),sm.exports}var om={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function PA(){if(Ov)return be;Ov=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.iterator;function U(M){return M===null||typeof M!="object"?null:(M=R&&M[R]||M["@@iterator"],typeof M=="function"?M:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,G={};function oe(M,$,te){this.props=M,this.context=$,this.refs=G,this.updater=te||z}oe.prototype.isReactComponent={},oe.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},oe.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function le(){}le.prototype=oe.prototype;function ne(M,$,te){this.props=M,this.context=$,this.refs=G,this.updater=te||z}var ee=ne.prototype=new le;ee.constructor=ne,X(ee,oe.prototype),ee.isPureReactComponent=!0;var fe=Array.isArray;function ie(){}var x={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(M,$,te){var he=te.ref;return{$$typeof:r,type:M,key:$,ref:he!==void 0?he:null,props:te}}function O(M,$){return C(M.type,$,M.props)}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function L(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(te){return $[te]})}var N=/\/+/g;function Rt(M,$){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):$.toString(36)}function Ut(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ie,ie):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Q(M,$,te,he,ve){var xe=typeof M;(xe==="undefined"||xe==="boolean")&&(M=null);var ke=!1;if(M===null)ke=!0;else switch(xe){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(M.$$typeof){case r:case e:ke=!0;break;case T:return ke=M._init,Q(ke(M._payload),$,te,he,ve)}}if(ke)return ve=ve(M),ke=he===""?"."+Rt(M,0):he,fe(ve)?(te="",ke!=null&&(te=ke.replace(N,"$&/")+"/"),Q(ve,$,te,"",function(ii){return ii})):ve!=null&&(k(ve)&&(ve=O(ve,te+(ve.key==null||M&&M.key===ve.key?"":(""+ve.key).replace(N,"$&/")+"/")+ke)),$.push(ve)),1;ke=0;var Lt=he===""?".":he+":";if(fe(M))for(var st=0;st<M.length;st++)he=M[st],xe=Lt+Rt(he,st),ke+=Q(he,$,te,xe,ve);else if(st=U(M),typeof st=="function")for(M=st.call(M),st=0;!(he=M.next()).done;)he=he.value,xe=Lt+Rt(he,st++),ke+=Q(he,$,te,xe,ve);else if(xe==="object"){if(typeof M.then=="function")return Q(Ut(M),$,te,he,ve);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ae(M,$,te){if(M==null)return M;var he=[],ve=0;return Q(M,he,"","",function(xe){return $.call(te,xe,ve++)}),he}function ge(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(te){(M._status===0||M._status===-1)&&(M._status=1,M._result=te)},function(te){(M._status===0||M._status===-1)&&(M._status=2,M._result=te)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var je=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Fe={map:ae,forEach:function(M,$,te){ae(M,function(){$.apply(this,arguments)},te)},count:function(M){var $=0;return ae(M,function(){$++}),$},toArray:function(M){return ae(M,function($){return $})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return be.Activity=A,be.Children=Fe,be.Component=oe,be.Fragment=n,be.Profiler=o,be.PureComponent=ne,be.StrictMode=s,be.Suspense=g,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,be.__COMPILER_RUNTIME={__proto__:null,c:function(M){return x.H.useMemoCache(M)}},be.cache=function(M){return function(){return M.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(M,$,te){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var he=X({},M.props),ve=M.key;if($!=null)for(xe in $.key!==void 0&&(ve=""+$.key),$)!S.call($,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&$.ref===void 0||(he[xe]=$[xe]);var xe=arguments.length-2;if(xe===1)he.children=te;else if(1<xe){for(var ke=Array(xe),Lt=0;Lt<xe;Lt++)ke[Lt]=arguments[Lt+2];he.children=ke}return C(M.type,ve,he)},be.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},be.createElement=function(M,$,te){var he,ve={},xe=null;if($!=null)for(he in $.key!==void 0&&(xe=""+$.key),$)S.call($,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ve[he]=$[he]);var ke=arguments.length-2;if(ke===1)ve.children=te;else if(1<ke){for(var Lt=Array(ke),st=0;st<ke;st++)Lt[st]=arguments[st+2];ve.children=Lt}if(M&&M.defaultProps)for(he in ke=M.defaultProps,ke)ve[he]===void 0&&(ve[he]=ke[he]);return C(M,xe,ve)},be.createRef=function(){return{current:null}},be.forwardRef=function(M){return{$$typeof:m,render:M}},be.isValidElement=k,be.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:ge}},be.memo=function(M,$){return{$$typeof:y,type:M,compare:$===void 0?null:$}},be.startTransition=function(M){var $=x.T,te={};x.T=te;try{var he=M(),ve=x.S;ve!==null&&ve(te,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ie,je)}catch(xe){je(xe)}finally{$!==null&&te.types!==null&&($.types=te.types),x.T=$}},be.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},be.use=function(M){return x.H.use(M)},be.useActionState=function(M,$,te){return x.H.useActionState(M,$,te)},be.useCallback=function(M,$){return x.H.useCallback(M,$)},be.useContext=function(M){return x.H.useContext(M)},be.useDebugValue=function(){},be.useDeferredValue=function(M,$){return x.H.useDeferredValue(M,$)},be.useEffect=function(M,$){return x.H.useEffect(M,$)},be.useEffectEvent=function(M){return x.H.useEffectEvent(M)},be.useId=function(){return x.H.useId()},be.useImperativeHandle=function(M,$,te){return x.H.useImperativeHandle(M,$,te)},be.useInsertionEffect=function(M,$){return x.H.useInsertionEffect(M,$)},be.useLayoutEffect=function(M,$){return x.H.useLayoutEffect(M,$)},be.useMemo=function(M,$){return x.H.useMemo(M,$)},be.useOptimistic=function(M,$){return x.H.useOptimistic(M,$)},be.useReducer=function(M,$,te){return x.H.useReducer(M,$,te)},be.useRef=function(M){return x.H.useRef(M)},be.useState=function(M){return x.H.useState(M)},be.useSyncExternalStore=function(M,$,te){return x.H.useSyncExternalStore(M,$,te)},be.useTransition=function(){return x.H.useTransition()},be.version="19.2.0",be}var Mv;function ip(){return Mv||(Mv=1,om.exports=PA()),om.exports}var lm={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function zA(){if(kv)return Jt;kv=1;var r=ip();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:y,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,T)},Jt.flushSync=function(g){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=y,s.p=T,s.d.f()}},Jt.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Jt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Jt.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,U=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:R,fetchPriority:U}):T==="script"&&s.d.X(g,{crossOrigin:A,integrity:R,fetchPriority:U,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Jt.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Jt.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Jt.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Jt.requestFormReset=function(g){s.d.r(g)},Jt.unstable_batchedUpdates=function(g,y){return g(y)},Jt.useFormState=function(g,y,T){return f.H.useFormState(g,y,T)},Jt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Jt.version="19.2.0",Jt}var Vv;function BA(){if(Vv)return lm.exports;Vv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=zA(),lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function qA(){if(Uv)return Il;Uv=1;var r=jA(),e=ip(),n=BA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===l)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,l=d;break}if(b===l){_=!0,l=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=h;break}if(b===l){_=!0,l=d,a=h;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,R=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Rt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case oe:return"Profiler";case G:return"StrictMode";case fe:return"Suspense";case ie:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ne:return t.displayName||"Context";case le:return(t._context.displayName||"Context")+".Consumer";case ee:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return i=t.displayName||null,i!==null?i:Rt(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return Rt(t(i))}catch{}}return null}var Ut=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},je=[],Fe=-1;function M(t){return{current:t}}function $(t){0>Fe||(t.current=je[Fe],je[Fe]=null,Fe--)}function te(t,i){Fe++,je[Fe]=t.current,t.current=i}var he=M(null),ve=M(null),xe=M(null),ke=M(null);function Lt(t,i){switch(te(xe,i),te(ve,t),te(he,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?J_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=J_(i),t=Z_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(he),te(he,t)}function st(){$(he),$(ve),$(xe)}function ii(t){t.memoizedState!==null&&te(ke,t);var i=he.current,a=Z_(i,t.type);i!==a&&(te(ve,t),te(he,a))}function wi(t){ve.current===t&&($(he),$(ve)),ke.current===t&&($(ke),Al._currentValue=ge)}var ys,fa;function Kn(t){if(ys===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ys=i&&i[1]||"",fa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ys+t+fa}var _s=!1;function da(t,i){if(!t||_s)return"";_s=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(H){var q=H}Reflect.construct(t,[],J)}else{try{J.call()}catch(H){q=H}t.call(J.prototype)}}else{try{throw Error()}catch(H){q=H}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var I=_.split(`
`),B=b.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===B.length)for(l=I.length-1,h=B.length-1;1<=l&&0<=h&&I[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==B[h]){var K=`
`+I[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=h);break}}}finally{_s=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Kn(a):""}function Wh(t,i){switch(t.tag){case 26:case 27:case 5:return Kn(t.type);case 16:return Kn("Lazy");case 13:return t.child!==i&&i!==null?Kn("Suspense Fallback"):Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 15:return da(t.type,!1);case 11:return da(t.type.render,!1);case 1:return da(t.type,!0);case 31:return Kn("Activity");default:return""}}function hu(t){try{var i="",a=null;do i+=Wh(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ma=Object.prototype.hasOwnProperty,vs=r.unstable_scheduleCallback,pa=r.unstable_cancelCallback,ef=r.unstable_shouldYield,xo=r.unstable_requestPaint,jt=r.unstable_now,fu=r.unstable_getCurrentPriorityLevel,xt=r.unstable_ImmediatePriority,Nt=r.unstable_UserBlockingPriority,Ai=r.unstable_NormalPriority,du=r.unstable_LowPriority,Co=r.unstable_IdlePriority,tf=r.log,Es=r.unstable_setDisableYieldValue,ur=null,Yt=null;function On(t){if(typeof tf=="function"&&Es(t),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(ur,t)}catch{}}var rn=Math.clz32?Math.clz32:mu,nf=Math.log,Io=Math.LN2;function mu(t){return t>>>=0,t===0?32:31-(nf(t)/Io|0)|0}var Ts=256,ri=262144,cr=4194304;function Qn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Mn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=Qn(l):(_&=b,_!==0?h=Qn(_):a||(a=b&~t,a!==0&&(h=Qn(a))))):(b=l&~d,b!==0?h=Qn(b):_!==0?h=Qn(_):a||(a=l&~t,a!==0&&(h=Qn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function hr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ga(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function No(){var t=cr;return cr<<=1,(cr&62914560)===0&&(cr=4194304),t}function Si(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function fr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Pt(t,i,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,I=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var K=31-rn(a),J=1<<K;b[K]=0,I[K]=-1;var q=B[K];if(q!==null)for(B[K]=null,K=0;K<q.length;K++){var H=q[K];H!==null&&(H.lane&=-536870913)}a&=~J}l!==0&&Do(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function Do(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-rn(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function dr(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-rn(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function mr(t,i){var a=i&-i;return a=(a&42)!==0?1:Oo(a),(a&(t.suspendedLanes|i))!==0?0:a}function Oo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Mo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ri(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:Tv(t.type))}function pu(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var si=Math.random().toString(36).slice(2),lt="__reactFiber$"+si,zt="__reactProps$"+si,ai="__reactContainer$"+si,pr="__reactEvents$"+si,oi="__reactListeners$"+si,gu="__reactHandles$"+si,ko="__reactResources$"+si,xi="__reactMarker$"+si;function bs(t){delete t[lt],delete t[zt],delete t[pr],delete t[oi],delete t[gu]}function Ci(t){var i=t[lt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ai]||a[lt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=sv(t);t!==null;){if(a=t[lt])return a;t=sv(t)}return i}t=a,a=t.parentNode}return null}function Ii(t){if(t=t[lt]||t[ai]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function ws(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function $n(t){var i=t[ko];return i||(i=t[ko]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function mt(t){t[xi]=!0}var ya=new Set,gr={};function sn(t,i){li(t,i),li(t+"Capture",i)}function li(t,i){for(gr[t]=i,t=0;t<i.length;t++)ya.add(i[t])}var rf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vo={},Uo={};function yu(t){return ma.call(Uo,t)?!0:ma.call(Vo,t)?!1:rf.test(t)?Uo[t]=!0:(Vo[t]=!0,!1)}function yr(t,i,a){if(yu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function _r(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function kn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _u(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function sf(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function _a(t){if(!t._valueTracker){var i=_u(t)?"checked":"value";t._valueTracker=sf(t,i,""+t[i])}}function Lo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=_u(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ni=/[\n"\\]/g;function ut(t){return t.replace(Ni,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function vr(t,i,a,l,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+an(i)):t.value!==""+an(i)&&(t.value=""+an(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Ea(t,_,an(i)):a!=null?Ea(t,_,an(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+an(b):t.removeAttribute("name")}function As(t,i,a,l,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){_a(t);return}a=a!=null?""+an(a):"",i=i!=null?""+an(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),_a(t)}function Ea(t,i,a){i==="number"&&va(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Pe(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+an(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ss(t,i,a){if(i!=null&&(i=""+an(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+an(a):""}function Er(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ut(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=an(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),_a(t)}function Vn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var af=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||af.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function vu(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&jo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&jo(t,d,i[d])}function Po(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var of=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ui(t){return lf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Dt(){}var Ta=null;function ba(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Di=null,Tn=null;function Eu(t){var i=Ii(t);if(i&&(t=i.stateNode)){var a=t[zt]||null;e:switch(t=i.stateNode,i.type){case"input":if(vr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ut(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[zt]||null;if(!h)throw Error(s(90));vr(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Lo(l)}break e;case"textarea":Ss(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Pe(t,!!a.multiple,i,!1)}}}var zo=!1;function Tu(t,i,a){if(zo)return t(i,a);zo=!0;try{var l=t(i);return l}finally{if(zo=!1,(Di!==null||Tn!==null)&&(yc(),Di&&(i=Di,t=Tn,Tn=Di=null,Eu(i),t)))for(i=0;i<t.length;i++)Eu(t[i])}}function hn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[zt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bo=!1;if(Yn)try{var ci={};Object.defineProperty(ci,"passive",{get:function(){Bo=!0}}),window.addEventListener("test",ci,ci),window.removeEventListener("test",ci,ci)}catch{Bo=!1}var bn=null,wa=null,hi=null;function Tr(){if(hi)return hi;var t,i=wa,a=i.length,l,h="value"in bn?bn.value:bn.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[d-l];l++);return hi=h.slice(t,1<l?1-l:void 0)}function Rs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function br(){return!0}function et(){return!1}function Xt(t){function i(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?br:et,this.isPropagationStopped=et,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),i}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Xt(Oi),wr=A({},Oi,{view:0,detail:0}),bu=Xt(wr),Ar,Aa,on,Cs=A({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==on&&(on&&t.type==="mousemove"?(Ar=t.screenX-on.screenX,Aa=t.screenY-on.screenY):Aa=Ar=0,on=t),Ar)},movementY:function(t){return"movementY"in t?t.movementY:Aa}}),wu=Xt(Cs),Is=A({},Cs,{dataTransfer:0}),Au=Xt(Is),qo=A({},wr,{relatedTarget:0}),Sr=Xt(qo),Su=A({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),Sa=Xt(Su),uf=A({},Oi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ru=Xt(uf),Ns=A({},Oi,{data:0}),Ho=Xt(Ns),xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Go={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Go[t])?!!i[t]:!1}function Rr(){return Cu}var Iu=A({},wr,{key:function(t){if(t.key){var i=xu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Rs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(t){return t.type==="keypress"?Rs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nu=Xt(Iu),Mi=A({},Cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ko=Xt(Mi),Du=A({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),Ou=Xt(Du),Mu=A({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ra=Xt(Mu),ln=A({},Cs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ku=Xt(ln),Vu=A({},Oi,{newState:0,oldState:0}),xr=Xt(Vu),c=[9,13,27,32],p=Yn&&"CompositionEvent"in window,v=null;Yn&&"documentMode"in document&&(v=document.documentMode);var w=Yn&&"TextEvent"in window&&!v,j=Yn&&(!p||v&&8<v&&11>=v),F=" ",re=!1;function Ge(t,i){switch(t){case"keyup":return c.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ce=!1;function Ot(t,i){switch(t){case"compositionend":return vt(i);case"keypress":return i.which!==32?null:(re=!0,F);case"textInput":return t=i.data,t===F&&re?null:t;default:return null}}function Mt(t,i){if(Ce)return t==="compositionend"||!p&&Ge(t,i)?(t=Tr(),hi=wa=bn=null,Ce=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return j&&i.locale!=="ko"?null:i.data;default:return null}}var Cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fn(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Cr[t.type]:i==="textarea"}function Ds(t,i,a,l){Di?Tn?Tn.push(l):Tn=[l]:Di=l,i=Ac(i,"onChange"),0<i.length&&(a=new xs("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var ki=null,Qo=null;function ow(t){G_(t,0)}function Uu(t){var i=ws(t);if(Lo(i))return t}function cg(t,i){if(t==="change")return i}var hg=!1;if(Yn){var cf;if(Yn){var hf="oninput"in document;if(!hf){var fg=document.createElement("div");fg.setAttribute("oninput","return;"),hf=typeof fg.oninput=="function"}cf=hf}else cf=!1;hg=cf&&(!document.documentMode||9<document.documentMode)}function dg(){ki&&(ki.detachEvent("onpropertychange",mg),Qo=ki=null)}function mg(t){if(t.propertyName==="value"&&Uu(Qo)){var i=[];Ds(i,Qo,t,ba(t)),Tu(ow,i)}}function lw(t,i,a){t==="focusin"?(dg(),ki=i,Qo=a,ki.attachEvent("onpropertychange",mg)):t==="focusout"&&dg()}function uw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu(Qo)}function cw(t,i){if(t==="click")return Uu(i)}function hw(t,i){if(t==="input"||t==="change")return Uu(i)}function fw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var wn=typeof Object.is=="function"?Object.is:fw;function $o(t,i){if(wn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ma.call(i,h)||!wn(t[h],i[h]))return!1}return!0}function pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,i){var a=pg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=pg(a)}}function yg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?yg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function _g(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=va(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=va(t.document)}return i}function ff(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var dw=Yn&&"documentMode"in document&&11>=document.documentMode,xa=null,df=null,Yo=null,mf=!1;function vg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mf||xa==null||xa!==va(l)||(l=xa,"selectionStart"in l&&ff(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Yo&&$o(Yo,l)||(Yo=l,l=Ac(df,"onSelect"),0<l.length&&(i=new xs("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=xa)))}function Os(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ca={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},pf={},Eg={};Yn&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Ms(t){if(pf[t])return pf[t];if(!Ca[t])return t;var i=Ca[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Eg)return pf[t]=i[a];return t}var Tg=Ms("animationend"),bg=Ms("animationiteration"),wg=Ms("animationstart"),mw=Ms("transitionrun"),pw=Ms("transitionstart"),gw=Ms("transitioncancel"),Ag=Ms("transitionend"),Sg=new Map,gf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gf.push("scrollEnd");function Xn(t,i){Sg.set(t,i),sn(i,[t])}var Lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Un=[],Ia=0,yf=0;function ju(){for(var t=Ia,i=yf=Ia=0;i<t;){var a=Un[i];Un[i++]=null;var l=Un[i];Un[i++]=null;var h=Un[i];Un[i++]=null;var d=Un[i];if(Un[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Rg(a,h,d)}}function Pu(t,i,a,l){Un[Ia++]=t,Un[Ia++]=i,Un[Ia++]=a,Un[Ia++]=l,yf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function _f(t,i,a,l){return Pu(t,i,a,l),zu(t)}function ks(t,i){return Pu(t,null,null,i),zu(t)}function Rg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-rn(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function zu(t){if(50<yl)throw yl=0,xd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Na={};function yw(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,i,a,l){return new yw(t,i,a,l)}function vf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vi(t,i){var a=t.alternate;return a===null?(a=An(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function xg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Bu(t,i,a,l,h,d){var _=0;if(l=t,typeof t=="function")vf(t)&&(_=1);else if(typeof t=="string")_=bA(t,a,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=An(31,a,i,h),t.elementType=C,t.lanes=d,t;case X:return Vs(a.children,h,d,i);case G:_=8,h|=24;break;case oe:return t=An(12,a,i,h|2),t.elementType=oe,t.lanes=d,t;case fe:return t=An(13,a,i,h),t.elementType=fe,t.lanes=d,t;case ie:return t=An(19,a,i,h),t.elementType=ie,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:_=10;break e;case le:_=9;break e;case ee:_=11;break e;case x:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=An(_,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Vs(t,i,a,l){return t=An(7,t,l,i),t.lanes=a,t}function Ef(t,i,a){return t=An(6,t,null,i),t.lanes=a,t}function Cg(t){var i=An(18,null,null,0);return i.stateNode=t,i}function Tf(t,i,a){return i=An(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ig=new WeakMap;function Ln(t,i){if(typeof t=="object"&&t!==null){var a=Ig.get(t);return a!==void 0?a:(i={value:t,source:i,stack:hu(i)},Ig.set(t,i),i)}return{value:t,source:i,stack:hu(i)}}var Da=[],Oa=0,qu=null,Xo=0,jn=[],Pn=0,Ir=null,fi=1,di="";function Ui(t,i){Da[Oa++]=Xo,Da[Oa++]=qu,qu=t,Xo=i}function Ng(t,i,a){jn[Pn++]=fi,jn[Pn++]=di,jn[Pn++]=Ir,Ir=t;var l=fi;t=di;var h=32-rn(l)-1;l&=~(1<<h),a+=1;var d=32-rn(i)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,fi=1<<32-rn(i)+h|a<<h|l,di=d+t}else fi=1<<d|a<<h|l,di=t}function bf(t){t.return!==null&&(Ui(t,1),Ng(t,1,0))}function wf(t){for(;t===qu;)qu=Da[--Oa],Da[Oa]=null,Xo=Da[--Oa],Da[Oa]=null;for(;t===Ir;)Ir=jn[--Pn],jn[Pn]=null,di=jn[--Pn],jn[Pn]=null,fi=jn[--Pn],jn[Pn]=null}function Dg(t,i){jn[Pn++]=fi,jn[Pn++]=di,jn[Pn++]=Ir,fi=i.id,di=i.overflow,Ir=t}var Bt=null,tt=null,Ve=!1,Nr=null,zn=!1,Af=Error(s(519));function Dr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jo(Ln(i,t)),Af}function Og(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[lt]=t,i[zt]=l,a){case"dialog":Ne("cancel",i),Ne("close",i);break;case"iframe":case"object":case"embed":Ne("load",i);break;case"video":case"audio":for(a=0;a<vl.length;a++)Ne(vl[a],i);break;case"source":Ne("error",i);break;case"img":case"image":case"link":Ne("error",i),Ne("load",i);break;case"details":Ne("toggle",i);break;case"input":Ne("invalid",i),As(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ne("invalid",i);break;case"textarea":Ne("invalid",i),Er(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Y_(i.textContent,a)?(l.popover!=null&&(Ne("beforetoggle",i),Ne("toggle",i)),l.onScroll!=null&&Ne("scroll",i),l.onScrollEnd!=null&&Ne("scrollend",i),l.onClick!=null&&(i.onclick=Dt),i=!0):i=!1,i||Dr(t,!0)}function Mg(t){for(Bt=t.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Bt=Bt.return}}function Ma(t){if(t!==Bt)return!1;if(!Ve)return Mg(t),Ve=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||qd(t.type,t.memoizedProps)),a=!a),a&&tt&&Dr(t),Mg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));tt=rv(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));tt=rv(t)}else i===27?(i=tt,Gr(t.type)?(t=Qd,Qd=null,tt=t):tt=i):tt=Bt?qn(t.stateNode.nextSibling):null;return!0}function Us(){tt=Bt=null,Ve=!1}function Sf(){var t=Nr;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),Nr=null),t}function Jo(t){Nr===null?Nr=[t]:Nr.push(t)}var Rf=M(null),Ls=null,Li=null;function Or(t,i,a){te(Rf,i._currentValue),i._currentValue=a}function ji(t){t._currentValue=Rf.current,$(Rf)}function xf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Cf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var I=0;I<i.length;I++)if(b.context===i[I]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),xf(d.return,a,t),l||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),xf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ka(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=h.type;wn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===ke.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Al):t=[Al])}h=h.return}t!==null&&Cf(i,t,a,l),i.flags|=262144}function Hu(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function js(t){Ls=t,Li=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function qt(t){return kg(Ls,t)}function Fu(t,i){return Ls===null&&js(t),kg(t,i)}function kg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Li===null){if(t===null)throw Error(s(308));Li=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Li=Li.next=i;return a}var _w=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},vw=r.unstable_scheduleCallback,Ew=r.unstable_NormalPriority,Et={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function If(){return{controller:new _w,data:new Map,refCount:0}}function Zo(t){t.refCount--,t.refCount===0&&vw(Ew,function(){t.controller.abort()})}var Wo=null,Nf=0,Va=0,Ua=null;function Tw(t,i){if(Wo===null){var a=Wo=[];Nf=0,Va=Md(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Nf++,i.then(Vg,Vg),i}function Vg(){if(--Nf===0&&Wo!==null){Ua!==null&&(Ua.status="fulfilled");var t=Wo;Wo=null,Va=0,Ua=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function bw(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ug=Q.S;Q.S=function(t,i){v_=jt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Tw(t,i),Ug!==null&&Ug(t,i)};var Ps=M(null);function Df(){var t=Ps.current;return t!==null?t:We.pooledCache}function Gu(t,i){i===null?te(Ps,Ps.current):te(Ps,i.pool)}function Lg(){var t=Df();return t===null?null:{parent:Et._currentValue,pool:t}}var La=Error(s(460)),Of=Error(s(474)),Ku=Error(s(542)),Qu={then:function(){}};function jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Pg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Dt,Dt),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Bg(t),t;default:if(typeof i.status=="string")i.then(Dt,Dt);else{if(t=We,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Bg(t),t}throw Bs=i,La}}function zs(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Bs=a,La):a}}var Bs=null;function zg(){if(Bs===null)throw Error(s(459));var t=Bs;return Bs=null,t}function Bg(t){if(t===La||t===Ku)throw Error(s(483))}var ja=null,el=0;function $u(t){var i=el;return el+=1,ja===null&&(ja=[]),Pg(ja,t,i)}function tl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Yu(t,i){throw i.$$typeof===R?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function qg(t){function i(V,D){if(t){var P=V.deletions;P===null?(V.deletions=[D],V.flags|=16):P.push(D)}}function a(V,D){if(!t)return null;for(;D!==null;)i(V,D),D=D.sibling;return null}function l(V){for(var D=new Map;V!==null;)V.key!==null?D.set(V.key,V):D.set(V.index,V),V=V.sibling;return D}function h(V,D){return V=Vi(V,D),V.index=0,V.sibling=null,V}function d(V,D,P){return V.index=P,t?(P=V.alternate,P!==null?(P=P.index,P<D?(V.flags|=67108866,D):P):(V.flags|=67108866,D)):(V.flags|=1048576,D)}function _(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function b(V,D,P,Y){return D===null||D.tag!==6?(D=Ef(P,V.mode,Y),D.return=V,D):(D=h(D,P),D.return=V,D)}function I(V,D,P,Y){var pe=P.type;return pe===X?K(V,D,P.props.children,Y,P.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&zs(pe)===D.type)?(D=h(D,P.props),tl(D,P),D.return=V,D):(D=Bu(P.type,P.key,P.props,null,V.mode,Y),tl(D,P),D.return=V,D)}function B(V,D,P,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==P.containerInfo||D.stateNode.implementation!==P.implementation?(D=Tf(P,V.mode,Y),D.return=V,D):(D=h(D,P.children||[]),D.return=V,D)}function K(V,D,P,Y,pe){return D===null||D.tag!==7?(D=Vs(P,V.mode,Y,pe),D.return=V,D):(D=h(D,P),D.return=V,D)}function J(V,D,P){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Ef(""+D,V.mode,P),D.return=V,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case U:return P=Bu(D.type,D.key,D.props,null,V.mode,P),tl(P,D),P.return=V,P;case z:return D=Tf(D,V.mode,P),D.return=V,D;case S:return D=zs(D),J(V,D,P)}if(Ut(D)||L(D))return D=Vs(D,V.mode,P,null),D.return=V,D;if(typeof D.then=="function")return J(V,$u(D),P);if(D.$$typeof===ne)return J(V,Fu(V,D),P);Yu(V,D)}return null}function q(V,D,P,Y){var pe=D!==null?D.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return pe!==null?null:b(V,D,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case U:return P.key===pe?I(V,D,P,Y):null;case z:return P.key===pe?B(V,D,P,Y):null;case S:return P=zs(P),q(V,D,P,Y)}if(Ut(P)||L(P))return pe!==null?null:K(V,D,P,Y,null);if(typeof P.then=="function")return q(V,D,$u(P),Y);if(P.$$typeof===ne)return q(V,D,Fu(V,P),Y);Yu(V,P)}return null}function H(V,D,P,Y,pe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return V=V.get(P)||null,b(D,V,""+Y,pe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case U:return V=V.get(Y.key===null?P:Y.key)||null,I(D,V,Y,pe);case z:return V=V.get(Y.key===null?P:Y.key)||null,B(D,V,Y,pe);case S:return Y=zs(Y),H(V,D,P,Y,pe)}if(Ut(Y)||L(Y))return V=V.get(P)||null,K(D,V,Y,pe,null);if(typeof Y.then=="function")return H(V,D,P,$u(Y),pe);if(Y.$$typeof===ne)return H(V,D,P,Fu(D,Y),pe);Yu(D,Y)}return null}function ce(V,D,P,Y){for(var pe=null,ze=null,me=D,Re=D=0,Oe=null;me!==null&&Re<P.length;Re++){me.index>Re?(Oe=me,me=null):Oe=me.sibling;var Be=q(V,me,P[Re],Y);if(Be===null){me===null&&(me=Oe);break}t&&me&&Be.alternate===null&&i(V,me),D=d(Be,D,Re),ze===null?pe=Be:ze.sibling=Be,ze=Be,me=Oe}if(Re===P.length)return a(V,me),Ve&&Ui(V,Re),pe;if(me===null){for(;Re<P.length;Re++)me=J(V,P[Re],Y),me!==null&&(D=d(me,D,Re),ze===null?pe=me:ze.sibling=me,ze=me);return Ve&&Ui(V,Re),pe}for(me=l(me);Re<P.length;Re++)Oe=H(me,V,Re,P[Re],Y),Oe!==null&&(t&&Oe.alternate!==null&&me.delete(Oe.key===null?Re:Oe.key),D=d(Oe,D,Re),ze===null?pe=Oe:ze.sibling=Oe,ze=Oe);return t&&me.forEach(function(Xr){return i(V,Xr)}),Ve&&Ui(V,Re),pe}function _e(V,D,P,Y){if(P==null)throw Error(s(151));for(var pe=null,ze=null,me=D,Re=D=0,Oe=null,Be=P.next();me!==null&&!Be.done;Re++,Be=P.next()){me.index>Re?(Oe=me,me=null):Oe=me.sibling;var Xr=q(V,me,Be.value,Y);if(Xr===null){me===null&&(me=Oe);break}t&&me&&Xr.alternate===null&&i(V,me),D=d(Xr,D,Re),ze===null?pe=Xr:ze.sibling=Xr,ze=Xr,me=Oe}if(Be.done)return a(V,me),Ve&&Ui(V,Re),pe;if(me===null){for(;!Be.done;Re++,Be=P.next())Be=J(V,Be.value,Y),Be!==null&&(D=d(Be,D,Re),ze===null?pe=Be:ze.sibling=Be,ze=Be);return Ve&&Ui(V,Re),pe}for(me=l(me);!Be.done;Re++,Be=P.next())Be=H(me,V,Re,Be.value,Y),Be!==null&&(t&&Be.alternate!==null&&me.delete(Be.key===null?Re:Be.key),D=d(Be,D,Re),ze===null?pe=Be:ze.sibling=Be,ze=Be);return t&&me.forEach(function(MA){return i(V,MA)}),Ve&&Ui(V,Re),pe}function Ze(V,D,P,Y){if(typeof P=="object"&&P!==null&&P.type===X&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case U:e:{for(var pe=P.key;D!==null;){if(D.key===pe){if(pe=P.type,pe===X){if(D.tag===7){a(V,D.sibling),Y=h(D,P.props.children),Y.return=V,V=Y;break e}}else if(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&zs(pe)===D.type){a(V,D.sibling),Y=h(D,P.props),tl(Y,P),Y.return=V,V=Y;break e}a(V,D);break}else i(V,D);D=D.sibling}P.type===X?(Y=Vs(P.props.children,V.mode,Y,P.key),Y.return=V,V=Y):(Y=Bu(P.type,P.key,P.props,null,V.mode,Y),tl(Y,P),Y.return=V,V=Y)}return _(V);case z:e:{for(pe=P.key;D!==null;){if(D.key===pe)if(D.tag===4&&D.stateNode.containerInfo===P.containerInfo&&D.stateNode.implementation===P.implementation){a(V,D.sibling),Y=h(D,P.children||[]),Y.return=V,V=Y;break e}else{a(V,D);break}else i(V,D);D=D.sibling}Y=Tf(P,V.mode,Y),Y.return=V,V=Y}return _(V);case S:return P=zs(P),Ze(V,D,P,Y)}if(Ut(P))return ce(V,D,P,Y);if(L(P)){if(pe=L(P),typeof pe!="function")throw Error(s(150));return P=pe.call(P),_e(V,D,P,Y)}if(typeof P.then=="function")return Ze(V,D,$u(P),Y);if(P.$$typeof===ne)return Ze(V,D,Fu(V,P),Y);Yu(V,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,D!==null&&D.tag===6?(a(V,D.sibling),Y=h(D,P),Y.return=V,V=Y):(a(V,D),Y=Ef(P,V.mode,Y),Y.return=V,V=Y),_(V)):a(V,D)}return function(V,D,P,Y){try{el=0;var pe=Ze(V,D,P,Y);return ja=null,pe}catch(me){if(me===La||me===Ku)throw me;var ze=An(29,me,null,V.mode);return ze.lanes=Y,ze.return=V,ze}finally{}}}var qs=qg(!0),Hg=qg(!1),Mr=!1;function Mf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function kr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=zu(t),Rg(t,null,a),i}return Pu(t,l,i,a),zu(t)}function nl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,dr(t,a)}}function Vf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Uf=!1;function il(){if(Uf){var t=Ua;if(t!==null)throw t}}function rl(t,i,a,l){Uf=!1;var h=t.updateQueue;Mr=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var I=b,B=I.next;I.next=null,_===null?d=B:_.next=B,_=I;var K=t.alternate;K!==null&&(K=K.updateQueue,b=K.lastBaseUpdate,b!==_&&(b===null?K.firstBaseUpdate=B:b.next=B,K.lastBaseUpdate=I))}if(d!==null){var J=h.baseState;_=0,K=B=I=null,b=d;do{var q=b.lane&-536870913,H=q!==b.lane;if(H?(De&q)===q:(l&q)===q){q!==0&&q===Va&&(Uf=!0),K!==null&&(K=K.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ce=t,_e=b;q=i;var Ze=a;switch(_e.tag){case 1:if(ce=_e.payload,typeof ce=="function"){J=ce.call(Ze,J,q);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=_e.payload,q=typeof ce=="function"?ce.call(Ze,J,q):ce,q==null)break e;J=A({},J,q);break e;case 2:Mr=!0}}q=b.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},K===null?(B=K=H,I=J):K=K.next=H,_|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;H=b,b=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);K===null&&(I=J),h.baseState=I,h.firstBaseUpdate=B,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),zr|=_,t.lanes=_,t.memoizedState=J}}function Fg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Gg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Fg(a[t],i)}var Pa=M(null),Xu=M(0);function Kg(t,i){t=Qi,te(Xu,t),te(Pa,i),Qi=t|i.baseLanes}function Lf(){te(Xu,Qi),te(Pa,Pa.current)}function jf(){Qi=Xu.current,$(Pa),$(Xu)}var Sn=M(null),Bn=null;function Ur(t){var i=t.alternate;te(pt,pt.current&1),te(Sn,t),Bn===null&&(i===null||Pa.current!==null||i.memoizedState!==null)&&(Bn=t)}function Pf(t){te(pt,pt.current),te(Sn,t),Bn===null&&(Bn=t)}function Qg(t){t.tag===22?(te(pt,pt.current),te(Sn,t),Bn===null&&(Bn=t)):Lr()}function Lr(){te(pt,pt.current),te(Sn,Sn.current)}function Rn(t){$(Sn),Bn===t&&(Bn=null),$(pt)}var pt=M(0);function Ju(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gd(a)||Kd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Pi=0,Se=null,Xe=null,Tt=null,Zu=!1,za=!1,Hs=!1,Wu=0,sl=0,Ba=null,ww=0;function ct(){throw Error(s(321))}function zf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!wn(t[a],i[a]))return!1;return!0}function Bf(t,i,a,l,h,d){return Pi=d,Se=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?Ny:nd,Hs=!1,d=a(l,h),Hs=!1,za&&(d=Yg(i,a,l,h)),$g(t),d}function $g(t){Q.H=ll;var i=Xe!==null&&Xe.next!==null;if(Pi=0,Tt=Xe=Se=null,Zu=!1,sl=0,Ba=null,i)throw Error(s(300));t===null||bt||(t=t.dependencies,t!==null&&Hu(t)&&(bt=!0))}function Yg(t,i,a,l){Se=t;var h=0;do{if(za&&(Ba=null),sl=0,za=!1,25<=h)throw Error(s(301));if(h+=1,Tt=Xe=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=Dy,d=i(a,l)}while(za);return d}function Aw(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?al(i):i,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Se.flags|=1024),i}function qf(){var t=Wu!==0;return Wu=0,t}function Hf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Ff(t){if(Zu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Zu=!1}Pi=0,Tt=Xe=Se=null,za=!1,sl=Wu=0,Ba=null}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Se.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function gt(){if(Xe===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var i=Tt===null?Se.memoizedState:Tt.next;if(i!==null)Tt=i,Xe=t;else{if(t===null)throw Se.alternate===null?Error(s(467)):Error(s(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Tt===null?Se.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(t){var i=sl;return sl+=1,Ba===null&&(Ba=[]),t=Pg(Ba,t,i),i=Se,(Tt===null?i.memoizedState:Tt.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?Ny:nd),t}function tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return al(t);if(t.$$typeof===ne)return qt(t)}throw Error(s(438,String(t)))}function Gf(t){var i=null,a=Se.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Se.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ec(),Se.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function zi(t,i){return typeof i=="function"?i(t):i}function nc(t){var i=gt();return Kf(i,Xe,t)}function Kf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=_=null,I=null,B=i,K=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(De&J)===J:(Pi&J)===J){var q=B.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===Va&&(K=!0);else if((Pi&q)===q){B=B.next,q===Va&&(K=!0);continue}else J={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(b=I=J,_=d):I=I.next=J,Se.lanes|=q,zr|=q;J=B.action,Hs&&a(d,J),d=B.hasEagerState?B.eagerState:a(d,J)}else q={lane:J,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(b=I=q,_=d):I=I.next=q,Se.lanes|=J,zr|=J;B=B.next}while(B!==null&&B!==i);if(I===null?_=d:I.next=b,!wn(d,t.memoizedState)&&(bt=!0,K&&(a=Ua,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=I,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Qf(t){var i=gt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);wn(d,i.memoizedState)||(bt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Xg(t,i,a){var l=Se,h=gt(),d=Ve;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!wn((Xe||h).memoizedState,a);if(_&&(h.memoizedState=a,bt=!0),h=h.queue,Xf(Wg.bind(null,l,h,t),[t]),h.getSnapshot!==i||_||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,qa(9,{destroy:void 0},Zg.bind(null,l,h,a,i),null),We===null)throw Error(s(349));d||(Pi&127)!==0||Jg(l,i,a)}return a}function Jg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Se.updateQueue,i===null?(i=ec(),Se.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Zg(t,i,a,l){i.value=a,i.getSnapshot=l,ey(i)&&ty(t)}function Wg(t,i,a){return a(function(){ey(i)&&ty(t)})}function ey(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!wn(t,a)}catch{return!0}}function ty(t){var i=ks(t,2);i!==null&&yn(i,t,2)}function $f(t){var i=un();if(typeof t=="function"){var a=t;if(t=a(),Hs){On(!0);try{a()}finally{On(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:t},i}function ny(t,i,a,l){return t.baseState=a,Kf(t,Xe,typeof l=="function"?l:zi)}function Sw(t,i,a,l,h){if(sc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Q.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,iy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function iy(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=Q.T,_={};Q.T=_;try{var b=a(h,l),I=Q.S;I!==null&&I(_,b),ry(t,i,b)}catch(B){Yf(t,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),Q.T=d}}else try{d=a(h,l),ry(t,i,d)}catch(B){Yf(t,i,B)}}function ry(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){sy(t,i,l)},function(l){return Yf(t,i,l)}):sy(t,i,a)}function sy(t,i,a){i.status="fulfilled",i.value=a,ay(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,iy(t,a)))}function Yf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ay(i),i=i.next;while(i!==l)}t.action=null}function ay(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function oy(t,i){return i}function ly(t,i){if(Ve){var a=We.formState;if(a!==null){e:{var l=Se;if(Ve){if(tt){t:{for(var h=tt,d=zn;h.nodeType!==8;){if(!d){h=null;break t}if(h=qn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){tt=qn(h.nextSibling),l=h.data==="F!";break e}}Dr(l)}l=!1}l&&(i=a[0])}}return a=un(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oy,lastRenderedState:i},a.queue=l,a=xy.bind(null,Se,l),l.dispatch=a,l=$f(!1),d=td.bind(null,Se,!1,l.queue),l=un(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=Sw.bind(null,Se,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function uy(t){var i=gt();return cy(i,Xe,t)}function cy(t,i,a){if(i=Kf(t,i,oy)[0],t=nc(zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=al(i)}catch(_){throw _===La?Ku:_}else l=i;i=gt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Se.flags|=2048,qa(9,{destroy:void 0},Rw.bind(null,h,a),null)),[l,d,t]}function Rw(t,i){t.action=i}function hy(t){var i=gt(),a=Xe;if(a!==null)return cy(i,a,t);gt(),i=i.memoizedState,a=gt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function qa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Se.updateQueue,i===null&&(i=ec(),Se.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function fy(){return gt().memoizedState}function ic(t,i,a,l){var h=un();Se.flags|=t,h.memoizedState=qa(1|i,{destroy:void 0},a,l===void 0?null:l)}function rc(t,i,a,l){var h=gt();l=l===void 0?null:l;var d=h.memoizedState.inst;Xe!==null&&l!==null&&zf(l,Xe.memoizedState.deps)?h.memoizedState=qa(i,d,a,l):(Se.flags|=t,h.memoizedState=qa(1|i,d,a,l))}function dy(t,i){ic(8390656,8,t,i)}function Xf(t,i){rc(2048,8,t,i)}function xw(t){Se.flags|=4;var i=Se.updateQueue;if(i===null)i=ec(),Se.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function my(t){var i=gt().memoizedState;return xw({ref:i,nextImpl:t}),function(){if((He&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function py(t,i){return rc(4,2,t,i)}function gy(t,i){return rc(4,4,t,i)}function yy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function _y(t,i,a){a=a!=null?a.concat([t]):null,rc(4,4,yy.bind(null,i,t),a)}function Jf(){}function vy(t,i){var a=gt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&zf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Ey(t,i){var a=gt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&zf(i,l[1]))return l[0];if(l=t(),Hs){On(!0);try{t()}finally{On(!1)}}return a.memoizedState=[l,i],l}function Zf(t,i,a){return a===void 0||(Pi&1073741824)!==0&&(De&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=T_(),Se.lanes|=t,zr|=t,a)}function Ty(t,i,a,l){return wn(a,i)?a:Pa.current!==null?(t=Zf(t,a,l),wn(t,i)||(bt=!0),t):(Pi&42)===0||(Pi&1073741824)!==0&&(De&261930)===0?(bt=!0,t.memoizedState=a):(t=T_(),Se.lanes|=t,zr|=t,i)}function by(t,i,a,l,h){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=Q.T,b={};Q.T=b,td(t,!1,i,a);try{var I=h(),B=Q.S;if(B!==null&&B(b,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var K=bw(I,l);ol(t,i,K,In(t))}else ol(t,i,l,In(t))}catch(J){ol(t,i,{then:function(){},status:"rejected",reason:J},In())}finally{ae.p=d,_!==null&&b.types!==null&&(_.types=b.types),Q.T=_}}function Cw(){}function Wf(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=wy(t).queue;by(t,h,i,ge,a===null?Cw:function(){return Ay(t),a(l)})}function wy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ay(t){var i=wy(t);i.next===null&&(i=t.alternate.memoizedState),ol(t,i.next.queue,{},In())}function ed(){return qt(Al)}function Sy(){return gt().memoizedState}function Ry(){return gt().memoizedState}function Iw(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=In();t=kr(a);var l=Vr(i,t,a);l!==null&&(yn(l,i,a),nl(l,i,a)),i={cache:If()},t.payload=i;return}i=i.return}}function Nw(t,i,a){var l=In();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},sc(t)?Cy(i,a):(a=_f(t,i,a,l),a!==null&&(yn(a,t,l),Iy(a,i,l)))}function xy(t,i,a){var l=In();ol(t,i,a,l)}function ol(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(sc(t))Cy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,wn(b,_))return Pu(t,i,h,0),We===null&&ju(),!1}catch{}finally{}if(a=_f(t,i,h,l),a!==null)return yn(a,t,l),Iy(a,i,l),!0}return!1}function td(t,i,a,l){if(l={lane:2,revertLane:Md(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},sc(t)){if(i)throw Error(s(479))}else i=_f(t,a,l,2),i!==null&&yn(i,t,2)}function sc(t){var i=t.alternate;return t===Se||i!==null&&i===Se}function Cy(t,i){za=Zu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Iy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,dr(t,a)}}var ll={readContext:qt,use:tc,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};ll.useEffectEvent=ct;var Ny={readContext:qt,use:tc,useCallback:function(t,i){return un().memoizedState=[t,i===void 0?null:i],t},useContext:qt,useEffect:dy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,ic(4194308,4,yy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ic(4194308,4,t,i)},useInsertionEffect:function(t,i){ic(4,2,t,i)},useMemo:function(t,i){var a=un();i=i===void 0?null:i;var l=t();if(Hs){On(!0);try{t()}finally{On(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=un();if(a!==void 0){var h=a(i);if(Hs){On(!0);try{a(i)}finally{On(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Nw.bind(null,Se,t),[l.memoizedState,t]},useRef:function(t){var i=un();return t={current:t},i.memoizedState=t},useState:function(t){t=$f(t);var i=t.queue,a=xy.bind(null,Se,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Jf,useDeferredValue:function(t,i){var a=un();return Zf(a,t,i)},useTransition:function(){var t=$f(!1);return t=by.bind(null,Se,t.queue,!0,!1),un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Se,h=un();if(Ve){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),We===null)throw Error(s(349));(De&127)!==0||Jg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,dy(Wg.bind(null,l,d,t),[t]),l.flags|=2048,qa(9,{destroy:void 0},Zg.bind(null,l,d,a,i),null),a},useId:function(){var t=un(),i=We.identifierPrefix;if(Ve){var a=di,l=fi;a=(l&~(1<<32-rn(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Wu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=ww++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:ed,useFormState:ly,useActionState:ly,useOptimistic:function(t){var i=un();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=td.bind(null,Se,!0,a),a.dispatch=i,[t,i]},useMemoCache:Gf,useCacheRefresh:function(){return un().memoizedState=Iw.bind(null,Se)},useEffectEvent:function(t){var i=un(),a={impl:t};return i.memoizedState=a,function(){if((He&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},nd={readContext:qt,use:tc,useCallback:vy,useContext:qt,useEffect:Xf,useImperativeHandle:_y,useInsertionEffect:py,useLayoutEffect:gy,useMemo:Ey,useReducer:nc,useRef:fy,useState:function(){return nc(zi)},useDebugValue:Jf,useDeferredValue:function(t,i){var a=gt();return Ty(a,Xe.memoizedState,t,i)},useTransition:function(){var t=nc(zi)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:al(t),i]},useSyncExternalStore:Xg,useId:Sy,useHostTransitionStatus:ed,useFormState:uy,useActionState:uy,useOptimistic:function(t,i){var a=gt();return ny(a,Xe,t,i)},useMemoCache:Gf,useCacheRefresh:Ry};nd.useEffectEvent=my;var Dy={readContext:qt,use:tc,useCallback:vy,useContext:qt,useEffect:Xf,useImperativeHandle:_y,useInsertionEffect:py,useLayoutEffect:gy,useMemo:Ey,useReducer:Qf,useRef:fy,useState:function(){return Qf(zi)},useDebugValue:Jf,useDeferredValue:function(t,i){var a=gt();return Xe===null?Zf(a,t,i):Ty(a,Xe.memoizedState,t,i)},useTransition:function(){var t=Qf(zi)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:al(t),i]},useSyncExternalStore:Xg,useId:Sy,useHostTransitionStatus:ed,useFormState:hy,useActionState:hy,useOptimistic:function(t,i){var a=gt();return Xe!==null?ny(a,Xe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Gf,useCacheRefresh:Ry};Dy.useEffectEvent=my;function id(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var rd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=In(),h=kr(l);h.payload=i,a!=null&&(h.callback=a),i=Vr(t,h,l),i!==null&&(yn(i,t,l),nl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=In(),h=kr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Vr(t,h,l),i!==null&&(yn(i,t,l),nl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=In(),l=kr(a);l.tag=2,i!=null&&(l.callback=i),i=Vr(t,l,a),i!==null&&(yn(i,t,a),nl(i,t,a))}};function Oy(t,i,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!$o(a,l)||!$o(h,d):!0}function My(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&rd.enqueueReplaceState(i,i.state,null)}function Fs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function ky(t){Lu(t)}function Vy(t){console.error(t)}function Uy(t){Lu(t)}function ac(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Ly(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function sd(t,i,a){return a=kr(a),a.tag=3,a.payload={element:null},a.callback=function(){ac(t,i)},a}function jy(t){return t=kr(t),t.tag=3,t}function Py(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Ly(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Ly(i,a,l),typeof h!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Dw(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ka(i,a,h,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return Bn===null?_c():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Qu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Nd(t,l,h)),!1;case 22:return a.flags|=65536,l===Qu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Nd(t,l,h)),!1}throw Error(s(435,a.tag))}return Nd(t,l,h),_c(),!1}if(Ve)return i=Sn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Af&&(t=Error(s(422),{cause:l}),Jo(Ln(t,a)))):(l!==Af&&(i=Error(s(423),{cause:l}),Jo(Ln(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ln(l,a),h=sd(t.stateNode,l,h),Vf(t,h),ht!==4&&(ht=2)),!1;var d=Error(s(520),{cause:l});if(d=Ln(d,a),gl===null?gl=[d]:gl.push(d),ht!==4&&(ht=2),i===null)return!0;l=Ln(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=sd(a.stateNode,l,t),Vf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Br===null||!Br.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=jy(h),Py(h,t,a,l),Vf(a,h),!1}a=a.return}while(a!==null);return!1}var ad=Error(s(461)),bt=!1;function Ht(t,i,a,l){i.child=t===null?Hg(i,null,a,l):qs(i,t.child,a,l)}function zy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return js(i),l=Bf(t,i,a,_,d,h),b=qf(),t!==null&&!bt?(Hf(t,i,h),Bi(t,i,h)):(Ve&&b&&bf(i),i.flags|=1,Ht(t,i,l,h),i.child)}function By(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!vf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,qy(t,i,d,l,h)):(t=Bu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!md(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:$o,a(_,l)&&t.ref===i.ref)return Bi(t,i,h)}return i.flags|=1,t=Vi(d,l),t.ref=i.ref,t.return=i,i.child=t}function qy(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if($o(d,l)&&t.ref===i.ref)if(bt=!1,i.pendingProps=l=d,md(t,h))(t.flags&131072)!==0&&(bt=!0);else return i.lanes=t.lanes,Bi(t,i,h)}return od(t,i,a,l,h)}function Hy(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return Fy(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Gu(i,d!==null?d.cachePool:null),d!==null?Kg(i,d):Lf(),Qg(i);else return l=i.lanes=536870912,Fy(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Gu(i,d.cachePool),Kg(i,d),Lr(),i.memoizedState=null):(t!==null&&Gu(i,null),Lf(),Lr());return Ht(t,i,h,a),i.child}function ul(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Fy(t,i,a,l,h){var d=Df();return d=d===null?null:{parent:Et._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Gu(i,null),Lf(),Qg(i),t!==null&&ka(t,i,l,!0),i.childLanes=h,null}function oc(t,i){return i=uc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Gy(t,i,a){return qs(i,t.child,null,a),t=oc(i,i.pendingProps),t.flags|=2,Rn(i),i.memoizedState=null,t}function Ow(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ve){if(l.mode==="hidden")return t=oc(i,l),i.lanes=536870912,ul(null,t);if(Pf(i),(t=tt)?(t=iv(t,zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ir!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},a=Cg(t),a.return=i,i.child=a,Bt=i,tt=null)):t=null,t===null)throw Dr(i);return i.lanes=536870912,null}return oc(i,l)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Pf(i),h)if(i.flags&256)i.flags&=-257,i=Gy(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(bt||ka(t,i,a,!1),h=(a&t.childLanes)!==0,bt||h){if(l=We,l!==null&&(_=mr(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,ks(t,_),yn(l,t,_),ad;_c(),i=Gy(t,i,a)}else t=d.treeContext,tt=qn(_.nextSibling),Bt=i,Ve=!0,Nr=null,zn=!1,t!==null&&Dg(i,t),i=oc(i,l),i.flags|=4096;return i}return t=Vi(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function lc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function od(t,i,a,l,h){return js(i),a=Bf(t,i,a,l,void 0,h),l=qf(),t!==null&&!bt?(Hf(t,i,h),Bi(t,i,h)):(Ve&&l&&bf(i),i.flags|=1,Ht(t,i,a,h),i.child)}function Ky(t,i,a,l,h,d){return js(i),i.updateQueue=null,a=Yg(i,l,a,h),$g(t),l=qf(),t!==null&&!bt?(Hf(t,i,d),Bi(t,i,d)):(Ve&&l&&bf(i),i.flags|=1,Ht(t,i,a,d),i.child)}function Qy(t,i,a,l,h){if(js(i),i.stateNode===null){var d=Na,_=a.contextType;typeof _=="object"&&_!==null&&(d=qt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=rd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Mf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?qt(_):Na,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(id(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&rd.enqueueReplaceState(d,d.state,null),rl(i,l,d,h),il(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,I=Fs(a,b);d.props=I;var B=d.context,K=a.contextType;_=Na,typeof K=="object"&&K!==null&&(_=qt(K));var J=a.getDerivedStateFromProps;K=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==_)&&My(i,d,l,_),Mr=!1;var q=i.memoizedState;d.state=q,rl(i,l,d,h),il(),B=i.memoizedState,b||q!==B||Mr?(typeof J=="function"&&(id(i,a,J,l),B=i.memoizedState),(I=Mr||Oy(i,a,I,l,q,B,_))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,kf(t,i),_=i.memoizedProps,K=Fs(a,_),d.props=K,J=i.pendingProps,q=d.context,B=a.contextType,I=Na,typeof B=="object"&&B!==null&&(I=qt(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==J||q!==I)&&My(i,d,l,I),Mr=!1,q=i.memoizedState,d.state=q,rl(i,l,d,h),il();var H=i.memoizedState;_!==J||q!==H||Mr||t!==null&&t.dependencies!==null&&Hu(t.dependencies)?(typeof b=="function"&&(id(i,a,b,l),H=i.memoizedState),(K=Mr||Oy(i,a,K,l,q,H,I)||t!==null&&t.dependencies!==null&&Hu(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=I,l=K):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,lc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=qs(i,t.child,null,h),i.child=qs(i,null,a,h)):Ht(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Bi(t,i,h),t}function $y(t,i,a,l){return Us(),i.flags|=256,Ht(t,i,a,l),i.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ud(t){return{baseLanes:t,cachePool:Lg()}}function cd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Cn),t}function Yy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ve){if(h?Ur(i):Lr(),(t=tt)?(t=iv(t,zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ir!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},a=Cg(t),a.return=i,i.child=a,Bt=i,tt=null)):t=null,t===null)throw Dr(i);return Kd(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(Lr(),h=i.mode,b=uc({mode:"hidden",children:b},h),l=Vs(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=ud(a),l.childLanes=cd(t,_,a),i.memoizedState=ld,ul(null,l)):(Ur(i),hd(i,b))}var I=t.memoizedState;if(I!==null&&(b=I.dehydrated,b!==null)){if(d)i.flags&256?(Ur(i),i.flags&=-257,i=fd(t,i,a)):i.memoizedState!==null?(Lr(),i.child=t.child,i.flags|=128,i=null):(Lr(),b=l.fallback,h=i.mode,l=uc({mode:"visible",children:l.children},h),b=Vs(b,h,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,qs(i,t.child,null,a),l=i.child,l.memoizedState=ud(a),l.childLanes=cd(t,_,a),i.memoizedState=ld,i=ul(null,l));else if(Ur(i),Kd(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(s(419)),l.stack="",l.digest=_,Jo({value:l,source:null,stack:null}),i=fd(t,i,a)}else if(bt||ka(t,i,a,!1),_=(a&t.childLanes)!==0,bt||_){if(_=We,_!==null&&(l=mr(_,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,ks(t,l),yn(_,t,l),ad;Gd(b)||_c(),i=fd(t,i,a)}else Gd(b)?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,tt=qn(b.nextSibling),Bt=i,Ve=!0,Nr=null,zn=!1,t!==null&&Dg(i,t),i=hd(i,l.children),i.flags|=4096);return i}return h?(Lr(),b=l.fallback,h=i.mode,I=t.child,B=I.sibling,l=Vi(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,B!==null?b=Vi(B,b):(b=Vs(b,h,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,ul(null,l),l=i.child,b=t.child.memoizedState,b===null?b=ud(a):(h=b.cachePool,h!==null?(I=Et._currentValue,h=h.parent!==I?{parent:I,pool:I}:h):h=Lg(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=cd(t,_,a),i.memoizedState=ld,ul(t.child,l)):(Ur(i),a=t.child,t=a.sibling,a=Vi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function hd(t,i){return i=uc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function uc(t,i){return t=An(22,t,null,i),t.lanes=0,t}function fd(t,i,a){return qs(i,t.child,null,a),t=hd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Xy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),xf(t.return,i,a)}function dd(t,i,a,l,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Jy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var _=pt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,te(pt,_),Ht(t,i,l,a),l=Ve?Xo:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xy(t,a,i);else if(t.tag===19)Xy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Ju(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),dd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Ju(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}dd(i,!0,a,null,d,l);break;case"together":dd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Bi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),zr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ka(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Vi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Vi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function md(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Hu(t)))}function Mw(t,i,a){switch(i.tag){case 3:Lt(i,i.stateNode.containerInfo),Or(i,Et,t.memoizedState.cache),Us();break;case 27:case 5:ii(i);break;case 4:Lt(i,i.stateNode.containerInfo);break;case 10:Or(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Pf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ur(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Yy(t,i,a):(Ur(i),t=Bi(t,i,a),t!==null?t.sibling:null);Ur(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ka(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Jy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),te(pt,pt.current),l)break;return null;case 22:return i.lanes=0,Hy(t,i,a,i.pendingProps);case 24:Or(i,Et,t.memoizedState.cache)}return Bi(t,i,a)}function Zy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)bt=!0;else{if(!md(t,a)&&(i.flags&128)===0)return bt=!1,Mw(t,i,a);bt=(t.flags&131072)!==0}else bt=!1,Ve&&(i.flags&1048576)!==0&&Ng(i,Xo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=zs(i.elementType),i.type=t,typeof t=="function")vf(t)?(l=Fs(t,l),i.tag=1,i=Qy(null,i,t,l,a)):(i.tag=0,i=od(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ee){i.tag=11,i=zy(null,i,t,l,a);break e}else if(h===x){i.tag=14,i=By(null,i,t,l,a);break e}}throw i=Rt(t)||t,Error(s(306,i,""))}}return i;case 0:return od(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Fs(l,i.pendingProps),Qy(t,i,l,h,a);case 3:e:{if(Lt(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,kf(t,i),rl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Or(i,Et,l),l!==d.cache&&Cf(i,[Et],a,!0),il(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=$y(t,i,l,a);break e}else if(l!==h){h=Ln(Error(s(424)),i),Jo(h),i=$y(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(tt=qn(t.firstChild),Bt=i,Ve=!0,Nr=null,zn=!0,a=Hg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Us(),l===h){i=Bi(t,i,a);break e}Ht(t,i,l,a)}i=i.child}return i;case 26:return lc(t,i),t===null?(a=uv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ve||(a=i.type,t=i.pendingProps,l=Sc(xe.current).createElement(a),l[lt]=i,l[zt]=t,Ft(l,a,t),mt(l),i.stateNode=l):i.memoizedState=uv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ii(i),t===null&&Ve&&(l=i.stateNode=av(i.type,i.pendingProps,xe.current),Bt=i,zn=!0,h=tt,Gr(i.type)?(Qd=h,tt=qn(l.firstChild)):tt=h),Ht(t,i,i.pendingProps.children,a),lc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ve&&((h=l=tt)&&(l=uA(l,i.type,i.pendingProps,zn),l!==null?(i.stateNode=l,Bt=i,tt=qn(l.firstChild),zn=!1,h=!0):h=!1),h||Dr(i)),ii(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,qd(h,d)?l=null:_!==null&&qd(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Bf(t,i,Aw,null,null,a),Al._currentValue=h),lc(t,i),Ht(t,i,l,a),i.child;case 6:return t===null&&Ve&&((t=a=tt)&&(a=cA(a,i.pendingProps,zn),a!==null?(i.stateNode=a,Bt=i,tt=null,t=!0):t=!1),t||Dr(i)),null;case 13:return Yy(t,i,a);case 4:return Lt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=qs(i,null,l,a):Ht(t,i,l,a),i.child;case 11:return zy(t,i,i.type,i.pendingProps,a);case 7:return Ht(t,i,i.pendingProps,a),i.child;case 8:return Ht(t,i,i.pendingProps.children,a),i.child;case 12:return Ht(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Or(i,i.type,l.value),Ht(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,js(i),h=qt(h),l=l(h),i.flags|=1,Ht(t,i,l,a),i.child;case 14:return By(t,i,i.type,i.pendingProps,a);case 15:return qy(t,i,i.type,i.pendingProps,a);case 19:return Jy(t,i,a);case 31:return Ow(t,i,a);case 22:return Hy(t,i,a,i.pendingProps);case 24:return js(i),l=qt(Et),t===null?(h=Df(),h===null&&(h=We,d=If(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Mf(i),Or(i,Et,h)):((t.lanes&a)!==0&&(kf(t,i),rl(i,null,null,a),il()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Or(i,Et,l)):(l=d.cache,Or(i,Et,l),l!==h.cache&&Cf(i,[Et],a,!0))),Ht(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function qi(t){t.flags|=4}function pd(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(S_())t.flags|=8192;else throw Bs=Qu,Of}else t.flags&=-16777217}function Wy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!mv(i))if(S_())t.flags|=8192;else throw Bs=Qu,Of}function cc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?No():536870912,t.lanes|=i,Ka|=i)}function cl(t,i){if(!Ve)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function nt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function kw(t,i,a){var l=i.pendingProps;switch(wf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(i),null;case 1:return nt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ji(Et),st(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ma(i)?qi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Sf())),nt(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(qi(i),d!==null?(nt(i),Wy(i,d)):(nt(i),pd(i,h,null,l,a))):d?d!==t.memoizedState?(qi(i),nt(i),Wy(i,d)):(nt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&qi(i),nt(i),pd(i,h,t,l,a)),null;case 27:if(wi(i),a=xe.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&qi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return nt(i),null}t=he.current,Ma(i)?Og(i):(t=av(h,l,a),i.stateNode=t,qi(i))}return nt(i),null;case 5:if(wi(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&qi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return nt(i),null}if(d=he.current,Ma(i))Og(i);else{var _=Sc(xe.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}d[lt]=i,d[zt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Ft(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&qi(i)}}return nt(i),pd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&qi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=xe.current,Ma(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Bt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[lt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Y_(t.nodeValue,a)),t||Dr(i,!0)}else t=Sc(t).createTextNode(l),t[lt]=i,i.stateNode=t}return nt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Ma(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[lt]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;nt(i),t=!1}else a=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Rn(i),i):(Rn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return nt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ma(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[lt]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;nt(i),h=!1}else h=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Rn(i),i):(Rn(i),null)}return Rn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),cc(i,i.updateQueue),nt(i),null);case 4:return st(),t===null&&Ld(i.stateNode.containerInfo),nt(i),null;case 10:return ji(i.type),nt(i),null;case 19:if($(pt),l=i.memoizedState,l===null)return nt(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)cl(l,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Ju(t),d!==null){for(i.flags|=128,cl(l,!1),t=d.updateQueue,i.updateQueue=t,cc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)xg(a,t),a=a.sibling;return te(pt,pt.current&1|2),Ve&&Ui(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&jt()>pc&&(i.flags|=128,h=!0,cl(l,!1),i.lanes=4194304)}else{if(!h)if(t=Ju(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,cc(i,t),cl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ve)return nt(i),null}else 2*jt()-l.renderingStartTime>pc&&a!==536870912&&(i.flags|=128,h=!0,cl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=jt(),t.sibling=null,a=pt.current,te(pt,h?a&1|2:a&1),Ve&&Ui(i,l.treeForkCount),t):(nt(i),null);case 22:case 23:return Rn(i),jf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(nt(i),i.subtreeFlags&6&&(i.flags|=8192)):nt(i),a=i.updateQueue,a!==null&&cc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&$(Ps),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ji(Et),nt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Vw(t,i){switch(wf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ji(Et),st(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return wi(i),null;case 31:if(i.memoizedState!==null){if(Rn(i),i.alternate===null)throw Error(s(340));Us()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Rn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Us()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return $(pt),null;case 4:return st(),null;case 10:return ji(i.type),null;case 22:case 23:return Rn(i),jf(),t!==null&&$(Ps),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ji(Et),null;case 25:return null;default:return null}}function e_(t,i){switch(wf(i),i.tag){case 3:ji(Et),st();break;case 26:case 27:case 5:wi(i);break;case 4:st();break;case 31:i.memoizedState!==null&&Rn(i);break;case 13:Rn(i);break;case 19:$(pt);break;case 10:ji(i.type);break;case 22:case 23:Rn(i),jf(),t!==null&&$(Ps);break;case 24:ji(Et)}}function hl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(b){Qe(i,i.return,b)}}function jr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var I=a,B=b;try{B()}catch(K){Qe(h,I,K)}}}l=l.next}while(l!==d)}}catch(K){Qe(i,i.return,K)}}function t_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Gg(i,a)}catch(l){Qe(t,t.return,l)}}}function n_(t,i,a){a.props=Fs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Qe(t,i,l)}}function fl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Qe(t,i,h)}}function mi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Qe(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Qe(t,i,h)}else a.current=null}function i_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Qe(t,t.return,h)}}function gd(t,i,a){try{var l=t.stateNode;iA(l,t.type,a,i),l[zt]=i}catch(h){Qe(t,t.return,h)}}function r_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Gr(t.type)||t.tag===4}function yd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Gr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _d(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Dt));else if(l!==4&&(l===27&&Gr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(_d(t,i,a),t=t.sibling;t!==null;)_d(t,i,a),t=t.sibling}function hc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Gr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(hc(t,i,a),t=t.sibling;t!==null;)hc(t,i,a),t=t.sibling}function s_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ft(i,l,a),i[lt]=t,i[zt]=a}catch(d){Qe(t,t.return,d)}}var Hi=!1,wt=!1,vd=!1,a_=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Uw(t,i){if(t=t.containerInfo,zd=Oc,t=_g(t),ff(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,I=-1,B=0,K=0,J=t,q=null;t:for(;;){for(var H;J!==a||h!==0&&J.nodeType!==3||(b=_+h),J!==d||l!==0&&J.nodeType!==3||(I=_+l),J.nodeType===3&&(_+=J.nodeValue.length),(H=J.firstChild)!==null;)q=J,J=H;for(;;){if(J===t)break t;if(q===a&&++B===h&&(b=_),q===d&&++K===l&&(I=_),(H=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=H}a=b===-1||I===-1?null:{start:b,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bd={focusedElem:t,selectionRange:a},Oc=!1,kt=i;kt!==null;)if(i=kt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,kt=t;else for(;kt!==null;){switch(i=kt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ce=Fs(a.type,h);t=l.getSnapshotBeforeUpdate(ce,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Qe(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Fd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Fd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,kt=t;break}kt=i.return}}function o_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Gi(t,a),l&4&&hl(5,a);break;case 1:if(Gi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Qe(a,a.return,_)}else{var h=Fs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Qe(a,a.return,_)}}l&64&&t_(a),l&512&&fl(a,a.return);break;case 3:if(Gi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Gg(t,i)}catch(_){Qe(a,a.return,_)}}break;case 27:i===null&&l&4&&s_(a);case 26:case 5:Gi(t,a),i===null&&l&4&&i_(a),l&512&&fl(a,a.return);break;case 12:Gi(t,a);break;case 31:Gi(t,a),l&4&&c_(t,a);break;case 13:Gi(t,a),l&4&&h_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Gw.bind(null,a),hA(t,a))));break;case 22:if(l=a.memoizedState!==null||Hi,!l){i=i!==null&&i.memoizedState!==null||wt,h=Hi;var d=wt;Hi=l,(wt=i)&&!d?Ki(t,a,(a.subtreeFlags&8772)!==0):Gi(t,a),Hi=h,wt=d}break;case 30:break;default:Gi(t,a)}}function l_(t){var i=t.alternate;i!==null&&(t.alternate=null,l_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&bs(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var rt=null,dn=!1;function Fi(t,i,a){for(a=a.child;a!==null;)u_(t,i,a),a=a.sibling}function u_(t,i,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ur,a)}catch{}switch(a.tag){case 26:wt||mi(a,i),Fi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||mi(a,i);var l=rt,h=dn;Gr(a.type)&&(rt=a.stateNode,dn=!1),Fi(t,i,a),Tl(a.stateNode),rt=l,dn=h;break;case 5:wt||mi(a,i);case 6:if(l=rt,h=dn,rt=null,Fi(t,i,a),rt=l,dn=h,rt!==null)if(dn)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(a.stateNode)}catch(d){Qe(a,i,d)}else try{rt.removeChild(a.stateNode)}catch(d){Qe(a,i,d)}break;case 18:rt!==null&&(dn?(t=rt,tv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),eo(t)):tv(rt,a.stateNode));break;case 4:l=rt,h=dn,rt=a.stateNode.containerInfo,dn=!0,Fi(t,i,a),rt=l,dn=h;break;case 0:case 11:case 14:case 15:jr(2,a,i),wt||jr(4,a,i),Fi(t,i,a);break;case 1:wt||(mi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&n_(a,i,l)),Fi(t,i,a);break;case 21:Fi(t,i,a);break;case 22:wt=(l=wt)||a.memoizedState!==null,Fi(t,i,a),wt=l;break;default:Fi(t,i,a)}}function c_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{eo(t)}catch(a){Qe(i,i.return,a)}}}function h_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{eo(t)}catch(a){Qe(i,i.return,a)}}function Lw(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new a_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new a_),i;default:throw Error(s(435,t.tag))}}function fc(t,i){var a=Lw(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=Kw.bind(null,t,l);l.then(h,h)}})}function mn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Gr(b.type)){rt=b.stateNode,dn=!1;break e}break;case 5:rt=b.stateNode,dn=!1;break e;case 3:case 4:rt=b.stateNode.containerInfo,dn=!0;break e}b=b.return}if(rt===null)throw Error(s(160));u_(d,_,h),rt=null,dn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)f_(i,t),i=i.sibling}var Jn=null;function f_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(i,t),pn(t),l&4&&(jr(3,t,t.return),hl(3,t),jr(5,t,t.return));break;case 1:mn(i,t),pn(t),l&512&&(wt||a===null||mi(a,a.return)),l&64&&Hi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Jn;if(mn(i,t),pn(t),l&512&&(wt||a===null||mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[xi]||d[lt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Ft(d,l,a),d[lt]=t,mt(d),l=d;break e;case"link":var _=fv("link","href",h).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(l),Ft(d,l,a),h.head.appendChild(d);break;case"meta":if(_=fv("meta","content",h).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(l),Ft(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[lt]=t,mt(d),l=d}t.stateNode=l}else dv(h,t.type,t.stateNode);else t.stateNode=hv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?dv(h,t.type,t.stateNode):hv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gd(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(i,t),pn(t),l&512&&(wt||a===null||mi(a,a.return)),a!==null&&l&4&&gd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,t),pn(t),l&512&&(wt||a===null||mi(a,a.return)),t.flags&32){h=t.stateNode;try{Vn(h,"")}catch(ce){Qe(t,t.return,ce)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,gd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(vd=!0);break;case 6:if(mn(i,t),pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ce){Qe(t,t.return,ce)}}break;case 3:if(Cc=null,h=Jn,Jn=Rc(i.containerInfo),mn(i,t),Jn=h,pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{eo(i.containerInfo)}catch(ce){Qe(t,t.return,ce)}vd&&(vd=!1,d_(t));break;case 4:l=Jn,Jn=Rc(t.stateNode.containerInfo),mn(i,t),pn(t),Jn=l;break;case 12:mn(i,t),pn(t);break;case 31:mn(i,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fc(t,l)));break;case 13:mn(i,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(mc=jt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fc(t,l)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,B=Hi,K=wt;if(Hi=B||h,wt=K||I,mn(i,t),wt=K,Hi=B,pn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||Hi||wt||Gs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=I.stateNode;var J=I.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ce){Qe(I,I.return,ce)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(ce){Qe(I,I.return,ce)}}}else if(i.tag===18){if(a===null){I=i;try{var H=I.stateNode;h?nv(H,!0):nv(I.stateNode,!1)}catch(ce){Qe(I,I.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,fc(t,a))));break;case 19:mn(i,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fc(t,l)));break;case 30:break;case 21:break;default:mn(i,t),pn(t)}}function pn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(r_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=yd(t);hc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(Vn(_,""),a.flags&=-33);var b=yd(t);hc(t,b,_);break;case 3:case 4:var I=a.stateNode.containerInfo,B=yd(t);_d(t,B,I);break;default:throw Error(s(161))}}catch(K){Qe(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function d_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;d_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Gi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)o_(t,i.alternate,i),i=i.sibling}function Gs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:jr(4,i,i.return),Gs(i);break;case 1:mi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&n_(i,i.return,a),Gs(i);break;case 27:Tl(i.stateNode);case 26:case 5:mi(i,i.return),Gs(i);break;case 22:i.memoizedState===null&&Gs(i);break;case 30:Gs(i);break;default:Gs(i)}t=t.sibling}}function Ki(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Ki(h,d,a),hl(4,d);break;case 1:if(Ki(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Qe(l,l.return,B)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)Fg(I[h],b)}catch(B){Qe(l,l.return,B)}}a&&_&64&&t_(d),fl(d,d.return);break;case 27:s_(d);case 26:case 5:Ki(h,d,a),a&&l===null&&_&4&&i_(d),fl(d,d.return);break;case 12:Ki(h,d,a);break;case 31:Ki(h,d,a),a&&_&4&&c_(h,d);break;case 13:Ki(h,d,a),a&&_&4&&h_(h,d);break;case 22:d.memoizedState===null&&Ki(h,d,a),fl(d,d.return);break;case 30:break;default:Ki(h,d,a)}i=i.sibling}}function Ed(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Zo(a))}function Td(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Zo(t))}function Zn(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)m_(t,i,a,l),i=i.sibling}function m_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Zn(t,i,a,l),h&2048&&hl(9,i);break;case 1:Zn(t,i,a,l);break;case 3:Zn(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Zo(t)));break;case 12:if(h&2048){Zn(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){Qe(i,i.return,I)}}else Zn(t,i,a,l);break;case 31:Zn(t,i,a,l);break;case 13:Zn(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?Zn(t,i,a,l):dl(t,i):d._visibility&2?Zn(t,i,a,l):(d._visibility|=2,Ha(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Ed(_,i);break;case 24:Zn(t,i,a,l),h&2048&&Td(i.alternate,i);break;default:Zn(t,i,a,l)}}function Ha(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,b=a,I=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:Ha(d,_,b,I,h),hl(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?Ha(d,_,b,I,h):dl(d,_):(K._visibility|=2,Ha(d,_,b,I,h)),h&&B&2048&&Ed(_.alternate,_);break;case 24:Ha(d,_,b,I,h),h&&B&2048&&Td(_.alternate,_);break;default:Ha(d,_,b,I,h)}i=i.sibling}}function dl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:dl(a,l),h&2048&&Ed(l.alternate,l);break;case 24:dl(a,l),h&2048&&Td(l.alternate,l);break;default:dl(a,l)}i=i.sibling}}var ml=8192;function Fa(t,i,a){if(t.subtreeFlags&ml)for(t=t.child;t!==null;)p_(t,i,a),t=t.sibling}function p_(t,i,a){switch(t.tag){case 26:Fa(t,i,a),t.flags&ml&&t.memoizedState!==null&&wA(a,Jn,t.memoizedState,t.memoizedProps);break;case 5:Fa(t,i,a);break;case 3:case 4:var l=Jn;Jn=Rc(t.stateNode.containerInfo),Fa(t,i,a),Jn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ml,ml=16777216,Fa(t,i,a),ml=l):Fa(t,i,a));break;default:Fa(t,i,a)}}function g_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function pl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,__(l,t)}g_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)y_(t),t=t.sibling}function y_(t){switch(t.tag){case 0:case 11:case 15:pl(t),t.flags&2048&&jr(9,t,t.return);break;case 3:pl(t);break;case 12:pl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,dc(t)):pl(t);break;default:pl(t)}}function dc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,__(l,t)}g_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:jr(8,i,i.return),dc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,dc(i));break;default:dc(i)}t=t.sibling}}function __(t,i){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:jr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,kt=l;else e:for(a=t;kt!==null;){l=kt;var h=l.sibling,d=l.return;if(l_(l),l===a){kt=null;break e}if(h!==null){h.return=d,kt=h;break e}kt=d}}}var jw={getCacheForType:function(t){var i=qt(Et),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return qt(Et).controller.signal}},Pw=typeof WeakMap=="function"?WeakMap:Map,He=0,We=null,Ie=null,De=0,Ke=0,xn=null,Pr=!1,Ga=!1,bd=!1,Qi=0,ht=0,zr=0,Ks=0,wd=0,Cn=0,Ka=0,gl=null,gn=null,Ad=!1,mc=0,v_=0,pc=1/0,gc=null,Br=null,Ct=0,qr=null,Qa=null,$i=0,Sd=0,Rd=null,E_=null,yl=0,xd=null;function In(){return(He&2)!==0&&De!==0?De&-De:Q.T!==null?Md():Ri()}function T_(){if(Cn===0)if((De&536870912)===0||Ve){var t=ri;ri<<=1,(ri&3932160)===0&&(ri=262144),Cn=t}else Cn=536870912;return t=Sn.current,t!==null&&(t.flags|=32),Cn}function yn(t,i,a){(t===We&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)&&($a(t,0),Hr(t,De,Cn,!1)),fr(t,a),((He&2)===0||t!==We)&&(t===We&&((He&2)===0&&(Ks|=a),ht===4&&Hr(t,De,Cn,!1)),pi(t))}function b_(t,i,a){if((He&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||hr(t,i),h=l?qw(t,i):Id(t,i,!0),d=l;do{if(h===0){Ga&&!l&&Hr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!zw(a)){h=Id(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;h=gl;var I=b.current.memoizedState.isDehydrated;if(I&&($a(b,_).flags|=256),_=Id(b,_,!1),_!==2){if(bd&&!I){b.errorRecoveryDisabledLanes|=d,Ks|=d,h=4;break e}d=gn,gn=h,d!==null&&(gn===null?gn=d:gn.push.apply(gn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){$a(t,0),Hr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Hr(l,i,Cn,!Pr);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=mc+300-jt(),10<h)){if(Hr(l,i,Cn,!Pr),Mn(l,0,!0)!==0)break e;$i=i,l.timeoutHandle=W_(w_.bind(null,l,a,gn,gc,Ad,i,Cn,Ks,Ka,Pr,d,"Throttled",-0,0),h);break e}w_(l,a,gn,gc,Ad,i,Cn,Ks,Ka,Pr,d,null,-0,0)}}break}while(!0);pi(t)}function w_(t,i,a,l,h,d,_,b,I,B,K,J,q,H){if(t.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt},p_(i,d,J);var ce=(d&62914560)===d?mc-jt():(d&4194048)===d?v_-jt():0;if(ce=AA(J,ce),ce!==null){$i=d,t.cancelPendingCommit=ce(D_.bind(null,t,i,d,a,l,h,_,b,I,K,J,null,q,H)),Hr(t,d,_,!B);return}}D_(t,i,d,a,l,h,_,b,I)}function zw(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!wn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Hr(t,i,a,l){i&=~wd,i&=~Ks,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-rn(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&Do(t,a,i)}function yc(){return(He&6)===0?(_l(0),!1):!0}function Cd(){if(Ie!==null){if(Ke===0)var t=Ie.return;else t=Ie,Li=Ls=null,Ff(t),ja=null,el=0,t=Ie;for(;t!==null;)e_(t.alternate,t),t=t.return;Ie=null}}function $a(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,aA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),$i=0,Cd(),We=t,Ie=a=Vi(t.current,null),De=i,Ke=0,xn=null,Pr=!1,Ga=hr(t,i),bd=!1,Ka=Cn=wd=Ks=zr=ht=0,gn=gl=null,Ad=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-rn(l),d=1<<h;i|=t[h],l&=~d}return Qi=i,ju(),a}function A_(t,i){Se=null,Q.H=ll,i===La||i===Ku?(i=zg(),Ke=3):i===Of?(i=zg(),Ke=4):Ke=i===ad?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,xn=i,Ie===null&&(ht=1,ac(t,Ln(i,t.current)))}function S_(){var t=Sn.current;return t===null?!0:(De&4194048)===De?Bn===null:(De&62914560)===De||(De&536870912)!==0?t===Bn:!1}function R_(){var t=Q.H;return Q.H=ll,t===null?ll:t}function x_(){var t=Q.A;return Q.A=jw,t}function _c(){ht=4,Pr||(De&4194048)!==De&&Sn.current!==null||(Ga=!0),(zr&134217727)===0&&(Ks&134217727)===0||We===null||Hr(We,De,Cn,!1)}function Id(t,i,a){var l=He;He|=2;var h=R_(),d=x_();(We!==t||De!==i)&&(gc=null,$a(t,i)),i=!1;var _=ht;e:do try{if(Ke!==0&&Ie!==null){var b=Ie,I=xn;switch(Ke){case 8:Cd(),_=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(i=!0);var B=Ke;if(Ke=0,xn=null,Ya(t,b,I,B),a&&Ga){_=0;break e}break;default:B=Ke,Ke=0,xn=null,Ya(t,b,I,B)}}Bw(),_=ht;break}catch(K){A_(t,K)}while(!0);return i&&t.shellSuspendCounter++,Li=Ls=null,He=l,Q.H=h,Q.A=d,Ie===null&&(We=null,De=0,ju()),_}function Bw(){for(;Ie!==null;)C_(Ie)}function qw(t,i){var a=He;He|=2;var l=R_(),h=x_();We!==t||De!==i?(gc=null,pc=jt()+500,$a(t,i)):Ga=hr(t,i);e:do try{if(Ke!==0&&Ie!==null){i=Ie;var d=xn;t:switch(Ke){case 1:Ke=0,xn=null,Ya(t,i,d,1);break;case 2:case 9:if(jg(d)){Ke=0,xn=null,I_(i);break}i=function(){Ke!==2&&Ke!==9||We!==t||(Ke=7),pi(t)},d.then(i,i);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:jg(d)?(Ke=0,xn=null,I_(i)):(Ke=0,xn=null,Ya(t,i,d,7));break;case 5:var _=null;switch(Ie.tag){case 26:_=Ie.memoizedState;case 5:case 27:var b=Ie;if(_?mv(_):b.stateNode.complete){Ke=0,xn=null;var I=b.sibling;if(I!==null)Ie=I;else{var B=b.return;B!==null?(Ie=B,vc(B)):Ie=null}break t}}Ke=0,xn=null,Ya(t,i,d,5);break;case 6:Ke=0,xn=null,Ya(t,i,d,6);break;case 8:Cd(),ht=6;break e;default:throw Error(s(462))}}Hw();break}catch(K){A_(t,K)}while(!0);return Li=Ls=null,Q.H=l,Q.A=h,He=a,Ie!==null?0:(We=null,De=0,ju(),ht)}function Hw(){for(;Ie!==null&&!ef();)C_(Ie)}function C_(t){var i=Zy(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,i===null?vc(t):Ie=i}function I_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Ky(a,i,i.pendingProps,i.type,void 0,De);break;case 11:i=Ky(a,i,i.pendingProps,i.type.render,i.ref,De);break;case 5:Ff(i);default:e_(a,i),i=Ie=xg(i,Qi),i=Zy(a,i,Qi)}t.memoizedProps=t.pendingProps,i===null?vc(t):Ie=i}function Ya(t,i,a,l){Li=Ls=null,Ff(i),ja=null,el=0;var h=i.return;try{if(Dw(t,h,i,a,De)){ht=1,ac(t,Ln(a,t.current)),Ie=null;return}}catch(d){if(h!==null)throw Ie=h,d;ht=1,ac(t,Ln(a,t.current)),Ie=null;return}i.flags&32768?(Ve||l===1?t=!0:Ga||(De&536870912)!==0?t=!1:(Pr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Sn.current,l!==null&&l.tag===13&&(l.flags|=16384))),N_(i,t)):vc(i)}function vc(t){var i=t;do{if((i.flags&32768)!==0){N_(i,Pr);return}t=i.return;var a=kw(i.alternate,i,Qi);if(a!==null){Ie=a;return}if(i=i.sibling,i!==null){Ie=i;return}Ie=i=t}while(i!==null);ht===0&&(ht=5)}function N_(t,i){do{var a=Vw(t.alternate,t);if(a!==null){a.flags&=32767,Ie=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ie=t;return}Ie=t=a}while(t!==null);ht=6,Ie=null}function D_(t,i,a,l,h,d,_,b,I){t.cancelPendingCommit=null;do Ec();while(Ct!==0);if((He&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=yf,Pt(t,a,d,_,b,I),t===We&&(Ie=We=null,De=0),Qa=i,qr=t,$i=a,Sd=d,Rd=h,E_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Qw(Ai,function(){return U_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=ae.p,ae.p=2,_=He,He|=4;try{Uw(t,i,a)}finally{He=_,ae.p=h,Q.T=l}}Ct=1,O_(),M_(),k_()}}function O_(){if(Ct===1){Ct=0;var t=qr,i=Qa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var h=He;He|=4;try{f_(i,t);var d=Bd,_=_g(t.containerInfo),b=d.focusedElem,I=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&yg(b.ownerDocument.documentElement,b)){if(I!==null&&ff(b)){var B=I.start,K=I.end;if(K===void 0&&(K=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(K,b.value.length);else{var J=b.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var H=q.getSelection(),ce=b.textContent.length,_e=Math.min(I.start,ce),Ze=I.end===void 0?_e:Math.min(I.end,ce);!H.extend&&_e>Ze&&(_=Ze,Ze=_e,_e=_);var V=gg(b,_e),D=gg(b,Ze);if(V&&D&&(H.rangeCount!==1||H.anchorNode!==V.node||H.anchorOffset!==V.offset||H.focusNode!==D.node||H.focusOffset!==D.offset)){var P=J.createRange();P.setStart(V.node,V.offset),H.removeAllRanges(),_e>Ze?(H.addRange(P),H.extend(D.node,D.offset)):(P.setEnd(D.node,D.offset),H.addRange(P))}}}}for(J=[],H=b;H=H.parentNode;)H.nodeType===1&&J.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var Y=J[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Oc=!!zd,Bd=zd=null}finally{He=h,ae.p=l,Q.T=a}}t.current=i,Ct=2}}function M_(){if(Ct===2){Ct=0;var t=qr,i=Qa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var h=He;He|=4;try{o_(t,i.alternate,i)}finally{He=h,ae.p=l,Q.T=a}}Ct=3}}function k_(){if(Ct===4||Ct===3){Ct=0,xo();var t=qr,i=Qa,a=$i,l=E_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ct=5:(Ct=0,Qa=qr=null,V_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Br=null),Mo(a),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ur,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,h=ae.p,ae.p=2,Q.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{Q.T=i,ae.p=h}}($i&3)!==0&&Ec(),pi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===xd?yl++:(yl=0,xd=t):yl=0,_l(0)}}function V_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Zo(i)))}function Ec(){return O_(),M_(),k_(),U_()}function U_(){if(Ct!==5)return!1;var t=qr,i=Sd;Sd=0;var a=Mo($i),l=Q.T,h=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Rd,Rd=null;var d=qr,_=$i;if(Ct=0,Qa=qr=null,$i=0,(He&6)!==0)throw Error(s(331));var b=He;if(He|=4,y_(d.current),m_(d,d.current,_,a),He=b,_l(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ur,d)}catch{}return!0}finally{ae.p=h,Q.T=l,V_(t,i)}}function L_(t,i,a){i=Ln(a,i),i=sd(t.stateNode,i,2),t=Vr(t,i,2),t!==null&&(fr(t,2),pi(t))}function Qe(t,i,a){if(t.tag===3)L_(t,t,a);else for(;i!==null;){if(i.tag===3){L_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Br===null||!Br.has(l))){t=Ln(a,t),a=jy(2),l=Vr(i,a,2),l!==null&&(Py(a,l,i,t),fr(l,2),pi(l));break}}i=i.return}}function Nd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Pw;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(bd=!0,h.add(a),t=Fw.bind(null,t,i,a),i.then(t,t))}function Fw(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,We===t&&(De&a)===a&&(ht===4||ht===3&&(De&62914560)===De&&300>jt()-mc?(He&2)===0&&$a(t,0):wd|=a,Ka===De&&(Ka=0)),pi(t)}function j_(t,i){i===0&&(i=No()),t=ks(t,i),t!==null&&(fr(t,i),pi(t))}function Gw(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),j_(t,a)}function Kw(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),j_(t,a)}function Qw(t,i){return vs(t,i)}var Tc=null,Xa=null,Dd=!1,bc=!1,Od=!1,Fr=0;function pi(t){t!==Xa&&t.next===null&&(Xa===null?Tc=Xa=t:Xa=Xa.next=t),bc=!0,Dd||(Dd=!0,Yw())}function _l(t,i){if(!Od&&bc){Od=!0;do for(var a=!1,l=Tc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-rn(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,q_(l,d))}else d=De,d=Mn(l,l===We?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||hr(l,d)||(a=!0,q_(l,d));l=l.next}while(a);Od=!1}}function $w(){P_()}function P_(){bc=Dd=!1;var t=0;Fr!==0&&sA()&&(t=Fr);for(var i=jt(),a=null,l=Tc;l!==null;){var h=l.next,d=z_(l,i);d===0?(l.next=null,a===null?Tc=h:a.next=h,h===null&&(Xa=a)):(a=l,(t!==0||(d&3)!==0)&&(bc=!0)),l=h}Ct!==0&&Ct!==5||_l(t),Fr!==0&&(Fr=0)}function z_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-rn(d),b=1<<_,I=h[_];I===-1?((b&a)===0||(b&l)!==0)&&(h[_]=ga(b,i)):I<=i&&(t.expiredLanes|=b),d&=~b}if(i=We,a=De,a=Mn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&pa(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||hr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&pa(l),Mo(a)){case 2:case 8:a=Nt;break;case 32:a=Ai;break;case 268435456:a=Co;break;default:a=Ai}return l=B_.bind(null,t),a=vs(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&pa(l),t.callbackPriority=2,t.callbackNode=null,2}function B_(t,i){if(Ct!==0&&Ct!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ec()&&t.callbackNode!==a)return null;var l=De;return l=Mn(t,t===We?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(b_(t,l,i),z_(t,jt()),t.callbackNode!=null&&t.callbackNode===a?B_.bind(null,t):null)}function q_(t,i){if(Ec())return null;b_(t,i,!0)}function Yw(){oA(function(){(He&6)!==0?vs(xt,$w):P_()})}function Md(){if(Fr===0){var t=Va;t===0&&(t=Ts,Ts<<=1,(Ts&261888)===0&&(Ts=256)),Fr=t}return Fr}function H_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ui(""+t)}function F_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Xw(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=H_((h[zt]||null).action),_=l.submitter;_&&(i=(i=_[zt]||null)?H_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new xs("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Fr!==0){var I=_?F_(h,_):new FormData(h);Wf(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(b.preventDefault(),I=_?F_(h,_):new FormData(h),Wf(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var kd=0;kd<gf.length;kd++){var Vd=gf[kd],Jw=Vd.toLowerCase(),Zw=Vd[0].toUpperCase()+Vd.slice(1);Xn(Jw,"on"+Zw)}Xn(Tg,"onAnimationEnd"),Xn(bg,"onAnimationIteration"),Xn(wg,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(mw,"onTransitionRun"),Xn(pw,"onTransitionStart"),Xn(gw,"onTransitionCancel"),Xn(Ag,"onTransitionEnd"),li("onMouseEnter",["mouseout","mouseover"]),li("onMouseLeave",["mouseout","mouseover"]),li("onPointerEnter",["pointerout","pointerover"]),li("onPointerLeave",["pointerout","pointerover"]),sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ww=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function G_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],I=b.instance,B=b.currentTarget;if(b=b.listener,I!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(K){Lu(K)}h.currentTarget=null,d=I}else for(_=0;_<l.length;_++){if(b=l[_],I=b.instance,B=b.currentTarget,b=b.listener,I!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(K){Lu(K)}h.currentTarget=null,d=I}}}}function Ne(t,i){var a=i[pr];a===void 0&&(a=i[pr]=new Set);var l=t+"__bubble";a.has(l)||(K_(i,t,2,!1),a.add(l))}function Ud(t,i,a){var l=0;i&&(l|=4),K_(a,t,l,i)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Ld(t){if(!t[wc]){t[wc]=!0,ya.forEach(function(a){a!=="selectionchange"&&(Ww.has(a)||Ud(a,!1,t),Ud(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[wc]||(i[wc]=!0,Ud("selectionchange",!1,i))}}function K_(t,i,a,l){switch(Tv(i)){case 2:var h=xA;break;case 8:h=CA;break;default:h=Zd}a=h.bind(null,i,a,t),h=void 0,!Bo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function jd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=l.return;_!==null;){var I=_.tag;if((I===3||I===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=Ci(b),_===null)return;if(I=_.tag,I===5||I===6||I===26||I===27){l=d=_;continue e}b=b.parentNode}}l=l.return}Tu(function(){var B=d,K=ba(a),J=[];e:{var q=Sg.get(t);if(q!==void 0){var H=xs,ce=t;switch(t){case"keypress":if(Rs(a)===0)break e;case"keydown":case"keyup":H=Nu;break;case"focusin":ce="focus",H=Sr;break;case"focusout":ce="blur",H=Sr;break;case"beforeblur":case"afterblur":H=Sr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Ou;break;case Tg:case bg:case wg:H=Sa;break;case Ag:H=Ra;break;case"scroll":case"scrollend":H=bu;break;case"wheel":H=ku;break;case"copy":case"cut":case"paste":H=Ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Ko;break;case"toggle":case"beforetoggle":H=xr}var _e=(i&4)!==0,Ze=!_e&&(t==="scroll"||t==="scrollend"),V=_e?q!==null?q+"Capture":null:q;_e=[];for(var D=B,P;D!==null;){var Y=D;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||V===null||(Y=hn(D,V),Y!=null&&_e.push(El(D,Y,P))),Ze)break;D=D.return}0<_e.length&&(q=new H(q,ce,null,a,K),J.push({event:q,listeners:_e}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Ta&&(ce=a.relatedTarget||a.fromElement)&&(Ci(ce)||ce[ai]))break e;if((H||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ce=a.relatedTarget||a.toElement,H=B,ce=ce?Ci(ce):null,ce!==null&&(Ze=u(ce),_e=ce.tag,ce!==Ze||_e!==5&&_e!==27&&_e!==6)&&(ce=null)):(H=null,ce=B),H!==ce)){if(_e=wu,Y="onMouseLeave",V="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(_e=Ko,Y="onPointerLeave",V="onPointerEnter",D="pointer"),Ze=H==null?q:ws(H),P=ce==null?q:ws(ce),q=new _e(Y,D+"leave",H,a,K),q.target=Ze,q.relatedTarget=P,Y=null,Ci(K)===B&&(_e=new _e(V,D+"enter",ce,a,K),_e.target=P,_e.relatedTarget=Ze,Y=_e),Ze=Y,H&&ce)t:{for(_e=eA,V=H,D=ce,P=0,Y=V;Y;Y=_e(Y))P++;Y=0;for(var pe=D;pe;pe=_e(pe))Y++;for(;0<P-Y;)V=_e(V),P--;for(;0<Y-P;)D=_e(D),Y--;for(;P--;){if(V===D||D!==null&&V===D.alternate){_e=V;break t}V=_e(V),D=_e(D)}_e=null}else _e=null;H!==null&&Q_(J,q,H,_e,!1),ce!==null&&Ze!==null&&Q_(J,Ze,ce,_e,!0)}}e:{if(q=B?ws(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var ze=cg;else if(fn(q))if(hg)ze=hw;else{ze=uw;var me=lw}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Po(B.elementType)&&(ze=cg):ze=cw;if(ze&&(ze=ze(t,B))){Ds(J,ze,a,K);break e}me&&me(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Ea(q,"number",q.value)}switch(me=B?ws(B):window,t){case"focusin":(fn(me)||me.contentEditable==="true")&&(xa=me,df=B,Yo=null);break;case"focusout":Yo=df=xa=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,vg(J,a,K);break;case"selectionchange":if(dw)break;case"keydown":case"keyup":vg(J,a,K)}var Re;if(p)e:{switch(t){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ce?Ge(t,a)&&(Oe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(j&&a.locale!=="ko"&&(Ce||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ce&&(Re=Tr()):(bn=K,wa="value"in bn?bn.value:bn.textContent,Ce=!0)),me=Ac(B,Oe),0<me.length&&(Oe=new Ho(Oe,t,null,a,K),J.push({event:Oe,listeners:me}),Re?Oe.data=Re:(Re=vt(a),Re!==null&&(Oe.data=Re)))),(Re=w?Ot(t,a):Mt(t,a))&&(Oe=Ac(B,"onBeforeInput"),0<Oe.length&&(me=new Ho("onBeforeInput","beforeinput",null,a,K),J.push({event:me,listeners:Oe}),me.data=Re)),Xw(J,t,B,a,K)}G_(J,i)})}function El(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Ac(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=hn(t,a),h!=null&&l.unshift(El(t,h,d)),h=hn(t,i),h!=null&&l.push(El(t,h,d))),t.tag===3)return l;t=t.return}return[]}function eA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Q_(t,i,a,l,h){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,I=b.alternate,B=b.stateNode;if(b=b.tag,I!==null&&I===l)break;b!==5&&b!==26&&b!==27||B===null||(I=B,h?(B=hn(a,d),B!=null&&_.unshift(El(a,B,I))):h||(B=hn(a,d),B!=null&&_.push(El(a,B,I)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var tA=/\r\n?/g,nA=/\u0000|\uFFFD/g;function $_(t){return(typeof t=="string"?t:""+t).replace(tA,`
`).replace(nA,"")}function Y_(t,i){return i=$_(i),$_(t)===i}function Je(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Vn(t,""+l);break;case"className":_r(t,"class",l);break;case"tabIndex":_r(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(t,a,l);break;case"style":vu(t,l,d);break;case"data":if(i!=="object"){_r(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ui(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Je(t,i,"name",h.name,h,null),Je(t,i,"formEncType",h.formEncType,h,null),Je(t,i,"formMethod",h.formMethod,h,null),Je(t,i,"formTarget",h.formTarget,h,null)):(Je(t,i,"encType",h.encType,h,null),Je(t,i,"method",h.method,h,null),Je(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ui(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Dt);break;case"onScroll":l!=null&&Ne("scroll",t);break;case"onScrollEnd":l!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ui(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),yr(t,"popover",l);break;case"xlinkActuate":kn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":kn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":kn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":kn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":kn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":kn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":kn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":kn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":kn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=of.get(a)||a,yr(t,a,l))}}function Pd(t,i,a,l,h,d){switch(a){case"style":vu(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&Vn(t,""+l);break;case"onScroll":l!=null&&Ne("scroll",t);break;case"onScrollEnd":l!=null&&Ne("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[zt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):yr(t,a,l)}}}function Ft(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(t,i,d,_,a,null)}}h&&Je(t,i,"srcSet",a.srcSet,a,null),l&&Je(t,i,"src",a.src,a,null);return;case"input":Ne("invalid",t);var b=d=_=h=null,I=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":_=K;break;case"checked":I=K;break;case"defaultChecked":B=K;break;case"value":d=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:Je(t,i,l,K,a,null)}}As(t,d,b,I,B,_,h,!1);return;case"select":Ne("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:Je(t,i,h,b,a,null)}i=d,a=_,t.multiple=!!l,i!=null?Pe(t,!!l,i,!1):a!=null&&Pe(t,!!l,a,!0);return;case"textarea":Ne("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:Je(t,i,_,b,a,null)}Er(t,l,h,d);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(t,i,I,l,a,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(l=0;l<vl.length;l++)Ne(vl[l],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(t,i,B,l,a,null)}return;default:if(Po(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&Pd(t,i,K,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&Je(t,i,b,l,a,null))}function iA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,I=null,B=null,K=null;for(H in a){var J=a[H];if(a.hasOwnProperty(H)&&J!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":I=J;default:l.hasOwnProperty(H)||Je(t,i,H,null,l,J)}}for(var q in l){var H=l[q];if(J=a[q],l.hasOwnProperty(q)&&(H!=null||J!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":K=H;break;case"value":_=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==J&&Je(t,i,q,H,l,J)}}vr(t,_,b,I,B,K,d,h);return;case"select":H=_=b=q=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":H=I;default:l.hasOwnProperty(d)||Je(t,i,d,null,l,I)}for(h in l)if(d=l[h],I=a[h],l.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==I&&Je(t,i,h,d,l,I)}i=b,a=_,l=H,q!=null?Pe(t,!!a,q,!1):!!l!=!!a&&(i!=null?Pe(t,!!a,i,!0):Pe(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Je(t,i,b,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Je(t,i,_,h,l,d)}Ss(t,q,H);return;case"option":for(var ce in a)if(q=a[ce],a.hasOwnProperty(ce)&&q!=null&&!l.hasOwnProperty(ce))switch(ce){case"selected":t.selected=!1;break;default:Je(t,i,ce,null,l,q)}for(I in l)if(q=l[I],H=a[I],l.hasOwnProperty(I)&&q!==H&&(q!=null||H!=null))switch(I){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Je(t,i,I,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)q=a[_e],a.hasOwnProperty(_e)&&q!=null&&!l.hasOwnProperty(_e)&&Je(t,i,_e,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:Je(t,i,B,q,l,H)}return;default:if(Po(i)){for(var Ze in a)q=a[Ze],a.hasOwnProperty(Ze)&&q!==void 0&&!l.hasOwnProperty(Ze)&&Pd(t,i,Ze,void 0,l,q);for(K in l)q=l[K],H=a[K],!l.hasOwnProperty(K)||q===H||q===void 0&&H===void 0||Pd(t,i,K,q,l,H);return}}for(var V in a)q=a[V],a.hasOwnProperty(V)&&q!=null&&!l.hasOwnProperty(V)&&Je(t,i,V,null,l,q);for(J in l)q=l[J],H=a[J],!l.hasOwnProperty(J)||q===H||q==null&&H==null||Je(t,i,J,q,l,H)}function X_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&X_(_)){for(_=0,b=h.responseEnd,l+=1;l<a.length;l++){var I=a[l],B=I.startTime;if(B>b)break;var K=I.transferSize,J=I.initiatorType;K&&X_(J)&&(I=I.responseEnd,_+=K*(I<b?1:(b-B)/(I-B)))}if(--l,i+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var zd=null,Bd=null;function Sc(t){return t.nodeType===9?t:t.ownerDocument}function J_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function qd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hd=null;function sA(){var t=window.event;return t&&t.type==="popstate"?t===Hd?!1:(Hd=t,!0):(Hd=null,!1)}var W_=typeof setTimeout=="function"?setTimeout:void 0,aA=typeof clearTimeout=="function"?clearTimeout:void 0,ev=typeof Promise=="function"?Promise:void 0,oA=typeof queueMicrotask=="function"?queueMicrotask:typeof ev<"u"?function(t){return ev.resolve(null).then(t).catch(lA)}:W_;function lA(t){setTimeout(function(){throw t})}function Gr(t){return t==="head"}function tv(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),eo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Tl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Tl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[xi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Tl(t.ownerDocument.body);a=h}while(a);eo(i)}function nv(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Fd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Fd(a),bs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function uA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[xi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=qn(t.nextSibling),t===null)break}return null}function cA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=qn(t.nextSibling),t===null))return null;return t}function iv(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=qn(t.nextSibling),t===null))return null;return t}function Gd(t){return t.data==="$?"||t.data==="$~"}function Kd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function hA(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function qn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Qd=null;function rv(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return qn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function sv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function av(t,i,a){switch(i=Sc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Tl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);bs(t)}var Hn=new Map,ov=new Set;function Rc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Yi=ae.d;ae.d={f:fA,r:dA,D:mA,C:pA,L:gA,m:yA,X:vA,S:_A,M:EA};function fA(){var t=Yi.f(),i=yc();return t||i}function dA(t){var i=Ii(t);i!==null&&i.tag===5&&i.type==="form"?Ay(i):Yi.r(t)}var Ja=typeof document>"u"?null:document;function lv(t,i,a){var l=Ja;if(l&&typeof i=="string"&&i){var h=ut(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),ov.has(h)||(ov.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Ft(i,"link",t),mt(i),l.head.appendChild(i)))}}function mA(t){Yi.D(t),lv("dns-prefetch",t,null)}function pA(t,i){Yi.C(t,i),lv("preconnect",t,i)}function gA(t,i,a){Yi.L(t,i,a);var l=Ja;if(l&&t&&i){var h='link[rel="preload"][as="'+ut(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ut(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ut(a.imageSizes)+'"]')):h+='[href="'+ut(t)+'"]';var d=h;switch(i){case"style":d=Za(t);break;case"script":d=Wa(t)}Hn.has(d)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Hn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(bl(d))||i==="script"&&l.querySelector(wl(d))||(i=l.createElement("link"),Ft(i,"link",t),mt(i),l.head.appendChild(i)))}}function yA(t,i){Yi.m(t,i);var a=Ja;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ut(l)+'"][href="'+ut(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Wa(t)}if(!Hn.has(d)&&(t=A({rel:"modulepreload",href:t},i),Hn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(wl(d)))return}l=a.createElement("link"),Ft(l,"link",t),mt(l),a.head.appendChild(l)}}}function _A(t,i,a){Yi.S(t,i,a);var l=Ja;if(l&&t){var h=$n(l).hoistableStyles,d=Za(t);i=i||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(bl(d)))b.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Hn.get(d))&&$d(t,a);var I=_=l.createElement("link");mt(I),Ft(I,"link",t),I._p=new Promise(function(B,K){I.onload=B,I.onerror=K}),I.addEventListener("load",function(){b.loading|=1}),I.addEventListener("error",function(){b.loading|=2}),b.loading|=4,xc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function vA(t,i){Yi.X(t,i);var a=Ja;if(a&&t){var l=$n(a).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=a.querySelector(wl(h)),d||(t=A({src:t,async:!0},i),(i=Hn.get(h))&&Yd(t,i),d=a.createElement("script"),mt(d),Ft(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function EA(t,i){Yi.M(t,i);var a=Ja;if(a&&t){var l=$n(a).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=a.querySelector(wl(h)),d||(t=A({src:t,async:!0,type:"module"},i),(i=Hn.get(h))&&Yd(t,i),d=a.createElement("script"),mt(d),Ft(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function uv(t,i,a,l){var h=(h=xe.current)?Rc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Za(a.href),a=$n(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Za(a.href);var d=$n(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(bl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Hn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(t,a),d||TA(h,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Wa(a),a=$n(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Za(t){return'href="'+ut(t)+'"'}function bl(t){return'link[rel="stylesheet"]['+t+"]"}function cv(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function TA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ft(i,"link",a),mt(i),t.head.appendChild(i))}function Wa(t){return'[src="'+ut(t)+'"]'}function wl(t){return"script[async]"+t}function hv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+ut(a.href)+'"]');if(l)return i.instance=l,mt(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),mt(l),Ft(l,"style",h),xc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Za(a.href);var d=t.querySelector(bl(h));if(d)return i.state.loading|=4,i.instance=d,mt(d),d;l=cv(a),(h=Hn.get(h))&&$d(l,h),d=(t.ownerDocument||t).createElement("link"),mt(d);var _=d;return _._p=new Promise(function(b,I){_.onload=b,_.onerror=I}),Ft(d,"link",l),i.state.loading|=4,xc(d,a.precedence,t),i.instance=d;case"script":return d=Wa(a.src),(h=t.querySelector(wl(d)))?(i.instance=h,mt(h),h):(l=a,(h=Hn.get(d))&&(l=A({},a),Yd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),mt(h),Ft(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,xc(l,a.precedence,t));return i.instance}function xc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function $d(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Yd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Cc=null;function fv(t,i,a){if(Cc===null){var l=new Map,h=Cc=new Map;h.set(a,l)}else h=Cc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[xi]||d[lt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function dv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function bA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function mv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function wA(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Za(l.href),d=i.querySelector(bl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ic.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,mt(d);return}d=i.ownerDocument||i,l=cv(l),(h=Hn.get(h))&&$d(l,h),d=d.createElement("link"),mt(d);var _=d;_._p=new Promise(function(b,I){_.onload=b,_.onerror=I}),Ft(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ic.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Xd=0;function AA(t,i){return t.stylesheets&&t.count===0&&Dc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Dc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Xd===0&&(Xd=62500*rA());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Dc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Xd?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Ic(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Nc=null;function Dc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Nc=new Map,i.forEach(SA,t),Nc=null,Ic.call(t))}function SA(t,i){if(!(i.state.loading&4)){var a=Nc.get(t);if(a)var l=a.get(null);else{a=new Map,Nc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Ic.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Al={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function RA(t,i,a,l,h,d,_,b,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function pv(t,i,a,l,h,d,_,b,I,B,K,J){return t=new RA(t,i,a,_,I,B,K,J,b),i=1,d===!0&&(i|=24),d=An(3,null,null,i),t.current=d,d.stateNode=t,i=If(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Mf(d),t}function gv(t){return t?(t=Na,t):Na}function yv(t,i,a,l,h,d){h=gv(h),l.context===null?l.context=h:l.pendingContext=h,l=kr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Vr(t,l,i),a!==null&&(yn(a,t,i),nl(a,t,i))}function _v(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Jd(t,i){_v(t,i),(t=t.alternate)&&_v(t,i)}function vv(t){if(t.tag===13||t.tag===31){var i=ks(t,67108864);i!==null&&yn(i,t,67108864),Jd(t,67108864)}}function Ev(t){if(t.tag===13||t.tag===31){var i=In();i=Oo(i);var a=ks(t,i);a!==null&&yn(a,t,i),Jd(t,i)}}var Oc=!0;function xA(t,i,a,l){var h=Q.T;Q.T=null;var d=ae.p;try{ae.p=2,Zd(t,i,a,l)}finally{ae.p=d,Q.T=h}}function CA(t,i,a,l){var h=Q.T;Q.T=null;var d=ae.p;try{ae.p=8,Zd(t,i,a,l)}finally{ae.p=d,Q.T=h}}function Zd(t,i,a,l){if(Oc){var h=Wd(l);if(h===null)jd(t,i,l,Mc,a),bv(t,l);else if(NA(h,t,i,a,l))l.stopPropagation();else if(bv(t,l),i&4&&-1<IA.indexOf(t)){for(;h!==null;){var d=Ii(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Qn(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var I=1<<31-rn(_);b.entanglements[1]|=I,_&=~I}pi(d),(He&6)===0&&(pc=jt()+500,_l(0))}}break;case 31:case 13:b=ks(d,2),b!==null&&yn(b,d,2),yc(),Jd(d,2)}if(d=Wd(l),d===null&&jd(t,i,l,Mc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else jd(t,i,l,null,a)}}function Wd(t){return t=ba(t),em(t)}var Mc=null;function em(t){if(Mc=null,t=Ci(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Mc=t,null}function Tv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fu()){case xt:return 2;case Nt:return 8;case Ai:case du:return 32;case Co:return 268435456;default:return 32}default:return 32}}var tm=!1,Kr=null,Qr=null,$r=null,Sl=new Map,Rl=new Map,Yr=[],IA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bv(t,i){switch(t){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":Sl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(i.pointerId)}}function xl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Ii(i),i!==null&&vv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function NA(t,i,a,l,h){switch(i){case"focusin":return Kr=xl(Kr,t,i,a,l,h),!0;case"dragenter":return Qr=xl(Qr,t,i,a,l,h),!0;case"mouseover":return $r=xl($r,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Sl.set(d,xl(Sl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Rl.set(d,xl(Rl.get(d)||null,t,i,a,l,h)),!0}return!1}function wv(t){var i=Ci(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,pu(t.priority,function(){Ev(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,pu(t.priority,function(){Ev(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Wd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ta=l,a.target.dispatchEvent(l),Ta=null}else return i=Ii(a),i!==null&&vv(i),t.blockedOn=a,!1;i.shift()}return!0}function Av(t,i,a){kc(t)&&a.delete(i)}function DA(){tm=!1,Kr!==null&&kc(Kr)&&(Kr=null),Qr!==null&&kc(Qr)&&(Qr=null),$r!==null&&kc($r)&&($r=null),Sl.forEach(Av),Rl.forEach(Av)}function Vc(t,i){t.blockedOn===i&&(t.blockedOn=null,tm||(tm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,DA)))}var Uc=null;function Sv(t){Uc!==t&&(Uc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Uc===t&&(Uc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(em(l||a)===null)continue;break}var d=Ii(a);d!==null&&(t.splice(i,3),i-=3,Wf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function eo(t){function i(I){return Vc(I,t)}Kr!==null&&Vc(Kr,t),Qr!==null&&Vc(Qr,t),$r!==null&&Vc($r,t),Sl.forEach(i),Rl.forEach(i);for(var a=0;a<Yr.length;a++){var l=Yr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Yr.length&&(a=Yr[0],a.blockedOn===null);)wv(a),a.blockedOn===null&&Yr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[zt]||null;if(typeof d=="function")_||Sv(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[zt]||null)b=_.formAction;else if(em(h)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Sv(a)}}}function Rv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function nm(t){this._internalRoot=t}Lc.prototype.render=nm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=In();yv(a,l,t,i,null,null)},Lc.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;yv(t.current,2,null,t,null,null),yc(),i[ai]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Ri();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Yr.length&&i!==0&&i<Yr[a].priority;a++);Yr.splice(a,0,t),a===0&&wv(t)}};var xv=e.version;if(xv!=="19.2.0")throw Error(s(527,xv,"19.2.0"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var OA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{ur=jc.inject(OA),Yt=jc}catch{}}return Il.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=ky,d=Vy,_=Uy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=pv(t,1,!1,null,null,a,l,null,h,d,_,Rv),t[ai]=i.current,Ld(t),new nm(i)},Il.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=ky,_=Vy,b=Uy,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),i=pv(t,1,!0,i,a??null,l,h,I,d,_,b,Rv),i.context=gv(null),a=i.current,l=In(),l=Oo(l),h=kr(l),h.callback=null,Vr(a,h,l),a=l,i.current.lanes=a,fr(i,a),pi(i),t[ai]=i.current,Ld(t),new Lc(i)},Il.version="19.2.0",Il}var Lv;function HA(){if(Lv)return rm.exports;Lv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=qA(),rm.exports}var FA=HA();const GA=kA(FA);var se=ip();let KA={data:""},QA=r=>{if(typeof window=="object"){let e=(r?r.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(r||document.head).appendChild(e),e.firstChild}return r||KA},$A=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,YA=/\/\*[^]*?\*\/|  +/g,jv=/\n+/g,Wr=(r,e)=>{let n="",s="",o="";for(let u in r){let f=r[u];u[0]=="@"?u[1]=="i"?n=u+" "+f+";":s+=u[1]=="f"?Wr(f,u):u+"{"+Wr(f,u[1]=="k"?"":e)+"}":typeof f=="object"?s+=Wr(f,e?e.replace(/([^,])+/g,m=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,m):m?m+" "+g:g)):u):f!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Wr.p?Wr.p(u,f):u+":"+f+";")}return n+(e&&o?e+"{"+o+"}":o)+s},Xi={},dE=r=>{if(typeof r=="object"){let e="";for(let n in r)e+=n+dE(r[n]);return e}return r},XA=(r,e,n,s,o)=>{let u=dE(r),f=Xi[u]||(Xi[u]=(g=>{let y=0,T=11;for(;y<g.length;)T=101*T+g.charCodeAt(y++)>>>0;return"go"+T})(u));if(!Xi[f]){let g=u!==r?r:(y=>{let T,A,R=[{}];for(;T=$A.exec(y.replace(YA,""));)T[4]?R.shift():T[3]?(A=T[3].replace(jv," ").trim(),R.unshift(R[0][A]=R[0][A]||{})):R[0][T[1]]=T[2].replace(jv," ").trim();return R[0]})(r);Xi[f]=Wr(o?{["@keyframes "+f]:g}:g,n?"":"."+f)}let m=n&&Xi.g?Xi.g:null;return n&&(Xi.g=Xi[f]),((g,y,T,A)=>{A?y.data=y.data.replace(A,g):y.data.indexOf(g)===-1&&(y.data=T?g+y.data:y.data+g)})(Xi[f],e,s,m),f},JA=(r,e,n)=>r.reduce((s,o,u)=>{let f=e[u];if(f&&f.call){let m=f(n),g=m&&m.props&&m.props.className||/^go/.test(m)&&m;f=g?"."+g:m&&typeof m=="object"?m.props?"":Wr(m,""):m===!1?"":m}return s+o+(f??"")},"");function Sh(r){let e=this||{},n=r.call?r(e.p):r;return XA(n.unshift?n.raw?JA(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,QA(e.target),e.g,e.o,e.k)}let mE,Am,Sm;Sh.bind({g:1});let ir=Sh.bind({k:1});function ZA(r,e,n,s){Wr.p=e,mE=r,Am=n,Sm=s}function ms(r,e){let n=this||{};return function(){let s=arguments;function o(u,f){let m=Object.assign({},u),g=m.className||o.className;n.p=Object.assign({theme:Am&&Am()},m),n.o=/ *go\d+/.test(g),m.className=Sh.apply(n,s)+(g?" "+g:"");let y=r;return r[0]&&(y=m.as||r,delete m.as),Sm&&y[0]&&Sm(m),mE(y,m)}return o}}var WA=r=>typeof r=="function",ah=(r,e)=>WA(r)?r(e):r,e1=(()=>{let r=0;return()=>(++r).toString()})(),pE=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),t1=20,rp="default",gE=(r,e)=>{let{toastLimit:n}=r.settings;switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,n)};case 1:return{...r,toasts:r.toasts.map(f=>f.id===e.toast.id?{...f,...e.toast}:f)};case 2:let{toast:s}=e;return gE(r,{type:r.toasts.find(f=>f.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...r,toasts:r.toasts.map(f=>f.id===o||o===void 0?{...f,dismissed:!0,visible:!1}:f)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(f=>f.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let u=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(f=>({...f,pauseDuration:f.pauseDuration+u}))}}},Xc=[],yE={toasts:[],pausedAt:void 0,settings:{toastLimit:t1}},gi={},_E=(r,e=rp)=>{gi[e]=gE(gi[e]||yE,r),Xc.forEach(([n,s])=>{n===e&&s(gi[e])})},vE=r=>Object.keys(gi).forEach(e=>_E(r,e)),n1=r=>Object.keys(gi).find(e=>gi[e].toasts.some(n=>n.id===r)),Rh=(r=rp)=>e=>{_E(e,r)},i1={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},r1=(r={},e=rp)=>{let[n,s]=se.useState(gi[e]||yE),o=se.useRef(gi[e]);se.useEffect(()=>(o.current!==gi[e]&&s(gi[e]),Xc.push([e,s]),()=>{let f=Xc.findIndex(([m])=>m===e);f>-1&&Xc.splice(f,1)}),[e]);let u=n.toasts.map(f=>{var m,g,y;return{...r,...r[f.type],...f,removeDelay:f.removeDelay||((m=r[f.type])==null?void 0:m.removeDelay)||(r==null?void 0:r.removeDelay),duration:f.duration||((g=r[f.type])==null?void 0:g.duration)||(r==null?void 0:r.duration)||i1[f.type],style:{...r.style,...(y=r[f.type])==null?void 0:y.style,...f.style}}});return{...n,toasts:u}},s1=(r,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...n,id:(n==null?void 0:n.id)||e1()}),$l=r=>(e,n)=>{let s=s1(e,r,n);return Rh(s.toasterId||n1(s.id))({type:2,toast:s}),s.id},It=(r,e)=>$l("blank")(r,e);It.error=$l("error");It.success=$l("success");It.loading=$l("loading");It.custom=$l("custom");It.dismiss=(r,e)=>{let n={type:3,toastId:r};e?Rh(e)(n):vE(n)};It.dismissAll=r=>It.dismiss(void 0,r);It.remove=(r,e)=>{let n={type:4,toastId:r};e?Rh(e)(n):vE(n)};It.removeAll=r=>It.remove(void 0,r);It.promise=(r,e,n)=>{let s=It.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof r=="function"&&(r=r()),r.then(o=>{let u=e.success?ah(e.success,o):void 0;return u?It.success(u,{id:s,...n,...n==null?void 0:n.success}):It.dismiss(s),o}).catch(o=>{let u=e.error?ah(e.error,o):void 0;u?It.error(u,{id:s,...n,...n==null?void 0:n.error}):It.dismiss(s)}),r};var a1=1e3,o1=(r,e="default")=>{let{toasts:n,pausedAt:s}=r1(r,e),o=se.useRef(new Map).current,u=se.useCallback((A,R=a1)=>{if(o.has(A))return;let U=setTimeout(()=>{o.delete(A),f({type:4,toastId:A})},R);o.set(A,U)},[]);se.useEffect(()=>{if(s)return;let A=Date.now(),R=n.map(U=>{if(U.duration===1/0)return;let z=(U.duration||0)+U.pauseDuration-(A-U.createdAt);if(z<0){U.visible&&It.dismiss(U.id);return}return setTimeout(()=>It.dismiss(U.id,e),z)});return()=>{R.forEach(U=>U&&clearTimeout(U))}},[n,s,e]);let f=se.useCallback(Rh(e),[e]),m=se.useCallback(()=>{f({type:5,time:Date.now()})},[f]),g=se.useCallback((A,R)=>{f({type:1,toast:{id:A,height:R}})},[f]),y=se.useCallback(()=>{s&&f({type:6,time:Date.now()})},[s,f]),T=se.useCallback((A,R)=>{let{reverseOrder:U=!1,gutter:z=8,defaultPosition:X}=R||{},G=n.filter(ne=>(ne.position||X)===(A.position||X)&&ne.height),oe=G.findIndex(ne=>ne.id===A.id),le=G.filter((ne,ee)=>ee<oe&&ne.visible).length;return G.filter(ne=>ne.visible).slice(...U?[le+1]:[0,le]).reduce((ne,ee)=>ne+(ee.height||0)+z,0)},[n]);return se.useEffect(()=>{n.forEach(A=>{if(A.dismissed)u(A.id,A.removeDelay);else{let R=o.get(A.id);R&&(clearTimeout(R),o.delete(A.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:g,startPause:m,endPause:y,calculateOffset:T}}},l1=ir`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,u1=ir`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,c1=ir`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,h1=ms("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${l1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${u1} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${c1} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,f1=ir`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,d1=ms("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${f1} 1s linear infinite;
`,m1=ir`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,p1=ir`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,g1=ms("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${m1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${p1} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,y1=ms("div")`
  position: absolute;
`,_1=ms("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,v1=ir`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,E1=ms("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${v1} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,T1=({toast:r})=>{let{icon:e,type:n,iconTheme:s}=r;return e!==void 0?typeof e=="string"?se.createElement(E1,null,e):e:n==="blank"?null:se.createElement(_1,null,se.createElement(d1,{...s}),n!=="loading"&&se.createElement(y1,null,n==="error"?se.createElement(h1,{...s}):se.createElement(g1,{...s})))},b1=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,w1=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,A1="0%{opacity:0;} 100%{opacity:1;}",S1="0%{opacity:1;} 100%{opacity:0;}",R1=ms("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,x1=ms("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,C1=(r,e)=>{let n=r.includes("top")?1:-1,[s,o]=pE()?[A1,S1]:[b1(n),w1(n)];return{animation:e?`${ir(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ir(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},I1=se.memo(({toast:r,position:e,style:n,children:s})=>{let o=r.height?C1(r.position||e||"top-center",r.visible):{opacity:0},u=se.createElement(T1,{toast:r}),f=se.createElement(x1,{...r.ariaProps},ah(r.message,r));return se.createElement(R1,{className:r.className,style:{...o,...n,...r.style}},typeof s=="function"?s({icon:u,message:f}):se.createElement(se.Fragment,null,u,f))});ZA(se.createElement);var N1=({id:r,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=se.useCallback(f=>{if(f){let m=()=>{let g=f.getBoundingClientRect().height;s(r,g)};m(),new MutationObserver(m).observe(f,{subtree:!0,childList:!0,characterData:!0})}},[r,s]);return se.createElement("div",{ref:u,className:e,style:n},o)},D1=(r,e)=>{let n=r.includes("top"),s=n?{top:0}:{bottom:0},o=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:pE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},O1=Sh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Pc=16,M1=({reverseOrder:r,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:u,containerStyle:f,containerClassName:m})=>{let{toasts:g,handlers:y}=o1(n,u);return se.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Pc,left:Pc,right:Pc,bottom:Pc,pointerEvents:"none",...f},className:m,onMouseEnter:y.startPause,onMouseLeave:y.endPause},g.map(T=>{let A=T.position||e,R=y.calculateOffset(T,{reverseOrder:r,gutter:s,defaultPosition:e}),U=D1(A,R);return se.createElement(N1,{id:T.id,key:T.id,onHeightUpdate:y.updateHeight,className:T.visible?O1:"",style:U},T.type==="custom"?ah(T.message,T):o?o(T):se.createElement(I1,{toast:T,position:A}))}))},Zr=It,Pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},k1=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,T=u>>2,A=(u&3)<<4|m>>4;let R=(m&15)<<2|y>>6,U=y&63;g||(U=64,f||(R=64)),s.push(n[T],n[A],n[R],n[U])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(EE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):k1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const A=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||y==null||A==null)throw new V1;const R=u<<2|m>>4;if(s.push(R),y!==64){const U=m<<4&240|y>>2;if(s.push(U),A!==64){const z=y<<6&192|A;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class V1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U1=function(r){const e=EE(r);return TE.encodeByteArray(e,!0)},oh=function(r){return U1(r).replace(/\./g,"")},bE=function(r){try{return TE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=()=>L1().__FIREBASE_DEFAULTS__,P1=()=>{if(typeof process>"u"||typeof Pv>"u")return;const r=Pv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},z1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&bE(r[1]);return e&&JSON.parse(e)},xh=()=>{try{return j1()||P1()||z1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},wE=r=>{var e,n;return(n=(e=xh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},sp=r=>{const e=wE(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},AE=()=>{var r;return(r=xh())===null||r===void 0?void 0:r.config},SE=r=>{var e;return(e=xh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[oh(JSON.stringify(n)),oh(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function H1(){var r;const e=(r=xh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function K1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q1(){const r=tn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function $1(){return!H1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y1(){try{return typeof indexedDB=="object"}catch{return!1}}function X1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="FirebaseError";class ni extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=J1,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?Z1(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new ni(o,m,s)}}function Z1(r,e){return r.replace(W1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const W1=/\{\$([^}]+)}/g;function eS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ho(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(zv(u)&&zv(f)){if(!ho(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function zv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tS(r,e){const n=new nS(r,e);return n.subscribe.bind(n)}class nS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");iS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=um),o.error===void 0&&(o.error=um),o.complete===void 0&&(o.complete=um);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iS(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(r){return r&&r._delegate?r._delegate:r}class rr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new B1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aS(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sS(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sS(r){return r===Qs?void 0:r}function aS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const lS={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},uS=Ue.INFO,cS={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},hS=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=cS[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ap{constructor(e){this.name=e,this._logLevel=uS,this._logHandler=hS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const fS=(r,e)=>e.some(n=>r instanceof n);let Bv,qv;function dS(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mS(){return qv||(qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xE=new WeakMap,Rm=new WeakMap,CE=new WeakMap,cm=new WeakMap,op=new WeakMap;function pS(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(ss(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&xE.set(n,r)}).catch(()=>{}),op.set(e,r),e}function gS(r){if(Rm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Rm.set(r,e)}let xm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Rm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||CE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function yS(r){xm=r(xm)}function _S(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(hm(this),e,...n);return CE.set(s,e.sort?e.sort():[e]),ss(s)}:mS().includes(r)?function(...e){return r.apply(hm(this),e),ss(xE.get(this))}:function(...e){return ss(r.apply(hm(this),e))}}function vS(r){return typeof r=="function"?_S(r):(r instanceof IDBTransaction&&gS(r),fS(r,dS())?new Proxy(r,xm):r)}function ss(r){if(r instanceof IDBRequest)return pS(r);if(cm.has(r))return cm.get(r);const e=vS(r);return e!==r&&(cm.set(r,e),op.set(e,r)),e}const hm=r=>op.get(r);function ES(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=ss(f);return s&&f.addEventListener("upgradeneeded",g=>{s(ss(f.result),g.oldVersion,g.newVersion,ss(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const TS=["get","getKey","getAll","getAllKeys","count"],bS=["put","add","delete","clear"],fm=new Map;function Hv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(fm.get(e))return fm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=bS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||TS.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return fm.set(e,u),u}yS(r=>({...r,get:(e,n,s)=>Hv(e,n)||r.get(e,n,s),has:(e,n)=>!!Hv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function AS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cm="@firebase/app",Fv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new ap("@firebase/app"),SS="@firebase/app-compat",RS="@firebase/analytics-compat",xS="@firebase/analytics",CS="@firebase/app-check-compat",IS="@firebase/app-check",NS="@firebase/auth",DS="@firebase/auth-compat",OS="@firebase/database",MS="@firebase/data-connect",kS="@firebase/database-compat",VS="@firebase/functions",US="@firebase/functions-compat",LS="@firebase/installations",jS="@firebase/installations-compat",PS="@firebase/messaging",zS="@firebase/messaging-compat",BS="@firebase/performance",qS="@firebase/performance-compat",HS="@firebase/remote-config",FS="@firebase/remote-config-compat",GS="@firebase/storage",KS="@firebase/storage-compat",QS="@firebase/firestore",$S="@firebase/vertexai-preview",YS="@firebase/firestore-compat",XS="firebase",JS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",ZS={[Cm]:"fire-core",[SS]:"fire-core-compat",[xS]:"fire-analytics",[RS]:"fire-analytics-compat",[IS]:"fire-app-check",[CS]:"fire-app-check-compat",[NS]:"fire-auth",[DS]:"fire-auth-compat",[OS]:"fire-rtdb",[MS]:"fire-data-connect",[kS]:"fire-rtdb-compat",[VS]:"fire-fn",[US]:"fire-fn-compat",[LS]:"fire-iid",[jS]:"fire-iid-compat",[PS]:"fire-fcm",[zS]:"fire-fcm-compat",[BS]:"fire-perf",[qS]:"fire-perf-compat",[HS]:"fire-rc",[FS]:"fire-rc-compat",[GS]:"fire-gcs",[KS]:"fire-gcs-compat",[QS]:"fire-fst",[YS]:"fire-fst-compat",[$S]:"fire-vertex","fire-js":"fire-js",[XS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,WS=new Map,Nm=new Map;function Gv(r,e){try{r.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function us(r){const e=r.name;if(Nm.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,r);for(const n of lh.values())Gv(n,r);for(const n of WS.values())Gv(n,r);return!0}function Jl(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Wi(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new Yl("app","Firebase",eR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=JS;function IE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Im,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw as.create("bad-app-name",{appName:String(o)});if(n||(n=AE()),!n)throw as.create("no-options");const u=lh.get(o);if(u){if(ho(n,u.options)&&ho(s,u.config))return u;throw as.create("duplicate-app",{appName:o})}const f=new oS(o);for(const g of Nm.values())f.addComponent(g);const m=new tR(n,s,f);return lh.set(o,m),m}function Ch(r=Im){const e=lh.get(r);if(!e&&r===Im&&AE())return IE();if(!e)throw as.create("no-app",{appName:r});return e}function Gn(r,e,n){var s;let o=(s=ZS[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(m.join(" "));return}us(new rr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="firebase-heartbeat-database",iR=1,ql="firebase-heartbeat-store";let dm=null;function NE(){return dm||(dm=ES(nR,iR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ql)}catch(n){console.warn(n)}}}}).catch(r=>{throw as.create("idb-open",{originalErrorMessage:r.message})})),dm}async function rR(r){try{const n=(await NE()).transaction(ql),s=await n.objectStore(ql).get(DE(r));return await n.done,s}catch(e){if(e instanceof ni)sr.warn(e.message);else{const n=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function Kv(r,e){try{const s=(await NE()).transaction(ql,"readwrite");await s.objectStore(ql).put(e,DE(r)),await s.done}catch(n){if(n instanceof ni)sr.warn(n.message);else{const s=as.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(s.message)}}}function DE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=1024,aR=720*60*60*1e3;class oR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Qv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=aR}),this._storage.overwrite(this._heartbeatsCache))}catch(s){sr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qv(),{heartbeatsToSend:s,unsentEntries:o}=lR(this._heartbeatsCache.heartbeats),u=oh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return sr.warn(n),""}}}function Qv(){return new Date().toISOString().substring(0,10)}function lR(r,e=sR){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),$v(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),$v(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class uR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y1()?X1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function $v(r){return oh(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(r){us(new rr("platform-logger",e=>new wS(e),"PRIVATE")),us(new rr("heartbeat",e=>new oR(e),"PRIVATE")),Gn(Cm,Fv,r),Gn(Cm,Fv,"esm2017"),Gn("fire-js","")}cR("");function lp(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function OE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hR=OE,ME=new Yl("auth","Firebase",OE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new ap("@firebase/auth");function fR(r,...e){uh.logLevel<=Ue.WARN&&uh.warn(`Auth (${aa}): ${r}`,...e)}function Jc(r,...e){uh.logLevel<=Ue.ERROR&&uh.error(`Auth (${aa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(r,...e){throw cp(r,...e)}function Wn(r,...e){return cp(r,...e)}function up(r,e,n){const s=Object.assign(Object.assign({},hR()),{[e]:n});return new Yl("auth","Firebase",s).create(e,{appName:r.name})}function Zs(r){return up(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dR(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ti(r,"argument-error"),up(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return ME.create(r,...e)}function Ee(r,e,...n){if(!r)throw cp(e,...n)}function er(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Jc(e),new Error(e)}function ar(r,e){r||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function mR(){return Yv()==="http:"||Yv()==="https:"}function Yv(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mR()||G1()||"connection"in navigator)?navigator.onLine:!0}function gR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=q1()||K1()}get(){return pR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r,e){ar(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=new Zl(3e4,6e4);function fp(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function wo(r,e,n,s,o={}){return VE(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=Xl(Object.assign({key:r.config.apiKey},f)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:g},u);return F1()||(y.referrerPolicy="no-referrer"),kE.fetch()(UE(r,r.config.apiHost,n,m),y)})}async function VE(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},yR),e);try{const o=new ER(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw zc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zc(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw zc(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw zc(r,"user-disabled",f);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw up(r,T,y);Ti(r,T)}}catch(o){if(o instanceof ni)throw o;Ti(r,"network-request-failed",{message:String(o)})}}async function vR(r,e,n,s,o={}){const u=await wo(r,e,n,s,o);return"mfaPendingCredential"in u&&Ti(r,"multi-factor-auth-required",{_serverResponse:u}),u}function UE(r,e,n,s){const o=`${e}${n}?${s}`;return r.config.emulator?hp(r.config,o):`${r.config.apiScheme}://${o}`}class ER{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Wn(this.auth,"network-request-failed")),_R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Wn(r,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(r,e){return wo(r,"POST","/v1/accounts:delete",e)}async function LE(r,e){return wo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bR(r,e=!1){const n=Ye(r),s=await n.getIdToken(e),o=dp(s);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Ul(mm(o.auth_time)),issuedAtTime:Ul(mm(o.iat)),expirationTime:Ul(mm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function mm(r){return Number(r)*1e3}function dp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{const o=bE(n);return o?JSON.parse(o):(Jc("Failed to decode base64 JWT payload"),null)}catch(o){return Jc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Xv(r){const e=dp(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ni&&wR(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function wR({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ul(this.lastLoginAt),this.creationTime=Ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(r){var e;const n=r.auth,s=await r.getIdToken(),o=await Hl(r,LE(n,{idToken:s}));Ee(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?jE(u.providerUserInfo):[],m=RR(r.providerData,f),g=r.isAnonymous,y=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),T=g?y:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Om(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(r,A)}async function SR(r){const e=Ye(r);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RR(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function jE(r){return r.map(e=>{var{providerId:n}=e,s=lp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(r,e){const n=await VE(r,{},async()=>{const s=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=UE(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",kE.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CR(r,e){return wo(r,"POST","/v2/accounts:revokeToken",fp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=Xv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await xR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new ro;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class tr{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=lp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Om(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Hl(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bR(this,e)}reload(){return SR(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ch(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wi(this.auth.app))return Promise.reject(Zs(this.auth));const e=await this.getIdToken();return await Hl(this,TR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,g,y,T;const A=(s=n.displayName)!==null&&s!==void 0?s:void 0,R=(o=n.email)!==null&&o!==void 0?o:void 0,U=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,z=(f=n.photoURL)!==null&&f!==void 0?f:void 0,X=(m=n.tenantId)!==null&&m!==void 0?m:void 0,G=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,oe=(y=n.createdAt)!==null&&y!==void 0?y:void 0,le=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:ne,emailVerified:ee,isAnonymous:fe,providerData:ie,stsTokenManager:x}=n;Ee(ne&&x,e,"internal-error");const S=ro.fromJSON(this.name,x);Ee(typeof ne=="string",e,"internal-error"),Jr(A,e.name),Jr(R,e.name),Ee(typeof ee=="boolean",e,"internal-error"),Ee(typeof fe=="boolean",e,"internal-error"),Jr(U,e.name),Jr(z,e.name),Jr(X,e.name),Jr(G,e.name),Jr(oe,e.name),Jr(le,e.name);const C=new tr({uid:ne,auth:e,email:R,emailVerified:ee,displayName:A,isAnonymous:fe,photoURL:z,phoneNumber:U,tenantId:X,stsTokenManager:S,createdAt:oe,lastLoginAt:le});return ie&&Array.isArray(ie)&&(C.providerData=ie.map(O=>Object.assign({},O))),G&&(C._redirectEventId=G),C}static async _fromIdTokenResponse(e,n,s=!1){const o=new ro;o.updateFromServerResponse(n);const u=new tr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ch(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?jE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new ro;m.updateFromIdToken(s);const g=new tr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Om(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;function nr(r){ar(r instanceof Function,"Expected a class definition");let e=Jv.get(r);return e?(ar(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Jv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}PE.type="NONE";const Zv=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(r,e,n){return`firebase:${r}:${e}:${n}`}class so{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Zc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Zc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new so(nr(Zv),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||nr(Zv);const f=Zc(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(f);if(T){const A=tr._fromJSON(e,T);y!==u&&(m=A),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new so(u,e,s):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new so(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GE(e))return"Blackberry";if(KE(e))return"Webos";if(BE(e))return"Safari";if((e.includes("chrome/")||qE(e))&&!e.includes("edge/"))return"Chrome";if(FE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zE(r=tn()){return/firefox\//i.test(r)}function BE(r=tn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qE(r=tn()){return/crios\//i.test(r)}function HE(r=tn()){return/iemobile/i.test(r)}function FE(r=tn()){return/android/i.test(r)}function GE(r=tn()){return/blackberry/i.test(r)}function KE(r=tn()){return/webos/i.test(r)}function mp(r=tn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function IR(r=tn()){var e;return mp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NR(){return Q1()&&document.documentMode===10}function QE(r=tn()){return mp(r)||FE(r)||KE(r)||GE(r)||/windows phone/i.test(r)||HE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(r,e=[]){let n;switch(r){case"Browser":n=Wv(tn());break;case"Worker":n=`${Wv(tn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const g=e(u);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(r,e={}){return wo(r,"GET","/v2/passwordPolicy",fp(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=6;class kR{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:MR,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e0(this),this.idTokenSubscription=new e0(this),this.beforeStateQueue=new DR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ME,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await LE(this,{idToken:e}),s=await tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wi(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wi(this.app))return Promise.reject(Zs(this));const n=e?Ye(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wi(this.app)?Promise.reject(Zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wi(this.app)?Promise.reject(Zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OR(this),n=new kR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await CR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nr(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$E(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ih(r){return Ye(r)}class e0{constructor(e){this.auth=e,this.observer=null,this.addObserver=tS(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UR(r){pp=r}function LR(r){return pp.loadJS(r)}function jR(){return pp.gapiScript}function PR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(r,e){const n=Jl(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ho(u,e??{}))return o;Ti(o,"already-initialized")}return n.initialize({options:e})}function BR(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(nr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function qR(r,e,n){const s=Ih(r);Ee(s._canInitEmulator,s,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=YE(e),{host:f,port:m}=HR(e),g=m===null?"":`:${m}`;s.config.emulator={url:`${u}//${f}${g}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),FR()}function YE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function HR(r){const e=YE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:t0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:t0(f)}}}function t0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function FR(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(r,e){return vR(r,"POST","/v1/accounts:signInWithIdp",fp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="http://localhost";class ta extends XE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=lp(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new ta(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ao(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ao(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ao(e,n)}buildRequest(){const e={requestUri:GR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends gp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Wl{constructor(){super("facebook.com")}static credential(e){return ta._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ta._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ji.credential(n,s)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Wl{constructor(){super("github.com")}static credential(e){return ta._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Wl{constructor(){super("twitter.com")}static credential(e,n){return ta._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ns.credential(n,s)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await tr._fromIdTokenResponse(e,s,o),f=n0(s);return new fo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=n0(s);return new fo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function n0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends ni{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new hh(e,n,s,o)}}function JE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(r,u,e,s):u})}async function KR(r,e,n=!1){const s=await Hl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return fo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(r,e,n=!1){const{auth:s}=r;if(Wi(s.app))return Promise.reject(Zs(s));const o="reauthenticate";try{const u=await Hl(r,JE(s,o,e,r),n);Ee(u.idToken,s,"internal-error");const f=dp(u.idToken);Ee(f,s,"internal-error");const{sub:m}=f;return Ee(r.uid===m,s,"user-mismatch"),fo._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Ti(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(r,e,n=!1){if(Wi(r.app))return Promise.reject(Zs(r));const s="signIn",o=await JE(r,s,e),u=await fo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(r,e){return Ye(r).setPersistence(e)}function XR(r,e,n,s){return Ye(r).onIdTokenChanged(e,n,s)}function JR(r,e,n){return Ye(r).beforeAuthStateChanged(e,n)}function ZR(r,e,n,s){return Ye(r).onAuthStateChanged(e,n,s)}function Bc(r){return Ye(r).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=1e3,e2=10;class WE extends ZE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);NR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,e2):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},WR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const eT=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends ZE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tT.type="SESSION";const nT=tT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Nh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),g=await t2(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const y=yp("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(A){const R=A;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function i2(r){_i().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function r2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s2(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function a2(){return iT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebaseLocalStorageDb",o2=1,dh="firebaseLocalStorage",sT="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dh(r,e){return r.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function l2(){const r=indexedDB.deleteDatabase(rT);return new eu(r).toPromise()}function Mm(){const r=indexedDB.open(rT,o2);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(dh,{keyPath:sT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(dh)?e(s):(s.close(),await l2(),e(await Mm()))})})}async function i0(r,e,n){const s=Dh(r,!0).put({[sT]:e,value:n});return new eu(s).toPromise()}async function u2(r,e){const n=Dh(r,!1).get(e),s=await new eu(n).toPromise();return s===void 0?null:s.value}function r0(r,e){const n=Dh(r,!0).delete(e);return new eu(n).toPromise()}const c2=800,h2=3;class aT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>h2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(a2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await r2(),!this.activeServiceWorker)return;this.sender=new n2(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||s2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await i0(e,fh,"1"),await r0(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>i0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>u2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>r0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Dh(o,!1).getAll();return new eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aT.type="LOCAL";const f2=aT;new Zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r,e){return e?nr(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends XE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function d2(r){return $R(r.auth,new _p(r),r.bypassAuthState)}function m2(r){const{auth:e,user:n}=r;return Ee(n,e,"internal-error"),QR(n,new _p(r),r.bypassAuthState)}async function p2(r){const{auth:e,user:n}=r;return Ee(n,e,"internal-error"),KR(n,new _p(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d2;case"linkViaPopup":case"linkViaRedirect":return p2;case"reauthViaPopup":case"reauthViaRedirect":return m2;default:Ti(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=new Zl(2e3,1e4);async function y2(r,e,n){if(Wi(r.app))return Promise.reject(Wn(r,"operation-not-supported-in-this-environment"));const s=Ih(r);dR(r,e,gp);const o=oT(s,n);return new Ys(s,"signInViaPopup",e,o).executeNotNull()}class Ys extends lT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g2.get())};e()}}Ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="pendingRedirect",Wc=new Map;class v2 extends lT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Wc.get(this.auth._key());if(!e){try{const s=await E2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Wc.set(this.auth._key(),e)}return this.bypassAuthState||Wc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E2(r,e){const n=w2(e),s=b2(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function T2(r,e){Wc.set(r._key(),e)}function b2(r){return nr(r._redirectPersistence)}function w2(r){return Zc(_2,r.config.apiKey,r.name)}async function A2(r,e,n=!1){if(Wi(r.app))return Promise.reject(Zs(r));const s=Ih(r),o=oT(s,e),f=await new v2(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=600*1e3;class R2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!uT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Wn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S2&&this.cachedEventUids.clear(),this.cachedEventUids.has(s0(e))}saveEventToCache(e){this.cachedEventUids.add(s0(e)),this.lastProcessedEventTime=Date.now()}}function s0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function uT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function x2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(r,e={}){return wo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N2=/^https?/;async function D2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await C2(r);for(const n of e)try{if(O2(n))return}catch{}Ti(r,"unauthorized-domain")}function O2(r){const e=Dm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!N2.test(n))return!1;if(I2.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new Zl(3e4,6e4);function a0(){const r=_i().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function k2(r){return new Promise((e,n)=>{var s,o,u;function f(){a0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{a0(),n(Wn(r,"network-request-failed"))},timeout:M2.get()})}if(!((o=(s=_i().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=_i().gapi)===null||u===void 0)&&u.load)f();else{const m=PR("iframefcb");return _i()[m]=()=>{gapi.load?f():n(Wn(r,"network-request-failed"))},LR(`${jR()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw eh=null,e})}let eh=null;function V2(r){return eh=eh||k2(r),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new Zl(5e3,15e3),L2="__/auth/iframe",j2="emulator/auth/iframe",P2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B2(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?hp(e,j2):`https://${r.config.authDomain}/${L2}`,s={apiKey:e.apiKey,appName:r.name,v:aa},o=z2.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Xl(s).slice(1)}`}async function q2(r){const e=await V2(r),n=_i().gapi;return Ee(n,r,"internal-error"),e.open({where:document.body,url:B2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P2,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Wn(r,"network-request-failed"),m=_i().setTimeout(()=>{u(f)},U2.get());function g(){_i().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F2=500,G2=600,K2="_blank",Q2="http://localhost";class o0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $2(r,e,n,s=F2,o=G2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},H2),{width:s.toString(),height:o.toString(),top:u,left:f}),y=tn().toLowerCase();n&&(m=qE(y)?K2:n),zE(y)&&(e=e||Q2,g.scrollbars="yes");const T=Object.entries(g).reduce((R,[U,z])=>`${R}${U}=${z},`,"");if(IR(y)&&m!=="_self")return Y2(e||"",m),new o0(null);const A=window.open(e||"",m,T);Ee(A,r,"popup-blocked");try{A.focus()}catch{}return new o0(A)}function Y2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="__/auth/handler",J2="emulator/auth/handler",Z2=encodeURIComponent("fac");async function l0(r,e,n,s,o,u){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:aa,eventId:o};if(e instanceof gp){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",eS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))f[T]=A}if(e instanceof Wl){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await r._getAppCheckToken(),y=g?`#${Z2}=${encodeURIComponent(g)}`:"";return`${W2(r)}?${Xl(m).slice(1)}${y}`}function W2({config:r}){return r.emulator?hp(r,J2):`https://${r.authDomain}/${X2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="webStorageSupport";class ex{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nT,this._completeRedirectFn=A2,this._overrideRedirectResult=T2}async _openPopup(e,n,s,o){var u;ar((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await l0(e,n,s,Dm(),o);return $2(e,f,yp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await l0(e,n,s,Dm(),o);return i2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ar(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await q2(e),s=new R2(e);return n.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pm,{type:pm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[pm];f!==void 0&&n(!!f),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QE()||BE()||mp()}}const tx=ex;var u0="@firebase/auth",c0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rx(r){us(new rr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ee(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$E(r)},y=new VR(s,o,u,g);return BR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),us(new rr("auth-internal",e=>{const n=Ih(e.getProvider("auth").getImmediate());return(s=>new nx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(u0,c0,ix(r)),Gn(u0,c0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=300,ax=SE("authIdTokenMaxAge")||sx;let h0=null;const ox=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>ax)return;const o=n==null?void 0:n.token;h0!==o&&(h0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function lx(r=Ch()){const e=Jl(r,"auth");if(e.isInitialized())return e.getImmediate();const n=zR(r,{popupRedirectResolver:tx,persistence:[f2,eT,nT]}),s=SE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=ox(u.toString());JR(n,f,()=>f(n.currentUser)),XR(n,m=>f(m))}}const o=wE("auth");return o&&qR(n,`http://${o}`),n}function ux(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}UR({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Wn("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",ux().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rx("Browser");var f0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,cT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function C(){}C.prototype=S.prototype,x.D=S.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(O,k,L){for(var N=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)N[Rt-2]=arguments[Rt];return S.prototype[k].apply(O,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,S,C){C||(C=0);var O=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)O[k]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(k=0;16>k;++k)O[k]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=x.g[0],C=x.g[1],k=x.g[2];var L=x.g[3],N=S+(L^C&(k^L))+O[0]+3614090360&4294967295;S=C+(N<<7&4294967295|N>>>25),N=L+(k^S&(C^k))+O[1]+3905402710&4294967295,L=S+(N<<12&4294967295|N>>>20),N=k+(C^L&(S^C))+O[2]+606105819&4294967295,k=L+(N<<17&4294967295|N>>>15),N=C+(S^k&(L^S))+O[3]+3250441966&4294967295,C=k+(N<<22&4294967295|N>>>10),N=S+(L^C&(k^L))+O[4]+4118548399&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(k^S&(C^k))+O[5]+1200080426&4294967295,L=S+(N<<12&4294967295|N>>>20),N=k+(C^L&(S^C))+O[6]+2821735955&4294967295,k=L+(N<<17&4294967295|N>>>15),N=C+(S^k&(L^S))+O[7]+4249261313&4294967295,C=k+(N<<22&4294967295|N>>>10),N=S+(L^C&(k^L))+O[8]+1770035416&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(k^S&(C^k))+O[9]+2336552879&4294967295,L=S+(N<<12&4294967295|N>>>20),N=k+(C^L&(S^C))+O[10]+4294925233&4294967295,k=L+(N<<17&4294967295|N>>>15),N=C+(S^k&(L^S))+O[11]+2304563134&4294967295,C=k+(N<<22&4294967295|N>>>10),N=S+(L^C&(k^L))+O[12]+1804603682&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(k^S&(C^k))+O[13]+4254626195&4294967295,L=S+(N<<12&4294967295|N>>>20),N=k+(C^L&(S^C))+O[14]+2792965006&4294967295,k=L+(N<<17&4294967295|N>>>15),N=C+(S^k&(L^S))+O[15]+1236535329&4294967295,C=k+(N<<22&4294967295|N>>>10),N=S+(k^L&(C^k))+O[1]+4129170786&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^k&(S^C))+O[6]+3225465664&4294967295,L=S+(N<<9&4294967295|N>>>23),N=k+(S^C&(L^S))+O[11]+643717713&4294967295,k=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(k^L))+O[0]+3921069994&4294967295,C=k+(N<<20&4294967295|N>>>12),N=S+(k^L&(C^k))+O[5]+3593408605&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^k&(S^C))+O[10]+38016083&4294967295,L=S+(N<<9&4294967295|N>>>23),N=k+(S^C&(L^S))+O[15]+3634488961&4294967295,k=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(k^L))+O[4]+3889429448&4294967295,C=k+(N<<20&4294967295|N>>>12),N=S+(k^L&(C^k))+O[9]+568446438&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^k&(S^C))+O[14]+3275163606&4294967295,L=S+(N<<9&4294967295|N>>>23),N=k+(S^C&(L^S))+O[3]+4107603335&4294967295,k=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(k^L))+O[8]+1163531501&4294967295,C=k+(N<<20&4294967295|N>>>12),N=S+(k^L&(C^k))+O[13]+2850285829&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^k&(S^C))+O[2]+4243563512&4294967295,L=S+(N<<9&4294967295|N>>>23),N=k+(S^C&(L^S))+O[7]+1735328473&4294967295,k=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(k^L))+O[12]+2368359562&4294967295,C=k+(N<<20&4294967295|N>>>12),N=S+(C^k^L)+O[5]+4294588738&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^k)+O[8]+2272392833&4294967295,L=S+(N<<11&4294967295|N>>>21),N=k+(L^S^C)+O[11]+1839030562&4294967295,k=L+(N<<16&4294967295|N>>>16),N=C+(k^L^S)+O[14]+4259657740&4294967295,C=k+(N<<23&4294967295|N>>>9),N=S+(C^k^L)+O[1]+2763975236&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^k)+O[4]+1272893353&4294967295,L=S+(N<<11&4294967295|N>>>21),N=k+(L^S^C)+O[7]+4139469664&4294967295,k=L+(N<<16&4294967295|N>>>16),N=C+(k^L^S)+O[10]+3200236656&4294967295,C=k+(N<<23&4294967295|N>>>9),N=S+(C^k^L)+O[13]+681279174&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^k)+O[0]+3936430074&4294967295,L=S+(N<<11&4294967295|N>>>21),N=k+(L^S^C)+O[3]+3572445317&4294967295,k=L+(N<<16&4294967295|N>>>16),N=C+(k^L^S)+O[6]+76029189&4294967295,C=k+(N<<23&4294967295|N>>>9),N=S+(C^k^L)+O[9]+3654602809&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^k)+O[12]+3873151461&4294967295,L=S+(N<<11&4294967295|N>>>21),N=k+(L^S^C)+O[15]+530742520&4294967295,k=L+(N<<16&4294967295|N>>>16),N=C+(k^L^S)+O[2]+3299628645&4294967295,C=k+(N<<23&4294967295|N>>>9),N=S+(k^(C|~L))+O[0]+4096336452&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~k))+O[7]+1126891415&4294967295,L=S+(N<<10&4294967295|N>>>22),N=k+(S^(L|~C))+O[14]+2878612391&4294967295,k=L+(N<<15&4294967295|N>>>17),N=C+(L^(k|~S))+O[5]+4237533241&4294967295,C=k+(N<<21&4294967295|N>>>11),N=S+(k^(C|~L))+O[12]+1700485571&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~k))+O[3]+2399980690&4294967295,L=S+(N<<10&4294967295|N>>>22),N=k+(S^(L|~C))+O[10]+4293915773&4294967295,k=L+(N<<15&4294967295|N>>>17),N=C+(L^(k|~S))+O[1]+2240044497&4294967295,C=k+(N<<21&4294967295|N>>>11),N=S+(k^(C|~L))+O[8]+1873313359&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~k))+O[15]+4264355552&4294967295,L=S+(N<<10&4294967295|N>>>22),N=k+(S^(L|~C))+O[6]+2734768916&4294967295,k=L+(N<<15&4294967295|N>>>17),N=C+(L^(k|~S))+O[13]+1309151649&4294967295,C=k+(N<<21&4294967295|N>>>11),N=S+(k^(C|~L))+O[4]+4149444226&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~k))+O[11]+3174756917&4294967295,L=S+(N<<10&4294967295|N>>>22),N=k+(S^(L|~C))+O[2]+718787259&4294967295,k=L+(N<<15&4294967295|N>>>17),N=C+(L^(k|~S))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+L&4294967295}s.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var C=S-this.blockSize,O=this.B,k=this.h,L=0;L<S;){if(k==0)for(;L<=C;)o(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<S;)if(O[k++]=x.charCodeAt(L++),k==this.blockSize){o(this,O),k=0;break}}else for(;L<S;)if(O[k++]=x[L++],k==this.blockSize){o(this,O),k=0;break}}this.h=k,this.o+=S},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var C=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=C&255,C/=256;for(this.u(x),x=Array(16),S=C=0;4>S;++S)for(var O=0;32>O;O+=8)x[C++]=this.g[S]>>>O&255;return x};function u(x,S){var C=m;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=S(x)}function f(x,S){this.h=S;for(var C=[],O=!0,k=x.length-1;0<=k;k--){var L=x[k]|0;O&&L==S||(C[k]=L,O=!1)}this.g=C}var m={};function g(x){return-128<=x&&128>x?u(x,function(S){return new f([S|0],0>S?-1:0)}):new f([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return A;if(0>x)return G(y(-x));for(var S=[],C=1,O=0;x>=C;O++)S[O]=x/C|0,C*=4294967296;return new f(S,0)}function T(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return G(T(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(S,8)),O=A,k=0;k<x.length;k+=8){var L=Math.min(8,x.length-k),N=parseInt(x.substring(k,k+L),S);8>L?(L=y(Math.pow(S,L)),O=O.j(L).add(y(N))):(O=O.j(C),O=O.add(y(N)))}return O}var A=g(0),R=g(1),U=g(16777216);r=f.prototype,r.m=function(){if(X(this))return-G(this).m();for(var x=0,S=1,C=0;C<this.g.length;C++){var O=this.i(C);x+=(0<=O?O:4294967296+O)*S,S*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(z(this))return"0";if(X(this))return"-"+G(this).toString(x);for(var S=y(Math.pow(x,6)),C=this,O="";;){var k=ee(C,S).g;C=oe(C,k.j(S));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=k,z(C))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function z(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function X(x){return x.h==-1}r.l=function(x){return x=oe(this,x),X(x)?-1:z(x)?0:1};function G(x){for(var S=x.g.length,C=[],O=0;O<S;O++)C[O]=~x.g[O];return new f(C,~x.h).add(R)}r.abs=function(){return X(this)?G(this):this},r.add=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],O=0,k=0;k<=S;k++){var L=O+(this.i(k)&65535)+(x.i(k)&65535),N=(L>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);O=N>>>16,L&=65535,N&=65535,C[k]=N<<16|L}return new f(C,C[C.length-1]&-2147483648?-1:0)};function oe(x,S){return x.add(G(S))}r.j=function(x){if(z(this)||z(x))return A;if(X(this))return X(x)?G(this).j(G(x)):G(G(this).j(x));if(X(x))return G(this.j(G(x)));if(0>this.l(U)&&0>x.l(U))return y(this.m()*x.m());for(var S=this.g.length+x.g.length,C=[],O=0;O<2*S;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<x.g.length;k++){var L=this.i(O)>>>16,N=this.i(O)&65535,Rt=x.i(k)>>>16,Ut=x.i(k)&65535;C[2*O+2*k]+=N*Ut,le(C,2*O+2*k),C[2*O+2*k+1]+=L*Ut,le(C,2*O+2*k+1),C[2*O+2*k+1]+=N*Rt,le(C,2*O+2*k+1),C[2*O+2*k+2]+=L*Rt,le(C,2*O+2*k+2)}for(O=0;O<S;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=S;O<2*S;O++)C[O]=0;return new f(C,0)};function le(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function ne(x,S){this.g=x,this.h=S}function ee(x,S){if(z(S))throw Error("division by zero");if(z(x))return new ne(A,A);if(X(x))return S=ee(G(x),S),new ne(G(S.g),G(S.h));if(X(S))return S=ee(x,G(S)),new ne(G(S.g),S.h);if(30<x.g.length){if(X(x)||X(S))throw Error("slowDivide_ only works with positive integers.");for(var C=R,O=S;0>=O.l(x);)C=fe(C),O=fe(O);var k=ie(C,1),L=ie(O,1);for(O=ie(O,2),C=ie(C,2);!z(O);){var N=L.add(O);0>=N.l(x)&&(k=k.add(C),L=N),O=ie(O,1),C=ie(C,1)}return S=oe(x,k.j(S)),new ne(k,S)}for(k=A;0<=x.l(S);){for(C=Math.max(1,Math.floor(x.m()/S.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=y(C),N=L.j(S);X(N)||0<N.l(x);)C-=O,L=y(C),N=L.j(S);z(L)&&(L=R),k=k.add(L),x=oe(x,N)}return new ne(k,x)}r.A=function(x){return ee(this,x).h},r.and=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)&x.i(O);return new f(C,this.h&x.h)},r.or=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)|x.i(O);return new f(C,this.h|x.h)},r.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)^x.i(O);return new f(C,this.h^x.h)};function fe(x){for(var S=x.g.length+1,C=[],O=0;O<S;O++)C[O]=x.i(O)<<1|x.i(O-1)>>>31;return new f(C,x.h)}function ie(x,S){var C=S>>5;S%=32;for(var O=x.g.length-C,k=[],L=0;L<O;L++)k[L]=0<S?x.i(L+C)>>>S|x.i(L+C+1)<<32-S:x.i(L+C);return new f(k,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,cT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,Ws=f}).apply(typeof f0<"u"?f0:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hT,Ol,fT,th,km,dT,mT,pT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,v){return c==Array.prototype||c==Object.prototype||(c[p]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,p){if(p)e:{var v=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var j=c[w];if(!(j in v))break e;v=v[j]}c=c[c.length-1],w=v[c],p=p(w),p!=w&&p!=null&&e(v,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var v=0,w=!1,j={next:function(){if(!w&&v<c.length){var F=v++;return{value:p(F,c[F]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function y(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function T(c,p,v){return c.call.apply(c.bind,arguments)}function A(c,p,v){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),c.apply(p,j)}}return function(){return c.apply(p,arguments)}}function R(c,p,v){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,R.apply(null,arguments)}function U(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function z(c,p){function v(){}v.prototype=p.prototype,c.aa=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(w,j,F){for(var re=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)re[Ge-2]=arguments[Ge];return p.prototype[j].apply(w,re)}}function X(c){const p=c.length;if(0<p){const v=Array(p);for(let w=0;w<p;w++)v[w]=c[w];return v}return[]}function G(c,p){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(g(w)){const j=c.length||0,F=w.length||0;c.length=j+F;for(let re=0;re<F;re++)c[j+re]=w[re]}else c.push(w)}}class oe{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function le(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var fe=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function ie(c,p,v){for(const w in c)p.call(v,c[w],w,c)}function x(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function S(c){const p={};for(const v in c)p[v]=c[v];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,p){let v,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(v in w)c[v]=w[v];for(let F=0;F<C.length;F++)v=C[F],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function k(c){var p=1;c=c.split(":");const v=[];for(;0<p&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function L(c){m.setTimeout(()=>{throw c},0)}function N(){var c=je;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Rt{constructor(){this.h=this.g=null}add(p,v){const w=Ut.get();w.set(p,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Ut=new oe(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ge=!1,je=new Rt,Fe=()=>{const c=m.Promise.resolve(void 0);ae=()=>{c.then(M)}};var M=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(v){L(v)}var p=Ut;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ge=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,p),m.removeEventListener("test",v,p)}catch{}return c})();function ve(c,p){if(te.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(fe){e:{try{ee(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:xe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ve.aa.h.call(this)}}z(ve,te);var xe={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),Lt=0;function st(c,p,v,w,j){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!w,this.ha=j,this.key=++Lt,this.da=this.fa=!1}function ii(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function wi(c){this.src=c,this.g={},this.h=0}wi.prototype.add=function(c,p,v,w,j){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var re=fa(c,p,w,j);return-1<re?(p=c[re],v||(p.fa=!1)):(p=new st(p,this.src,F,!!w,j),p.fa=v,c.push(p)),p};function ys(c,p){var v=p.type;if(v in c.g){var w=c.g[v],j=Array.prototype.indexOf.call(w,p,void 0),F;(F=0<=j)&&Array.prototype.splice.call(w,j,1),F&&(ii(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function fa(c,p,v,w){for(var j=0;j<c.length;++j){var F=c[j];if(!F.da&&F.listener==p&&F.capture==!!v&&F.ha==w)return j}return-1}var Kn="closure_lm_"+(1e6*Math.random()|0),_s={};function da(c,p,v,w,j){if(Array.isArray(p)){for(var F=0;F<p.length;F++)da(c,p[F],v,w,j);return null}return v=fu(v),c&&c[ke]?c.K(p,v,y(w)?!!w.capture:!1,j):Wh(c,p,v,!1,w,j)}function Wh(c,p,v,w,j,F){if(!p)throw Error("Invalid event type");var re=y(j)?!!j.capture:!!j,Ge=xo(c);if(Ge||(c[Kn]=Ge=new wi(c)),v=Ge.add(p,v,w,re,F),v.proxy)return v;if(w=hu(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)he||(j=re),j===void 0&&(j=!1),c.addEventListener(p.toString(),w,j);else if(c.attachEvent)c.attachEvent(pa(p.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function hu(){function c(v){return p.call(c.src,c.listener,v)}const p=ef;return c}function ma(c,p,v,w,j){if(Array.isArray(p))for(var F=0;F<p.length;F++)ma(c,p[F],v,w,j);else w=y(w)?!!w.capture:!!w,v=fu(v),c&&c[ke]?(c=c.i,p=String(p).toString(),p in c.g&&(F=c.g[p],v=fa(F,v,w,j),-1<v&&(ii(F[v]),Array.prototype.splice.call(F,v,1),F.length==0&&(delete c.g[p],c.h--)))):c&&(c=xo(c))&&(p=c.g[p.toString()],c=-1,p&&(c=fa(p,v,w,j)),(v=-1<c?p[c]:null)&&vs(v))}function vs(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[ke])ys(p.i,c);else{var v=c.type,w=c.proxy;p.removeEventListener?p.removeEventListener(v,w,c.capture):p.detachEvent?p.detachEvent(pa(v),w):p.addListener&&p.removeListener&&p.removeListener(w),(v=xo(p))?(ys(v,c),v.h==0&&(v.src=null,p[Kn]=null)):ii(c)}}}function pa(c){return c in _s?_s[c]:_s[c]="on"+c}function ef(c,p){if(c.da)c=!0;else{p=new ve(p,this);var v=c.listener,w=c.ha||c.src;c.fa&&vs(c),c=v.call(w,p)}return c}function xo(c){return c=c[Kn],c instanceof wi?c:null}var jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function fu(c){return typeof c=="function"?c:(c[jt]||(c[jt]=function(p){return c.handleEvent(p)}),c[jt])}function xt(){$.call(this),this.i=new wi(this),this.M=this,this.F=null}z(xt,$),xt.prototype[ke]=!0,xt.prototype.removeEventListener=function(c,p,v,w){ma(this,c,p,v,w)};function Nt(c,p){var v,w=c.F;if(w)for(v=[];w;w=w.F)v.push(w);if(c=c.M,w=p.type||p,typeof p=="string")p=new te(p,c);else if(p instanceof te)p.target=p.target||c;else{var j=p;p=new te(w,c),O(p,j)}if(j=!0,v)for(var F=v.length-1;0<=F;F--){var re=p.g=v[F];j=Ai(re,w,!0,p)&&j}if(re=p.g=c,j=Ai(re,w,!0,p)&&j,j=Ai(re,w,!1,p)&&j,v)for(F=0;F<v.length;F++)re=p.g=v[F],j=Ai(re,w,!1,p)&&j}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var v=c.g[p],w=0;w<v.length;w++)ii(v[w]);delete c.g[p],c.h--}}this.F=null},xt.prototype.K=function(c,p,v,w){return this.i.add(String(c),p,!1,v,w)},xt.prototype.L=function(c,p,v,w){return this.i.add(String(c),p,!0,v,w)};function Ai(c,p,v,w){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,F=0;F<p.length;++F){var re=p[F];if(re&&!re.da&&re.capture==v){var Ge=re.listener,vt=re.ha||re.src;re.fa&&ys(c.i,re),j=Ge.call(vt,w)!==!1&&j}}return j&&!w.defaultPrevented}function du(c,p,v){if(typeof c=="function")v&&(c=R(c,v));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function Co(c){c.g=du(()=>{c.g=null,c.i&&(c.i=!1,Co(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class tf extends ${constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Co(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(c){$.call(this),this.h=c,this.g={}}z(Es,$);var ur=[];function Yt(c){ie(c.g,function(p,v){this.g.hasOwnProperty(v)&&vs(p)},c),c.g={}}Es.prototype.N=function(){Es.aa.N.call(this),Yt(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var On=m.JSON.stringify,rn=m.JSON.parse,nf=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Io(){}Io.prototype.h=null;function mu(c){return c.h||(c.h=c.i())}function Ts(){}var ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){te.call(this,"d")}z(cr,te);function Qn(){te.call(this,"c")}z(Qn,te);var Mn={},hr=null;function ga(){return hr=hr||new xt}Mn.La="serverreachability";function No(c){te.call(this,Mn.La,c)}z(No,te);function Si(c){const p=ga();Nt(p,new No(p))}Mn.STAT_EVENT="statevent";function fr(c,p){te.call(this,Mn.STAT_EVENT,c),this.stat=p}z(fr,te);function Pt(c){const p=ga();Nt(p,new fr(p,c))}Mn.Ma="timingevent";function Do(c,p){te.call(this,Mn.Ma,c),this.size=p}z(Do,te);function dr(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function mr(){this.g=!0}mr.prototype.xa=function(){this.g=!1};function Oo(c,p,v,w,j,F){c.info(function(){if(c.g)if(F)for(var re="",Ge=F.split("&"),vt=0;vt<Ge.length;vt++){var Ce=Ge[vt].split("=");if(1<Ce.length){var Ot=Ce[0];Ce=Ce[1];var Mt=Ot.split("_");re=2<=Mt.length&&Mt[1]=="type"?re+(Ot+"="+Ce+"&"):re+(Ot+"=redacted&")}}else re=null;else re=F;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+p+`
`+v+`
`+re})}function Mo(c,p,v,w,j,F,re){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+p+`
`+v+`
`+F+" "+re})}function Ri(c,p,v,w){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+si(c,v)+(w?" "+w:"")})}function pu(c,p){c.info(function(){return"TIMEOUT: "+p})}mr.prototype.info=function(){};function si(c,p){if(!c.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var w=v[c];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var F=j[0];if(F!="noop"&&F!="stop"&&F!="close")for(var re=1;re<j.length;re++)j[re]=""}}}}return On(v)}catch{return p}}var lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ai;function pr(){}z(pr,Io),pr.prototype.g=function(){return new XMLHttpRequest},pr.prototype.i=function(){return{}},ai=new pr;function oi(c,p,v,w){this.j=c,this.i=p,this.l=v,this.R=w||1,this.U=new Es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gu}function gu(){this.i=null,this.g="",this.h=!1}var ko={},xi={};function bs(c,p,v){c.L=1,c.v=Ss(ut(p)),c.m=v,c.P=!0,Ci(c,null)}function Ci(c,p){c.F=Date.now(),$n(c),c.A=ut(c.v);var v=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Di(v.i,"t",w),c.C=0,v=c.j.J,c.h=new gu,c.g=Ou(c.j,v?p:null,!c.m),0<c.O&&(c.M=new tf(R(c.Y,c,c.g),c.O)),p=c.U,v=c.g,w=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(ur[0]=j.toString()),j=ur);for(var F=0;F<j.length;F++){var re=da(v,j[F],w||p.handleEvent,!1,p.h||p);if(!re)break;p.g[re.key]=re}p=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Si(),Oo(c.i,c.u,c.A,c.l,c.R,c.m)}oi.prototype.ca=function(c){c=c.target;const p=this.M;p&&on(c)==3?p.j():this.Y(c)},oi.prototype.Y=function(c){try{if(c==this.g)e:{const Mt=on(this.g);var p=this.g.Ba();const Cr=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||Cs(this.g)))){this.J||Mt!=4||p==7||(p==8||0>=Cr?Si(3):Si(2)),ya(this);var v=this.g.Z();this.X=v;t:if(Ii(this)){var w=Cs(this.g);c="";var j=w.length,F=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sn(this),gr(this);var re="";break t}this.h.i=new m.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,c+=this.h.i.decode(w[p],{stream:!(F&&p==j-1)});w.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=v==200,Mo(this.i,this.u,this.A,this.l,this.R,Mt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,vt=this.g;if((Ge=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(Ge)){var Ce=Ge;break t}}Ce=null}if(v=Ce)Ri(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,li(this,v);else{this.o=!1,this.s=3,Pt(12),sn(this),gr(this);break e}}if(this.P){v=!0;let fn;for(;!this.J&&this.C<re.length;)if(fn=ws(this,re),fn==xi){Mt==4&&(this.s=4,Pt(14),v=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==ko){this.s=4,Pt(15),Ri(this.i,this.l,re,"[Invalid Chunk]"),v=!1;break}else Ri(this.i,this.l,fn,null),li(this,fn);if(Ii(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||re.length!=0||this.h.h||(this.s=1,Pt(16),v=!1),this.o=this.o&&v,!v)Ri(this.i,this.l,re,"[Invalid Chunked Response]"),sn(this),gr(this);else if(0<re.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Go(Ot),Ot.M=!0,Pt(11))}}else Ri(this.i,this.l,re,null),li(this,re);Mt==4&&sn(this),this.o&&!this.J&&(Mt==4?Iu(this.j,this):(this.o=!1,$n(this)))}else wu(this.g),v==400&&0<re.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),sn(this),gr(this)}}}catch{}finally{}};function Ii(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ws(c,p){var v=c.C,w=p.indexOf(`
`,v);return w==-1?xi:(v=Number(p.substring(v,w)),isNaN(v)?ko:(w+=1,w+v>p.length?xi:(p=p.slice(w,w+v),c.C=w+v,p)))}oi.prototype.cancel=function(){this.J=!0,sn(this)};function $n(c){c.S=Date.now()+c.I,mt(c,c.I)}function mt(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=dr(R(c.ba,c),p)}function ya(c){c.B&&(m.clearTimeout(c.B),c.B=null)}oi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(pu(this.i,this.A),this.L!=2&&(Si(),Pt(17)),sn(this),this.s=2,gr(this)):mt(this,this.S-c)};function gr(c){c.j.G==0||c.J||Iu(c.j,c)}function sn(c){ya(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Yt(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function li(c,p){try{var v=c.j;if(v.G!=0&&(v.g==c||yr(v.h,c))){if(!c.K&&yr(v.h,c)&&v.G==3){try{var w=v.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Rr(v),Sr(v);else break e;Fo(v),Pt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=dr(R(v.Za,v),6e3));if(1>=yu(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Mi(v,11)}else if((c.K||v.g==c)&&Rr(v),!le(p))for(j=v.Da.g.parse(p),p=0;p<j.length;p++){let Ce=j[p];if(v.T=Ce[0],Ce=Ce[1],v.G==2)if(Ce[0]=="c"){v.K=Ce[1],v.ia=Ce[2];const Ot=Ce[3];Ot!=null&&(v.la=Ot,v.j.info("VER="+v.la));const Mt=Ce[4];Mt!=null&&(v.Aa=Mt,v.j.info("SVER="+v.Aa));const Cr=Ce[5];Cr!=null&&typeof Cr=="number"&&0<Cr&&(w=1.5*Cr,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const fn=c.g;if(fn){const Ds=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var F=w.h;F.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(_r(F,F.h),F.h=null))}if(w.D){const ki=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;ki&&(w.ya=ki,Pe(w.I,w.D,ki))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var re=c;if(w.qa=Du(w,w.J?w.ia:null,w.W),re.K){kn(w.h,re);var Ge=re,vt=w.L;vt&&(Ge.I=vt),Ge.B&&(ya(Ge),$n(Ge)),w.g=re}else xu(w);0<v.i.length&&Sa(v)}else Ce[0]!="stop"&&Ce[0]!="close"||Mi(v,7);else v.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?Mi(v,7):qo(v):Ce[0]!="noop"&&v.l&&v.l.ta(Ce),v.v=0)}}Si(4)}catch{}}var rf=class{constructor(c,p){this.g=c,this.map=p}};function Vo(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Uo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function yu(c){return c.h?1:c.g?c.g.size:0}function yr(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function _r(c,p){c.g?c.g.add(p):c.h=p}function kn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Vo.prototype.cancel=function(){if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function an(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.D);return p}return X(c.i)}function _u(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],v=c.length,w=0;w<v;w++)p.push(c[w]);return p}p=[],v=0;for(w in c)p[v++]=c[w];return p}function sf(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var v=0;v<c;v++)p.push(v);return p}p=[],v=0;for(const w in c)p[v++]=w;return p}}}function _a(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var v=sf(c),w=_u(c),j=w.length,F=0;F<j;F++)p.call(void 0,w[F],v&&v[F],c)}var Lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(c,p){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var w=c[v].indexOf("="),j=null;if(0<=w){var F=c[v].substring(0,w);j=c[v].substring(w+1)}else F=c[v];p(F,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ni(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ni){this.h=c.h,vr(this,c.j),this.o=c.o,this.g=c.g,As(this,c.s),this.l=c.l;var p=c.i,v=new ui;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Ea(this,v),this.m=c.m}else c&&(p=String(c).match(Lo))?(this.h=!1,vr(this,p[1]||"",!0),this.o=Er(p[2]||""),this.g=Er(p[3]||"",!0),As(this,p[4]),this.l=Er(p[5]||"",!0),Ea(this,p[6]||"",!0),this.m=Er(p[7]||"")):(this.h=!1,this.i=new ui(null,this.h))}Ni.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Vn(p,jo,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Vn(p,jo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Vn(v,v.charAt(0)=="/"?Po:vu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Vn(v,lf)),c.join("")};function ut(c){return new Ni(c)}function vr(c,p,v){c.j=v?Er(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function As(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Ea(c,p,v){p instanceof ui?(c.i=p,Eu(c.i,c.h)):(v||(p=Vn(p,of)),c.i=new ui(p,c.h))}function Pe(c,p,v){c.i.set(p,v)}function Ss(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Er(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vn(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,af),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function af(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jo=/[#\/\?@]/g,vu=/[#\?:]/g,Po=/[#\?]/g,of=/[#\?@]/g,lf=/#/g;function ui(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Dt(c){c.g||(c.g=new Map,c.h=0,c.i&&va(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=ui.prototype,r.add=function(c,p){Dt(this),this.i=null,c=Tn(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function Ta(c,p){Dt(c),p=Tn(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function ba(c,p){return Dt(c),p=Tn(c,p),c.g.has(p)}r.forEach=function(c,p){Dt(this),this.g.forEach(function(v,w){v.forEach(function(j){c.call(p,j,w,this)},this)},this)},r.na=function(){Dt(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let w=0;w<p.length;w++){const j=c[w];for(let F=0;F<j.length;F++)v.push(p[w])}return v},r.V=function(c){Dt(this);let p=[];if(typeof c=="string")ba(this,c)&&(p=p.concat(this.g.get(Tn(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)p=p.concat(c[v])}return p},r.set=function(c,p){return Dt(this),this.i=null,c=Tn(this,c),ba(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Di(c,p,v){Ta(c,p),0<v.length&&(c.i=null,c.g.set(Tn(c,p),X(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var w=p[v];const F=encodeURIComponent(String(w)),re=this.V(w);for(w=0;w<re.length;w++){var j=F;re[w]!==""&&(j+="="+encodeURIComponent(String(re[w]))),c.push(j)}}return this.i=c.join("&")};function Tn(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Eu(c,p){p&&!c.j&&(Dt(c),c.i=null,c.g.forEach(function(v,w){var j=w.toLowerCase();w!=j&&(Ta(this,w),Di(this,j,v))},c)),c.j=p}function zo(c,p){const v=new mr;if(m.Image){const w=new Image;w.onload=U(hn,v,"TestLoadImage: loaded",!0,p,w),w.onerror=U(hn,v,"TestLoadImage: error",!1,p,w),w.onabort=U(hn,v,"TestLoadImage: abort",!1,p,w),w.ontimeout=U(hn,v,"TestLoadImage: timeout",!1,p,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else p(!1)}function Tu(c,p){const v=new mr,w=new AbortController,j=setTimeout(()=>{w.abort(),hn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:w.signal}).then(F=>{clearTimeout(j),F.ok?hn(v,"TestPingServer: ok",!0,p):hn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),hn(v,"TestPingServer: error",!1,p)})}function hn(c,p,v,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(v)}catch{}}function Yn(){this.g=new nf}function Bo(c,p,v){const w=v||"";try{_a(c,function(j,F){let re=j;y(j)&&(re=On(j)),p.push(w+F+"="+encodeURIComponent(re))})}catch(j){throw p.push(w+"type="+encodeURIComponent("_badmap")),j}}function ci(c){this.l=c.Ub||null,this.j=c.eb||!1}z(ci,Io),ci.prototype.g=function(){return new bn(this.l,this.j)},ci.prototype.i=(function(c){return function(){return c}})({});function bn(c,p){xt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(bn,xt),r=bn.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Tr(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wa(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?hi(this):Tr(this),this.readyState==3&&wa(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,hi(this))},r.Qa=function(c){this.g&&(this.response=c,hi(this))},r.ga=function(){this.g&&hi(this)};function hi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Tr(c)}r.setRequestHeader=function(c,p){this.u.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function Tr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(bn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Rs(c){let p="";return ie(c,function(v,w){p+=w,p+=":",p+=v,p+=`\r
`}),p}function br(c,p,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Rs(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Pe(c,p,v))}function et(c){xt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(et,xt);var Xt=/^https?$/i,Oi=["POST","PUT"];r=et.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,p,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ai.g(),this.v=this.o?mu(this.o):mu(ai),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){xs(this,F);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)v.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const F of w.keys())v.set(F,w.get(F));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),j=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Oi,p,void 0))||w||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,re]of v)this.g.setRequestHeader(F,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Aa(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){xs(this,F)}};function xs(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,wr(c),Ar(c)}function wr(c){c.A||(c.A=!0,Nt(c,"complete"),Nt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Nt(this,"complete"),Nt(this,"abort"),Ar(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ar(this,!0)),et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?bu(this):this.bb())},r.bb=function(){bu(this)};function bu(c){if(c.h&&typeof f<"u"&&(!c.v[1]||on(c)!=4||c.Z()!=2)){if(c.u&&on(c)==4)du(c.Ea,0,c);else if(Nt(c,"readystatechange"),on(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var w;if(w=re===0){var j=String(c.D).match(Lo)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),w=!Xt.test(j?j.toLowerCase():"")}v=w}if(v)Nt(c,"complete"),Nt(c,"success");else{c.m=6;try{var F=2<on(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",wr(c)}}finally{Ar(c)}}}}function Ar(c,p){if(c.g){Aa(c);const v=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Nt(c,"ready");try{v.onreadystatechange=w}catch{}}}function Aa(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function on(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),rn(p)}};function Cs(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wu(c){const p={};c=(c.g&&2<=on(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(le(c[w]))continue;var v=k(c[w]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=p[j]||[];p[j]=F,F.push(v)}x(p,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function Au(c){this.Aa=0,this.i=[],this.j=new mr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,c),this.cb=Is("retryDelaySeedMs",1e4,c),this.Wa=Is("forwardChannelMaxRetries",2,c),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Vo(c&&c.concurrentRequestLimit),this.Da=new Yn,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Au.prototype,r.la=8,r.G=1,r.connect=function(c,p,v,w){Pt(0),this.W=c,this.H=p||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Du(this,null,this.W),Sa(this)};function qo(c){if(Su(c),c.G==3){var p=c.U++,v=ut(c.I);if(Pe(v,"SID",c.K),Pe(v,"RID",p),Pe(v,"TYPE","terminate"),Ns(c,v),p=new oi(c,c.j,p),p.L=2,p.v=Ss(ut(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=p.v,v=!0),v||(p.g=Ou(p.j,null),p.g.ea(p.v)),p.F=Date.now(),$n(p)}Ko(c)}function Sr(c){c.g&&(Go(c),c.g.cancel(),c.g=null)}function Su(c){Sr(c),c.u&&(m.clearTimeout(c.u),c.u=null),Rr(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Sa(c){if(!Uo(c.h)&&!c.s){c.s=!0;var p=c.Ga;ae||Fe(),ge||(ae(),ge=!0),je.add(p,c),c.B=0}}function uf(c,p){return yu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=dr(R(c.Ga,c,p),Nu(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new oi(this,this.j,c);let F=this.o;if(this.S&&(F?(F=S(F),O(F,this.S)):F=this.S),this.m!==null||this.O||(j.H=F,F=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Ho(this,j,p),v=ut(this.I),Pe(v,"RID",c),Pe(v,"CVER",22),this.D&&Pe(v,"X-HTTP-Session-Id",this.D),Ns(this,v),F&&(this.O?p="headers="+encodeURIComponent(String(Rs(F)))+"&"+p:this.m&&br(v,this.m,F)),_r(this.h,j),this.Ua&&Pe(v,"TYPE","init"),this.P?(Pe(v,"$req",p),Pe(v,"SID","null"),j.T=!0,bs(j,v,null)):bs(j,v,p),this.G=2}}else this.G==3&&(c?Ru(this,c):this.i.length==0||Uo(this.h)||Ru(this))};function Ru(c,p){var v;p?v=p.l:v=c.U++;const w=ut(c.I);Pe(w,"SID",c.K),Pe(w,"RID",v),Pe(w,"AID",c.T),Ns(c,w),c.m&&c.o&&br(w,c.m,c.o),v=new oi(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Ho(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),_r(c.h,v),bs(v,w,p)}function Ns(c,p){c.H&&ie(c.H,function(v,w){Pe(p,w,v)}),c.l&&_a({},function(v,w){Pe(p,w,v)})}function Ho(c,p,v){v=Math.min(c.i.length,v);var w=c.l?R(c.l.Na,c.l,c):null;e:{var j=c.i;let F=-1;for(;;){const re=["count="+v];F==-1?0<v?(F=j[0].g,re.push("ofs="+F)):F=0:re.push("ofs="+F);let Ge=!0;for(let vt=0;vt<v;vt++){let Ce=j[vt].g;const Ot=j[vt].map;if(Ce-=F,0>Ce)F=Math.max(0,j[vt].g-100),Ge=!1;else try{Bo(Ot,re,"req"+Ce+"_")}catch{w&&w(Ot)}}if(Ge){w=re.join("&");break e}}}return c=c.i.splice(0,v),p.D=c,w}function xu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ae||Fe(),ge||(ae(),ge=!0),je.add(p,c),c.v=0}}function Fo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=dr(R(c.Fa,c),Nu(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=dr(R(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Sr(this),Cu(this))};function Go(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Cu(c){c.g=new oi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=ut(c.qa);Pe(p,"RID","rpc"),Pe(p,"SID",c.K),Pe(p,"AID",c.T),Pe(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(p,"TO",c.ja),Pe(p,"TYPE","xmlhttp"),Ns(c,p),c.m&&c.o&&br(p,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ss(ut(p)),v.m=null,v.P=!0,Ci(v,c)}r.Za=function(){this.C!=null&&(this.C=null,Sr(this),Fo(this),Pt(19))};function Rr(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Iu(c,p){var v=null;if(c.g==p){Rr(c),Go(c),c.g=null;var w=2}else if(yr(c.h,p))v=p.D,kn(c.h,p),w=1;else return;if(c.G!=0){if(p.o)if(w==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var j=c.B;w=ga(),Nt(w,new Do(w,v)),Sa(c)}else xu(c);else if(j=p.s,j==3||j==0&&0<p.X||!(w==1&&uf(c,p)||w==2&&Fo(c)))switch(v&&0<v.length&&(p=c.h,p.i=p.i.concat(v)),j){case 1:Mi(c,5);break;case 4:Mi(c,10);break;case 3:Mi(c,6);break;default:Mi(c,2)}}}function Nu(c,p){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*p}function Mi(c,p){if(c.j.info("Error code "+p),p==2){var v=R(c.fb,c),w=c.Xa;const j=!w;w=new Ni(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||vr(w,"https"),Ss(w),j?zo(w.toString(),v):Tu(w.toString(),v)}else Pt(2);c.G=0,c.l&&c.l.sa(p),Ko(c),Su(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Ko(c){if(c.G=0,c.ka=[],c.l){const p=an(c.h);(p.length!=0||c.i.length!=0)&&(G(c.ka,p),G(c.ka,c.i),c.h.i.length=0,X(c.i),c.i.length=0),c.l.ra()}}function Du(c,p,v){var w=v instanceof Ni?ut(v):new Ni(v);if(w.g!="")p&&(w.g=p+"."+w.g),As(w,w.s);else{var j=m.location;w=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var F=new Ni(null);w&&vr(F,w),p&&(F.g=p),j&&As(F,j),v&&(F.l=v),w=F}return v=c.D,p=c.ya,v&&p&&Pe(w,v,p),Pe(w,"VER",c.la),Ns(c,w),w}function Ou(c,p,v){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new et(new ci({eb:v})):new et(c.pa),p.Ha(c.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}r=Mu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ra(){}Ra.prototype.g=function(c,p){return new ln(c,p)};function ln(c,p){xt.call(this),this.g=new Au(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!le(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!le(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new xr(this)}z(ln,xt),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){qo(this.g)},ln.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=On(c),c=v);p.i.push(new rf(p.Ya++,c)),p.G==3&&Sa(p)},ln.prototype.N=function(){this.g.l=null,delete this.j,qo(this.g),delete this.g,ln.aa.N.call(this)};function ku(c){cr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const v in p){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}z(ku,cr);function Vu(){Qn.call(this),this.status=1}z(Vu,Qn);function xr(c){this.g=c}z(xr,Mu),xr.prototype.ua=function(){Nt(this.g,"a")},xr.prototype.ta=function(c){Nt(this.g,new ku(c))},xr.prototype.sa=function(c){Nt(this.g,new Vu)},xr.prototype.ra=function(){Nt(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,pT=function(){return new Ra},mT=function(){return ga()},dT=Mn,km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,th=lt,zt.COMPLETE="complete",fT=zt,Ts.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Ol=Ts,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,hT=et}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});const d0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=new ap("@firebase/firestore");function Nl(){return na.logLevel}function de(r,...e){if(na.logLevel<=Ue.DEBUG){const n=e.map(vp);na.debug(`Firestore (${Ao}): ${r}`,...n)}}function or(r,...e){if(na.logLevel<=Ue.ERROR){const n=e.map(vp);na.error(`Firestore (${Ao}): ${r}`,...n)}}function mo(r,...e){if(na.logLevel<=Ue.WARN){const n=e.map(vp);na.warn(`Firestore (${Ao}): ${r}`,...n)}}function vp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r="Unexpected state"){const e=`FIRESTORE (${Ao}) INTERNAL ASSERTION FAILED: `+r;throw or(e),new Error(e)}function $e(r,e){r||Te()}function Ae(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Wt.UNAUTHENTICATED)))}shutdown(){}}class hx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class fx{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new os;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new os,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new os)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string"),new gT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Wt(e)}}class dx{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mx{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new dx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class px{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){$e(this.o===void 0);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,de("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string"),this.R=n.token,new px(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=yx(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%e.length))}return s}}function qe(r,e){return r<e?-1:r>e?1:0}function po(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new at(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.timestamp=e}static fromTimestamp(e){return new we(e)}static min(){return new we(new at(0,0))}static max(){return new we(new at(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(),s===void 0?s=e.length-n:s>e.length-n&&Te(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Fl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fl?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=e.get(o),f=n.get(o);if(u<f)return-1;if(u>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class it extends Fl{construct(e,n,s){return new it(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new it(n)}static emptyPath(){return new it([])}}const _x=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Fl{construct(e,n,s){return new Kt(e,n,s)}static isValidIdentifier(e){return _x.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ue(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(it.fromString(e))}static fromName(e){return new ye(it.fromString(e).popFirst(5))}static empty(){return new ye(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new it(e.slice()))}}function vx(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=we.fromTimestamp(s===1e9?new at(n+1,0):new at(n,s));return new cs(o,ye.empty(),e)}function Ex(r){return new cs(r.readTime,r.key,-1)}class cs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new cs(we.min(),ye.empty(),-1)}static max(){return new cs(we.max(),ye.empty(),-1)}}function Tx(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(r.documentKey,e.documentKey),n!==0?n:qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==bx)throw r;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,s)=>{n(e)}))}static reject(e){return new W(((n,s)=>{s(e)}))}static waitFor(e){return new W(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(g=>s(g)))})),f=!0,u===o&&n()}))}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next((o=>o?W.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new W(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((T=>{f[y]=T,++m,m===u&&s(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new W(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function Ax(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nu(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ep.oe=-1;function Oh(r){return r==null}function mh(r){return r===0&&1/r==-1/0}function Sx(r){return typeof r=="number"&&Number.isInteger(r)&&!mh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function oa(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function _T(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Gt.RED,this.left=o??Gt.EMPTY,this.right=u??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Gt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Gt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(e){return new p0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class p0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new Qt(Kt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new vT("Invalid base64 string: "+u):u}})(e);return new $t(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new $t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const Rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if($e(!!r),typeof r=="string"){let e=0;const n=Rx.exec(r);if($e(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ia(r){return typeof r=="string"?$t.fromBase64String(r):$t.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bp(r){const e=r.mapValue.fields.__previous_value__;return Tp(e)?bp(e):e}function Gl(r){const e=hs(r.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,s,o,u,f,m,g,y){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y}}class Kl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc={mapValue:{}};function ra(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Tp(r)?4:Ix(r)?9007199254740991:Cx(r)?10:11:Te()}function bi(r,e){if(r===e)return!0;const n=ra(r);if(n!==ra(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Gl(r).isEqual(Gl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=hs(o.timestampValue),m=hs(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return ia(o.bytesValue).isEqual(ia(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return _t(o.geoPointValue.latitude)===_t(u.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return _t(o.integerValue)===_t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=_t(o.doubleValue),m=_t(u.doubleValue);return f===m?mh(f)===mh(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return po(r.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(m0(f)!==m0(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!bi(f[g],m[g])))return!1;return!0})(r,e);default:return Te()}}function Ql(r,e){return(r.values||[]).find((n=>bi(n,e)))!==void 0}function go(r,e){if(r===e)return 0;const n=ra(r),s=ra(e);if(n!==s)return qe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=_t(u.integerValue||u.doubleValue),g=_t(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return g0(r.timestampValue,e.timestampValue);case 4:return g0(Gl(r),Gl(e));case 5:return qe(r.stringValue,e.stringValue);case 6:return(function(u,f){const m=ia(u),g=ia(f);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),g=f.split("/");for(let y=0;y<m.length&&y<g.length;y++){const T=qe(m[y],g[y]);if(T!==0)return T}return qe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=qe(_t(u.latitude),_t(f.latitude));return m!==0?m:qe(_t(u.longitude),_t(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return y0(r.arrayValue,e.arrayValue);case 10:return(function(u,f){var m,g,y,T;const A=u.fields||{},R=f.fields||{},U=(m=A.value)===null||m===void 0?void 0:m.arrayValue,z=(g=R.value)===null||g===void 0?void 0:g.arrayValue,X=qe(((y=U==null?void 0:U.values)===null||y===void 0?void 0:y.length)||0,((T=z==null?void 0:z.values)===null||T===void 0?void 0:T.length)||0);return X!==0?X:y0(U,z)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Fc.mapValue&&f===Fc.mapValue)return 0;if(u===Fc.mapValue)return 1;if(f===Fc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=f.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let A=0;A<g.length&&A<T.length;++A){const R=qe(g[A],T[A]);if(R!==0)return R;const U=go(m[g[A]],y[T[A]]);if(U!==0)return U}return qe(g.length,T.length)})(r.mapValue,e.mapValue);default:throw Te()}}function g0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qe(r,e);const n=hs(r),s=hs(e),o=qe(n.seconds,s.seconds);return o!==0?o:qe(n.nanos,s.nanos)}function y0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=go(n[o],s[o]);if(u)return u}return qe(n.length,s.length)}function yo(r){return Vm(r)}function Vm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=hs(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return ia(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ye.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Vm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Vm(n.fields[f])}`;return o+"}"})(r.mapValue):Te()}function _0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Um(r){return!!r&&"integerValue"in r}function wp(r){return!!r&&"arrayValue"in r}function v0(r){return!!r&&"nullValue"in r}function E0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function nh(r){return!!r&&"mapValue"in r}function Cx(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ll(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return oa(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ll(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(r.arrayValue.values[n]);return e}return Object.assign({},r)}function Ix(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=Kt.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Ll(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){oa(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new _n(Ll(this.value))}}function ET(r){const e=[];return oa(r.fields,((n,s)=>{const o=new Kt([n]);if(nh(s)){const u=ET(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new en(e,0,we.min(),we.min(),we.min(),_n.empty(),0)}static newFoundDocument(e,n,s,o){return new en(e,1,n,we.min(),s,o,0)}static newNoDocument(e,n){return new en(e,2,n,we.min(),we.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,we.min(),we.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.position=e,this.inclusive=n}}function T0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=ye.comparator(ye.fromName(f.referenceValue),n.key):s=go(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function b0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!bi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Nx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{}class St extends TT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Ox(e,n,s):n==="array-contains"?new Vx(e,s):n==="in"?new Ux(e,s):n==="not-in"?new Lx(e,s):n==="array-contains-any"?new jx(e,s):new St(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Mx(e,s):new kx(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(go(n,this.value)):n!==null&&ra(this.value)===ra(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends TT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ti(e,n)}matches(e){return bT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bT(r){return r.op==="and"}function wT(r){return Dx(r)&&bT(r)}function Dx(r){for(const e of r.filters)if(e instanceof ti)return!1;return!0}function Lm(r){if(r instanceof St)return r.field.canonicalString()+r.op.toString()+yo(r.value);if(wT(r))return r.filters.map((e=>Lm(e))).join(",");{const e=r.filters.map((n=>Lm(n))).join(",");return`${r.op}(${e})`}}function AT(r,e){return r instanceof St?(function(s,o){return o instanceof St&&s.op===o.op&&s.field.isEqual(o.field)&&bi(s.value,o.value)})(r,e):r instanceof ti?(function(s,o){return o instanceof ti&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&AT(f,o.filters[m])),!0):!1})(r,e):void Te()}function ST(r){return r instanceof St?(function(n){return`${n.field.canonicalString()} ${n.op} ${yo(n.value)}`})(r):r instanceof ti?(function(n){return n.op.toString()+" {"+n.getFilters().map(ST).join(" ,")+"}"})(r):"Filter"}class Ox extends St{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mx extends St{constructor(e,n){super(e,"in",n),this.keys=RT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class kx extends St{constructor(e,n){super(e,"not-in",n),this.keys=RT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function RT(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((s=>ye.fromName(s.referenceValue)))}class Vx extends St{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wp(n)&&Ql(n.arrayValue,this.value)}}class Ux extends St{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class Lx extends St{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ql(this.value.arrayValue,n)}}class jx extends St{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ql(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.ue=null}}function w0(r,e=null,n=[],s=[],o=null,u=null,f=null){return new Px(r,e,n,s,o,u,f)}function Ap(r){const e=Ae(r);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Lm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>yo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>yo(s))).join(",")),e.ue=n}return e.ue}function Sp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!Nx(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!AT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!b0(r.startAt,e.startAt)&&b0(r.endAt,e.endAt)}function jm(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zx(r,e,n,s,o,u,f,m){return new iu(r,e,n,s,o,u,f,m)}function Rp(r){return new iu(r)}function A0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xT(r){return r.collectionGroup!==null}function jl(r){const e=Ae(r);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Qt(Kt.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new gh(u,s))})),n.has(Kt.keyField().canonicalString())||e.ce.push(new gh(Kt.keyField(),s))}return e.ce}function vi(r){const e=Ae(r);return e.le||(e.le=Bx(e,jl(r))),e.le}function Bx(r,e){if(r.limitType==="F")return w0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new gh(o.field,u)}));const n=r.endAt?new ph(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new ph(r.startAt.position,r.startAt.inclusive):null;return w0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Pm(r,e){const n=r.filters.concat([e]);return new iu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function zm(r,e,n){return new iu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Mh(r,e){return Sp(vi(r),vi(e))&&r.limitType===e.limitType}function CT(r){return`${Ap(vi(r))}|lt:${r.limitType}`}function to(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>ST(o))).join(", ")}]`),Oh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>yo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>yo(o))).join(",")),`Target(${s})`})(vi(r))}; limitType=${r.limitType})`}function kh(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of jl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,g){const y=T0(f,m,g);return f.inclusive?y<=0:y<0})(s.startAt,jl(s),o)||s.endAt&&!(function(f,m,g){const y=T0(f,m,g);return f.inclusive?y>=0:y>0})(s.endAt,jl(s),o))})(r,e)}function qx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function IT(r){return(e,n)=>{let s=!1;for(const o of jl(r)){const u=Hx(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function Hx(r,e,n){const s=r.field.isKeyField()?ye.comparator(e.key,n.key):(function(u,f,m){const g=f.data.field(u),y=m.data.field(u);return g!==null&&y!==null?go(g,y):Te()})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return _T(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new ot(ye.comparator);function lr(){return Fx}const NT=new ot(ye.comparator);function Ml(...r){let e=NT;for(const n of r)e=e.insert(n.key,n);return e}function DT(r){let e=NT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Xs(){return Pl()}function OT(){return Pl()}function Pl(){return new So((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Gx=new ot(ye.comparator),Kx=new Qt(ye.comparator);function Me(...r){let e=Kx;for(const n of r)e=e.add(n);return e}const Qx=new Qt(qe);function $x(){return Qx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function MT(r){return{integerValue:""+r}}function Yx(r,e){return Sx(e)?MT(e):xp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this._=void 0}}function Xx(r,e,n){return r instanceof yh?(function(o,u){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Tp(u)&&(u=bp(u)),u&&(f.fields.__previous_value__=u),{mapValue:f}})(n,e):r instanceof _o?VT(r,e):r instanceof vo?UT(r,e):(function(o,u){const f=kT(o,u),m=S0(f)+S0(o.Pe);return Um(f)&&Um(o.Pe)?MT(m):xp(o.serializer,m)})(r,e)}function Jx(r,e,n){return r instanceof _o?VT(r,e):r instanceof vo?UT(r,e):n}function kT(r,e){return r instanceof _h?(function(s){return Um(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class yh extends Vh{}class _o extends Vh{constructor(e){super(),this.elements=e}}function VT(r,e){const n=LT(e);for(const s of r.elements)n.some((o=>bi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class vo extends Vh{constructor(e){super(),this.elements=e}}function UT(r,e){let n=LT(e);for(const s of r.elements)n=n.filter((o=>!bi(o,s)));return{arrayValue:{values:n}}}class _h extends Vh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function S0(r){return _t(r.integerValue||r.doubleValue)}function LT(r){return wp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){this.field=e,this.transform=n}}function Zx(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof _o&&o instanceof _o||s instanceof vo&&o instanceof vo?po(s.elements,o.elements,bi):s instanceof _h&&o instanceof _h?bi(s.Pe,o.Pe):s instanceof yh&&o instanceof yh})(r.transform,e.transform)}class Wx{constructor(e,n){this.version=e,this.transformResults=n}}class vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Uh{}function PT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Lh(r.key,vn.none()):new ru(r.key,r.data,vn.none());{const n=r.data,s=_n.empty();let o=new Qt(Kt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new ps(r.key,s,new Nn(o.toArray()),vn.none())}}function eC(r,e,n){r instanceof ru?(function(o,u,f){const m=o.value.clone(),g=x0(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof ps?(function(o,u,f){if(!ih(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=x0(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(zT(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function zl(r,e,n,s){return r instanceof ru?(function(u,f,m,g){if(!ih(u.precondition,f))return m;const y=u.value.clone(),T=C0(u.fieldTransforms,g,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof ps?(function(u,f,m,g){if(!ih(u.precondition,f))return m;const y=C0(u.fieldTransforms,g,f),T=f.data;return T.setAll(zT(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(r,e,n,s):(function(u,f,m){return ih(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function tC(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=kT(s.transform,o||null);u!=null&&(n===null&&(n=_n.empty()),n.set(s.field,u))}return n||null}function R0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&po(s,o,((u,f)=>Zx(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ru extends Uh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ps extends Uh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function zT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function x0(r,e,n){const s=new Map;$e(r.length===n.length);for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,Jx(f,m,n[o]))}return s}function C0(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,Xx(u,f,e))}return s}class Lh extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nC extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&eC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=zl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=zl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=OT();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=PT(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Me())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,((n,s)=>R0(n,s)))&&po(this.baseMutations,e.baseMutations,((n,s)=>R0(n,s)))}}class Cp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){$e(e.mutations.length===s.length);let o=(function(){return Gx})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Cp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Le;function aC(r){switch(r){default:return Te();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function BT(r){if(r===void 0)return or("GRPC error has no .code"),Z.UNKNOWN;switch(r){case At.OK:return Z.OK;case At.CANCELLED:return Z.CANCELLED;case At.UNKNOWN:return Z.UNKNOWN;case At.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case At.INTERNAL:return Z.INTERNAL;case At.UNAVAILABLE:return Z.UNAVAILABLE;case At.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case At.NOT_FOUND:return Z.NOT_FOUND;case At.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case At.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case At.ABORTED:return Z.ABORTED;case At.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case At.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case At.DATA_LOSS:return Z.DATA_LOSS;default:return Te()}}(Le=At||(At={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Ws([4294967295,4294967295],0);function I0(r){const e=oC().encode(r),n=new cT;return n.update(e),new Uint8Array(n.digest())}function N0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ws([n,s],0),new Ws([o,u],0)]}class Ip{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new kl(`Invalid padding: ${n}`);if(s<0)throw new kl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new kl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new kl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ws.fromNumber(this.Ie)}Ee(e,n,s){let o=e.add(n.multiply(Ws.fromNumber(s)));return o.compare(lC)===1&&(o=new Ws([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=I0(e),[s,o]=N0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ee(s,o,u);if(!this.de(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Ip(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.Ie===0)return;const n=I0(e),[s,o]=N0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ee(s,o,u);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new jh(we.min(),o,new ot(qe),lr(),Me())}}class su{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new su(s,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,s,o){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=o}}class qT{constructor(e,n){this.targetId=e,this.me=n}}class HT{constructor(e,n,s=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class D0{constructor(){this.fe=0,this.ge=M0(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),n=Me(),s=Me();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te()}})),new su(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=M0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uC{constructor(e){this.Le=e,this.Be=new Map,this.ke=lr(),this.qe=O0(),this.Qe=new ot(qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:Te()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((s,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,s=e.me.count,o=this.Je(n);if(o){const u=o.target;if(jm(u))if(s===0){const f=new ye(u.path);this.Ue(n,f,en.newNoDocument(f,we.min()))}else $e(s===1);else{const f=this.Ye(n);if(f!==s){const m=this.Ze(e),g=m?this.Xe(m,e,f):1;if(g!==0){this.je(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,y)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=ia(s).toUint8Array()}catch(g){if(g instanceof vT)return mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ip(f,o,u)}catch(g){return mo(g instanceof kl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Le.tt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(n,u,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((u,f)=>{const m=this.Je(f);if(m){if(u.current&&jm(m.target)){const g=new ye(m.target.path);this.ke.get(g)!==null||this.it(f,g)||this.Ue(f,g,en.newNoDocument(g,e))}u.be&&(n.set(f,u.ve()),u.Ce())}}));let s=Me();this.qe.forEach(((u,f)=>{let m=!0;f.forEachWhile((g=>{const y=this.Je(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.ke.forEach(((u,f)=>f.setReadTime(e)));const o=new jh(e,n,this.Qe,this.ke,s);return this.ke=lr(),this.qe=O0(),this.Qe=new ot(qe),o}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new D0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qt(qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new D0),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function O0(){return new ot(ye.comparator)}function M0(){return new ot(ye.comparator)}const cC={asc:"ASCENDING",desc:"DESCENDING"},hC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fC={and:"AND",or:"OR"};class dC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bm(r,e){return r.useProto3Json||Oh(e)?e:{value:e}}function vh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function mC(r,e){return vh(r,e.toTimestamp())}function Ei(r){return $e(!!r),we.fromTimestamp((function(n){const s=hs(n);return new at(s.seconds,s.nanos)})(r))}function Np(r,e){return qm(r,e).canonicalString()}function qm(r,e){const n=(function(o){return new it(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function GT(r){const e=it.fromString(r);return $e(XT(e)),e}function Hm(r,e){return Np(r.databaseId,e.path)}function gm(r,e){const n=GT(e);if(n.get(1)!==r.databaseId.projectId)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ye(QT(n))}function KT(r,e){return Np(r.databaseId,e)}function pC(r){const e=GT(r);return e.length===4?it.emptyPath():QT(e)}function Fm(r){return new it(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function QT(r){return $e(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function k0(r,e,n){return{name:Hm(r,e),fields:n.value.mapValue.fields}}function gC(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?($e(T===void 0||typeof T=="string"),$t.fromBase64String(T||"")):($e(T===void 0||T instanceof Buffer||T instanceof Uint8Array),$t.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const T=y.code===void 0?Z.UNKNOWN:BT(y.code);return new ue(T,y.message||"")})(f);n=new HT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=gm(r,s.document.name),u=Ei(s.document.updateTime),f=s.document.createTime?Ei(s.document.createTime):we.min(),m=new _n({mapValue:{fields:s.document.fields}}),g=en.newFoundDocument(o,u,f,m),y=s.targetIds||[],T=s.removedTargetIds||[];n=new rh(y,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=gm(r,s.document),u=s.readTime?Ei(s.readTime):we.min(),f=en.newNoDocument(o,u),m=s.removedTargetIds||[];n=new rh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=gm(r,s.document),u=s.removedTargetIds||[];n=new rh([],u,o,null)}else{if(!("filter"in e))return Te();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new sC(o,u),m=s.targetId;n=new qT(m,f)}}return n}function yC(r,e){let n;if(e instanceof ru)n={update:k0(r,e.key,e.value)};else if(e instanceof Lh)n={delete:Hm(r,e.key)};else if(e instanceof ps)n={update:k0(r,e.key,e.data),updateMask:RC(e.fieldMask)};else{if(!(e instanceof nC))return Te();n={verify:Hm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof yh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof _o)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof vo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof _h)return{fieldPath:f.field.canonicalString(),increment:m.Pe};throw Te()})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:mC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te()})(r,e.precondition)),n}function _C(r,e){return r&&r.length>0?($e(e!==void 0),r.map((n=>(function(o,u){let f=o.updateTime?Ei(o.updateTime):Ei(u);return f.isEqual(we.min())&&(f=Ei(u)),new Wx(f,o.transformResults||[])})(n,e)))):[]}function vC(r,e){return{documents:[KT(r,e.path)]}}function EC(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=KT(r,o);const u=(function(y){if(y.length!==0)return YT(ti.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((T=>(function(R){return{field:no(R.field),direction:wC(R.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Bm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:n,parent:o}}function TC(r){let e=pC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){$e(s===1);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(A){const R=$T(A);return R instanceof ti&&wT(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((R=>(function(z){return new gh(io(z.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(R)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let R;return R=typeof A=="object"?A.value:A,Oh(R)?null:R})(n.limit));let g=null;n.startAt&&(g=(function(A){const R=!!A.before,U=A.values||[];return new ph(U,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const R=!A.before,U=A.values||[];return new ph(U,R)})(n.endAt)),zx(e,o,f,u,m,"F",g,y)}function bC(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $T(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=io(n.unaryFilter.field);return St.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=io(n.unaryFilter.field);return St.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=io(n.unaryFilter.field);return St.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=io(n.unaryFilter.field);return St.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Te()}})(r):r.fieldFilter!==void 0?(function(n){return St.create(io(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return ti.create(n.compositeFilter.filters.map((s=>$T(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te()}})(n.compositeFilter.op))})(r):Te()}function wC(r){return cC[r]}function AC(r){return hC[r]}function SC(r){return fC[r]}function no(r){return{fieldPath:r.canonicalString()}}function io(r){return Kt.fromServerFormat(r.fieldPath)}function YT(r){return r instanceof St?(function(n){if(n.op==="=="){if(E0(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(v0(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(E0(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(v0(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:AC(n.op),value:n.value}}})(r):r instanceof ti?(function(n){const s=n.getFilters().map((o=>YT(o)));return s.length===1?s[0]:{compositeFilter:{op:SC(n.op),filters:s}}})(r):Te()}function RC(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function XT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,s,o,u=we.min(),f=we.min(),m=$t.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.ct=e}}function CC(r){const e=TC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.un=new NC}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(cs.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class NC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Qt(it.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Qt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Eo(0)}static kn(){return new Eo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.changes=new So((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&zl(s.mutation,o,Nn.empty(),at.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Me()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Me()){const o=Xs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Ml();return u.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Xs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Me())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=lr();const f=Pl(),m=(function(){return Pl()})();return n.forEach(((g,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof ps)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),zl(T.mutation,y,T.mutation.getFieldMask(),at.now())):f.set(y.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,T)=>f.set(y,T))),n.forEach(((y,T)=>{var A;return m.set(y,new OC(T,(A=f.get(y))!==null&&A!==void 0?A:null))})),m)))}recalculateAndSaveOverlays(e,n){const s=Pl();let o=new ot(((f,m)=>f-m)),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||Nn.empty();T=m.applyToLocalView(y,T),s.set(g,T);const A=(o.get(m.batchId)||Me()).add(g);o=o.insert(m.batchId,A)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,T=g.value,A=OT();T.forEach((R=>{if(!u.has(R)){const U=PT(n.get(R),s.get(R));U!==null&&A.set(R,U),u=u.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,A))}return W.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return ye.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):W.resolve(Xs());let m=-1,g=u;return f.next((y=>W.forEach(y,((T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((R=>{g=g.insert(T,R)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Me()))).next((T=>({batchId:m,changes:DT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((s=>{let o=Ml();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Ml();return this.indexManager.getCollectionParents(e,u).next((m=>W.forEach(m,(g=>{const y=(function(A,R){return new iu(R,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((T=>{T.forEach(((A,R)=>{f=f.insert(A,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((g,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,en.newInvalidDocument(T)))}));let m=Ml();return f.forEach(((g,y)=>{const T=u.get(g);T!==void 0&&zl(T.mutation,y,Nn.empty(),at.now()),kh(n,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ei(o.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:CC(o.bundledQuery),readTime:Ei(o.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.overlays=new ot(ye.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Xs();return W.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.ht(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Ir.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const o=Xs(),u=n.length+1,f=new ye(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return W.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ot(((y,T)=>y-T));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=u.get(y.largestBatchId);T===null&&(T=Xs(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=Xs(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>m.set(y,T))),!(m.size()>=o)););return W.resolve(m)}ht(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Ir.get(o.largestBatchId).delete(s.key);this.Ir.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new rC(n,s));let u=this.Ir.get(n);u===void 0&&(u=Me(),this.Ir.set(n,u)),this.Ir.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(){this.Tr=new Qt(Vt.Er),this.dr=new Qt(Vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new Vt(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Vr(new Vt(e,n))}mr(e,n){e.forEach((s=>this.removeReference(s,n)))}gr(e){const n=new ye(new it([])),s=new Vt(n,e),o=new Vt(n,e+1),u=[];return this.dr.forEachInRange([s,o],(f=>{this.Vr(f),u.push(f.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ye(new it([])),s=new Vt(n,e),o=new Vt(n,e+1);let u=Me();return this.dr.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Vt(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ye.comparator(e.key,n.key)||qe(e.wr,n.wr)}static Ar(e,n){return qe(e.wr,n.wr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qt(Vt.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new iC(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.br=this.br.add(new Vt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.vr(s),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Vt(n,0),o=new Vt(n,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([s,o],(f=>{const m=this.Dr(f.wr);u.push(m)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Qt(qe);return n.forEach((o=>{const u=new Vt(o,0),f=new Vt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,f],(m=>{s=s.add(m.wr)}))})),W.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ye.isDocumentKey(u)||(u=u.child(""));const f=new Vt(new ye(u),0);let m=new Qt(qe);return this.br.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.wr)),!0)}),f),W.resolve(this.Cr(m))}Cr(e){const n=[];return e.forEach((s=>{const o=this.Dr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return W.forEach(n.mutations,(o=>{const u=new Vt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,n){const s=new Vt(n,0),o=this.br.firstAfterOrEqual(s);return W.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.Mr=e,this.docs=(function(){return new ot(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let s=lr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():en.newInvalidDocument(o))})),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=lr();const f=n.path,m=new ye(f.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||Tx(Ex(T),s)<=0||(o.has(T.key)||kh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Te()}Or(e,n){return W.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new PC(this)}getSize(e){return W.resolve(this.size)}}class PC extends DC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(s)})),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.persistence=e,this.Nr=new So((n=>Ap(n)),Sp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dp,this.targetCount=0,this.kr=Eo.Bn()}forEachTarget(e,n){return this.Nr.forEach(((s,o)=>n(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Nr.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Nr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),W.waitFor(u).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ep(0),this.Kr=!1,this.Kr=!0,this.$r=new UC,this.referenceDelegate=e(this),this.Ur=new zC(this),this.indexManager=new IC,this.remoteDocumentCache=(function(o){return new jC(o)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new xC(n),this.Gr=new kC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new LC(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new qC(this.Qr.next());return this.referenceDelegate.zr(),s(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,n){return W.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,n))))}}class qC extends wx{constructor(e){super(),this.currentSequenceNumber=e}}class Op{constructor(e){this.persistence=e,this.Jr=new Dp,this.Yr=null}static Zr(e){return new Op(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,(s=>{const o=ye.fromPath(s);return this.ei(e,o).next((u=>{u||n.removeEntry(o,we.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=o}static Wi(e,n){let s=Me(),o=Me();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Mp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return $1()?8:Ax(tn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.Yi(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.Zi(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new HC;return this.Xi(e,n,f).next((m=>{if(u.result=m,this.zi)return this.es(e,n,f,m.size)}))})).next((()=>u.result))}es(e,n,s,o){return s.documentReadCount<this.ji?(Nl()<=Ue.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(Nl()<=Ue.DEBUG&&de("QueryEngine","Query:",to(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Hi*o?(Nl()<=Ue.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(n))):W.resolve())}Yi(e,n){if(A0(n))return W.resolve(null);let s=vi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=zm(n,null,"F"),s=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Me(...u);return this.Ji.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.ts(n,m);return this.ns(n,y,f,g.readTime)?this.Yi(e,zm(n,null,"F")):this.rs(e,y,n,g)}))))})))))}Zi(e,n,s,o){return A0(n)||o.isEqual(we.min())?W.resolve(null):this.Ji.getDocuments(e,s).next((u=>{const f=this.ts(n,u);return this.ns(n,f,s,o)?W.resolve(null):(Nl()<=Ue.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),to(n)),this.rs(e,f,n,vx(o,-1)).next((m=>m)))}))}ts(e,n){let s=new Qt(IT(e));return n.forEach(((o,u)=>{kh(e,u)&&(s=s.add(u))})),s}ns(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,n,s){return Nl()<=Ue.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",to(n)),this.Ji.getDocumentsMatchingQuery(e,n,cs.min(),s)}rs(e,n,s,o){return this.Ji.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,s,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new ot(qe),this._s=new So((u=>Ap(u)),Sp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function KC(r,e,n,s){return new GC(r,e,n,s)}async function JT(r,e){const n=Ae(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.ls(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let g=Me();for(const y of o){f.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((y=>({hs:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function QC(r,e){const n=Ae(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.cs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,T){const A=y.batch,R=A.keys();let U=W.resolve();return R.forEach((z=>{U=U.next((()=>T.getEntry(g,z))).next((X=>{const G=y.docVersions.get(z);$e(G!==null),X.version.compareTo(G)<0&&(A.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),T.addEntry(X)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Me();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function ZT(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function $C(r,e){const n=Ae(r),s=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const m=[];e.targetChanges.forEach(((T,A)=>{const R=o.get(A);if(!R)return;m.push(n.Ur.removeMatchingKeys(u,T.removedDocuments,A).next((()=>n.Ur.addMatchingKeys(u,T.addedDocuments,A))));let U=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?U=U.withResumeToken($t.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,s)),o=o.insert(A,U),(function(X,G,oe){return X.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(R,U,T)&&m.push(n.Ur.updateTargetData(u,U))}));let g=lr(),y=Me();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(YC(u,f,e.documentUpdates).next((T=>{g=T.Ps,y=T.Is}))),!s.isEqual(we.min())){const T=n.Ur.getLastRemoteSnapshotVersion(u).next((A=>n.Ur.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(T)}return W.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.os=o,u)))}function YC(r,e,n){let s=Me(),o=Me();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=lr();return n.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):de("LocalStore","Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Ps:f,Is:o}}))}function XC(r,e){const n=Ae(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function JC(r,e){const n=Ae(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Ur.getTargetData(s,e).next((u=>u?(o=u,W.resolve(o)):n.Ur.allocateTargetId(s).next((f=>(o=new rs(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.os.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s}))}async function Gm(r,e,n){const s=Ae(r),o=s.os.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!nu(f))throw f;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.os=s.os.remove(e),s._s.delete(o.target)}function V0(r,e,n){const s=Ae(r);let o=we.min(),u=Me();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,T){const A=Ae(g),R=A._s.get(T);return R!==void 0?W.resolve(A.os.get(R)):A.Ur.getTargetData(y,T)})(s,f,vi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(f,m.targetId).next((g=>{u=g}))})).next((()=>s.ss.getDocumentsMatchingQuery(f,e,n?o:we.min(),n?u:Me()))).next((m=>(ZC(s,qx(e),m),{documents:m,Ts:u})))))}function ZC(r,e,n){let s=r.us.get(e)||we.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.us.set(e,s)}class U0{constructor(){this.activeTargetIds=$x()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WC{constructor(){this.so=new U0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new U0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc=null;function ym(){return Gc===null?Gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gc++,"0x"+Gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class iI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(n,s,o,u,f){const m=ym(),g=this.xo(n,s.toUriEncodedString());de("RestConnection",`Sending RPC '${n}' ${m}:`,g,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,u,f),this.No(n,g,y,o).then((T=>(de("RestConnection",`Received RPC '${n}' ${m}: `,T),T)),(T=>{throw mo("RestConnection",`RPC '${n}' ${m} failed with error: `,T,"url: ",g,"request:",o),T}))}Lo(n,s,o,u,f,m){return this.Mo(n,s,o,u,f)}Oo(n,s,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ao})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((u,f)=>n[f]=u)),o&&o.headers.forEach(((u,f)=>n[f]=u))}xo(n,s){const o=tI[n];return`${this.Do}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,o){const u=ym();return new Promise(((f,m)=>{const g=new hT;g.setWithCredentials(!0),g.listenOnce(fT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case th.NO_ERROR:const T=g.getResponseJson();de(Zt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case th.TIMEOUT:de(Zt,`RPC '${e}' ${u} timed out`),m(new ue(Z.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const A=g.getStatus();if(de(Zt,`RPC '${e}' ${u} failed with status:`,A,"response text:",g.getResponseText()),A>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const U=R==null?void 0:R.error;if(U&&U.status&&U.message){const z=(function(G){const oe=G.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(oe)>=0?oe:Z.UNKNOWN})(U.status);m(new ue(z,U.message))}else m(new ue(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ue(Z.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{de(Zt,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(o);de(Zt,`RPC '${e}' ${u} sending request:`,o),g.send(n,"POST",y,s,15)}))}Bo(e,n,s){const o=ym(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=pT(),m=mT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=u.join("");de(Zt,`Creating RPC '${e}' stream ${o}: ${T}`,g);const A=f.createWebChannel(T,g);let R=!1,U=!1;const z=new nI({Io:G=>{U?de(Zt,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(R||(de(Zt,`Opening RPC '${e}' stream ${o} transport.`),A.open(),R=!0),de(Zt,`RPC '${e}' stream ${o} sending:`,G),A.send(G))},To:()=>A.close()}),X=(G,oe,le)=>{G.listen(oe,(ne=>{try{le(ne)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return X(A,Ol.EventType.OPEN,(()=>{U||(de(Zt,`RPC '${e}' stream ${o} transport opened.`),z.yo())})),X(A,Ol.EventType.CLOSE,(()=>{U||(U=!0,de(Zt,`RPC '${e}' stream ${o} transport closed`),z.So())})),X(A,Ol.EventType.ERROR,(G=>{U||(U=!0,mo(Zt,`RPC '${e}' stream ${o} transport errored:`,G),z.So(new ue(Z.UNAVAILABLE,"The operation could not be completed")))})),X(A,Ol.EventType.MESSAGE,(G=>{var oe;if(!U){const le=G.data[0];$e(!!le);const ne=le,ee=ne.error||((oe=ne[0])===null||oe===void 0?void 0:oe.error);if(ee){de(Zt,`RPC '${e}' stream ${o} received error:`,ee);const fe=ee.status;let ie=(function(C){const O=At[C];if(O!==void 0)return BT(O)})(fe),x=ee.message;ie===void 0&&(ie=Z.INTERNAL,x="Unknown error status: "+fe+" with message "+ee.message),U=!0,z.So(new ue(ie,x)),A.close()}else de(Zt,`RPC '${e}' stream ${o} received:`,le),z.bo(le)}})),X(m,dT.STAT_EVENT,(G=>{G.stat===km.PROXY?de(Zt,`RPC '${e}' stream ${o} detected buffering proxy`):G.stat===km.NOPROXY&&de(Zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.wo()}),0),z}}function _m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(r){return new dC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,s,o,u,f,m,g){this.ui=e,this.Ho=s,this.Jo=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new WT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.Yo===n&&this.P_(s,o)}),(s=>{e((()=>{const o=new ue(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(o)}))}))}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{s((()=>this.I_(o)))})),this.stream.onMessage((o=>{s((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rI extends eb{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gC(this.serializer,e),s=(function(u){if(!("targetChange"in u))return we.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?we.min():f.readTime?Ei(f.readTime):we.min()})(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=Fm(this.serializer),n.addTarget=(function(u,f){let m;const g=f.target;if(m=jm(g)?{documents:vC(u,g)}:{query:EC(u,g)._t},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=FT(u,f.resumeToken);const y=Bm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(we.min())>0){m.readTime=vh(u,f.snapshotVersion.toTimestamp());const y=Bm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=bC(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=Fm(this.serializer),n.removeTarget=e,this.a_(n)}}class sI extends eb{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=_C(e.writeResults,e.commitTime),s=Ei(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=Fm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>yC(this.serializer,s)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI extends class{}{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Mo(e,qm(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ue(Z.UNKNOWN,u.toString())}))}Lo(e,n,s,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Lo(e,qm(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ue(Z.UNKNOWN,f.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class oI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(n),this.D_=!1):de("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((f=>{s.enqueueAndForget((async()=>{la(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const y=Ae(g);y.L_.add(4),await au(y),y.q_.set("Unknown"),y.L_.delete(4),await zh(y)})(this))}))})),this.q_=new oI(s,o)}}async function zh(r){if(la(r))for(const e of r.B_)await e(!0)}async function au(r){for(const e of r.B_)await e(!1)}function tb(r,e){const n=Ae(r);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Lp(n)?Up(n):Ro(n).r_()&&Vp(n,e))}function kp(r,e){const n=Ae(r),s=Ro(n);n.N_.delete(e),s.r_()&&nb(n,e),n.N_.size===0&&(s.r_()?s.o_():la(n)&&n.q_.set("Unknown"))}function Vp(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ro(r).A_(e)}function nb(r,e){r.Q_.xe(e),Ro(r).R_(e)}function Up(r){r.Q_=new uC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Ro(r).start(),r.q_.v_()}function Lp(r){return la(r)&&!Ro(r).n_()&&r.N_.size>0}function la(r){return Ae(r).L_.size===0}function ib(r){r.Q_=void 0}async function uI(r){r.q_.set("Online")}async function cI(r){r.N_.forEach(((e,n)=>{Vp(r,e)}))}async function hI(r,e){ib(r),Lp(r)?(r.q_.M_(e),Up(r)):r.q_.set("Unknown")}async function fI(r,e,n){if(r.q_.set("Online"),e instanceof HT&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.N_.delete(m),o.Q_.removeTarget(m))})(r,e)}catch(s){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Eh(r,s)}else if(e instanceof rh?r.Q_.Ke(e):e instanceof qT?r.Q_.He(e):r.Q_.We(e),!n.isEqual(we.min()))try{const s=await ZT(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Q_.rt(f);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.N_.get(y);T&&u.N_.set(y,T.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,y)=>{const T=u.N_.get(g);if(!T)return;u.N_.set(g,T.withResumeToken($t.EMPTY_BYTE_STRING,T.snapshotVersion)),nb(u,g);const A=new rs(T.target,g,y,T.sequenceNumber);Vp(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){de("RemoteStore","Failed to raise snapshot:",s),await Eh(r,s)}}async function Eh(r,e,n){if(!nu(e))throw e;r.L_.add(1),await au(r),r.q_.set("Offline"),n||(n=()=>ZT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),r.L_.delete(1),await zh(r)}))}function rb(r,e){return e().catch((n=>Eh(r,n,e)))}async function Bh(r){const e=Ae(r),n=fs(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dI(e);)try{const o=await XC(e.localStore,s);if(o===null){e.O_.length===0&&n.o_();break}s=o.batchId,mI(e,o)}catch(o){await Eh(e,o)}sb(e)&&ab(e)}function dI(r){return la(r)&&r.O_.length<10}function mI(r,e){r.O_.push(e);const n=fs(r);n.r_()&&n.V_&&n.m_(e.mutations)}function sb(r){return la(r)&&!fs(r).n_()&&r.O_.length>0}function ab(r){fs(r).start()}async function pI(r){fs(r).p_()}async function gI(r){const e=fs(r);for(const n of r.O_)e.m_(n.mutations)}async function yI(r,e,n){const s=r.O_.shift(),o=Cp.from(s,e,n);await rb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Bh(r)}async function _I(r,e){e&&fs(r).V_&&await(async function(s,o){if((function(f){return aC(f)&&f!==Z.ABORTED})(o.code)){const u=s.O_.shift();fs(s).s_(),await rb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Bh(s)}})(r,e),sb(r)&&ab(r)}async function j0(r,e){const n=Ae(r);n.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const s=la(n);n.L_.add(3),await au(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await zh(n)}async function vI(r,e){const n=Ae(r);e?(n.L_.delete(2),await zh(n)):e||(n.L_.add(2),await au(n),n.q_.set("Unknown"))}function Ro(r){return r.K_||(r.K_=(function(n,s,o){const u=Ae(n);return u.w_(),new rI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Eo:uI.bind(null,r),Ro:cI.bind(null,r),mo:hI.bind(null,r),d_:fI.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),Lp(r)?Up(r):r.q_.set("Unknown")):(await r.K_.stop(),ib(r))}))),r.K_}function fs(r){return r.U_||(r.U_=(function(n,s,o){const u=Ae(n);return u.w_(),new sI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pI.bind(null,r),mo:_I.bind(null,r),f_:gI.bind(null,r),g_:yI.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Bh(r)):(await r.U_.stop(),r.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new jp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(r,e){if(or("AsyncQueue",`${e}: ${r}`),nu(r))return new ue(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=Ml(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new oo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.W_=new ot(ye.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,s)=>{e.push(s)})),e}}class To{constructor(e,n,s,o,u,f,m,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new To(e,n,oo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class TI{constructor(){this.queries=z0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const o=Ae(n),u=o.queries;o.queries=z0(),u.forEach(((f,m)=>{for(const g of m.j_)g.onError(s)}))})(this,new ue(Z.ABORTED,"Firestore shutting down"))}}function z0(){return new So((r=>CT(r)),Mh)}async function ob(r,e){const n=Ae(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.H_()&&e.J_()&&(s=2):(u=new EI,s=e.J_()?0:1);try{switch(s){case 0:u.z_=await n.onListen(o,!0);break;case 1:u.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Pp(f,`Initialization of query '${to(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.j_.push(e),e.Z_(n.onlineState),u.z_&&e.X_(u.z_)&&zp(n)}async function lb(r,e){const n=Ae(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.j_.indexOf(e);f>=0&&(u.j_.splice(f,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function bI(r,e){const n=Ae(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.j_)m.X_(o)&&(s=!0);f.z_=o}}s&&zp(n)}function wI(r,e,n){const s=Ae(r),o=s.queries.get(e);if(o)for(const u of o.j_)u.onError(n);s.queries.delete(e)}function zp(r){r.Y_.forEach((e=>{e.next()}))}var Km,B0;(B0=Km||(Km={})).ea="default",B0.Cache="cache";class ub{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new To(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=To.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.key=e}}class hb{constructor(e){this.key=e}}class AI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=IT(e),this.Ra=new oo(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new P0,o=n?n.Ra:this.Ra;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const R=o.get(T),U=kh(this.query,A)?A:null,z=!!R&&this.mutatedKeys.has(R.key),X=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let G=!1;R&&U?R.data.isEqual(U.data)?z!==X&&(s.track({type:3,doc:U}),G=!0):this.ga(R,U)||(s.track({type:2,doc:U}),G=!0,(g&&this.Aa(U,g)>0||y&&this.Aa(U,y)<0)&&(m=!0)):!R&&U?(s.track({type:0,doc:U}),G=!0):R&&!U&&(s.track({type:1,doc:R}),G=!0,(g||y)&&(m=!0)),G&&(U?(f=f.add(U),u=X?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{Ra:f,fa:s,ns:m,mutatedKeys:u}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const f=e.fa.G_();f.sort(((T,A)=>(function(U,z){const X=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return X(U)-X(z)})(T.type,A.type)||this.Aa(T.doc,A.doc))),this.pa(s),o=o!=null&&o;const m=n&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,y=g!==this.Ea;return this.Ea=g,f.length!==0||y?{snapshot:new To(this.query,e.Ra,u,f,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new P0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const n=[];return e.forEach((s=>{this.da.has(s)||n.push(new hb(s))})),this.da.forEach((s=>{e.has(s)||n.push(new cb(s))})),n}ba(e){this.Ta=e.Ts,this.da=Me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return To.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class SI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class RI{constructor(e){this.key=e,this.va=!1}}class xI{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Ca={},this.Fa=new So((m=>CT(m)),Mh),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ye.comparator),this.Na=new Map,this.La=new Dp,this.Ba={},this.ka=new Map,this.qa=Eo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function CI(r,e,n=!0){const s=yb(r);let o;const u=s.Fa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await fb(s,e,n,!0),o}async function II(r,e){const n=yb(r);await fb(n,e,!0,!1)}async function fb(r,e,n,s){const o=await JC(r.localStore,vi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await NI(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&tb(r.remoteStore,o),m}async function NI(r,e,n,s,o){r.Ka=(A,R,U)=>(async function(X,G,oe,le){let ne=G.view.ma(oe);ne.ns&&(ne=await V0(X.localStore,G.query,!1).then((({documents:x})=>G.view.ma(x,ne))));const ee=le&&le.targetChanges.get(G.targetId),fe=le&&le.targetMismatches.get(G.targetId)!=null,ie=G.view.applyChanges(ne,X.isPrimaryClient,ee,fe);return H0(X,G.targetId,ie.wa),ie.snapshot})(r,A,R,U);const u=await V0(r.localStore,e,!0),f=new AI(e,u.Ts),m=f.ma(u.documents),g=su.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=f.applyChanges(m,r.isPrimaryClient,g);H0(r,n,y.wa);const T=new SI(e,n,f);return r.Fa.set(e,T),r.Ma.has(n)?r.Ma.get(n).push(e):r.Ma.set(n,[e]),y.snapshot}async function DI(r,e,n){const s=Ae(r),o=s.Fa.get(e),u=s.Ma.get(o.targetId);if(u.length>1)return s.Ma.set(o.targetId,u.filter((f=>!Mh(f,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Gm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&kp(s.remoteStore,o.targetId),Qm(s,o.targetId)})).catch(tu)):(Qm(s,o.targetId),await Gm(s.localStore,o.targetId,!0))}async function OI(r,e){const n=Ae(r),s=n.Fa.get(e),o=n.Ma.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),kp(n.remoteStore,s.targetId))}async function MI(r,e,n){const s=zI(r);try{const o=await(function(f,m){const g=Ae(f),y=at.now(),T=m.reduce(((U,z)=>U.add(z.key)),Me());let A,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let z=lr(),X=Me();return g.cs.getEntries(U,T).next((G=>{z=G,z.forEach(((oe,le)=>{le.isValidDocument()||(X=X.add(oe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(U,z))).next((G=>{A=G;const oe=[];for(const le of m){const ne=tC(le,A.get(le.key).overlayedDocument);ne!=null&&oe.push(new ps(le.key,ne,ET(ne.value.mapValue),vn.exists(!0)))}return g.mutationQueue.addMutationBatch(U,y,oe,m)})).next((G=>{R=G;const oe=G.applyToLocalDocumentSet(A,X);return g.documentOverlayCache.saveOverlays(U,G.batchId,oe)}))})).then((()=>({batchId:R.batchId,changes:DT(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,g){let y=f.Ba[f.currentUser.toKey()];y||(y=new ot(qe)),y=y.insert(m,g),f.Ba[f.currentUser.toKey()]=y})(s,o.batchId,n),await ou(s,o.changes),await Bh(s.remoteStore)}catch(o){const u=Pp(o,"Failed to persist write");n.reject(u)}}async function db(r,e){const n=Ae(r);try{const s=await $C(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Na.get(u);f&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.va=!0:o.modifiedDocuments.size>0?$e(f.va):o.removedDocuments.size>0&&($e(f.va),f.va=!1))})),await ou(n,s,e)}catch(s){await tu(s)}}function q0(r,e,n){const s=Ae(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Fa.forEach(((u,f)=>{const m=f.view.Z_(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const g=Ae(f);g.onlineState=m;let y=!1;g.queries.forEach(((T,A)=>{for(const R of A.j_)R.Z_(m)&&(y=!0)})),y&&zp(g)})(s.eventManager,e),o.length&&s.Ca.d_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function kI(r,e,n){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Na.get(e),u=o&&o.key;if(u){let f=new ot(ye.comparator);f=f.insert(u,en.newNoDocument(u,we.min()));const m=Me().add(u),g=new jh(we.min(),new Map,new ot(qe),f,m);await db(s,g),s.Oa=s.Oa.remove(u),s.Na.delete(e),Bp(s)}else await Gm(s.localStore,e,!1).then((()=>Qm(s,e,n))).catch(tu)}async function VI(r,e){const n=Ae(r),s=e.batch.batchId;try{const o=await QC(n.localStore,e);pb(n,s,null),mb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ou(n,o)}catch(o){await tu(o)}}async function UI(r,e,n){const s=Ae(r);try{const o=await(function(f,m){const g=Ae(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,m).next((A=>($e(A!==null),T=A.keys(),g.mutationQueue.removeMutationBatch(y,A)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(s.localStore,e);pb(s,e,n),mb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ou(s,o)}catch(o){await tu(o)}}function mb(r,e){(r.ka.get(e)||[]).forEach((n=>{n.resolve()})),r.ka.delete(e)}function pb(r,e,n){const s=Ae(r);let o=s.Ba[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Ba[s.currentUser.toKey()]=o}}function Qm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Ma.get(e))r.Fa.delete(s),n&&r.Ca.$a(s,n);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((s=>{r.La.containsKey(s)||gb(r,s)}))}function gb(r,e){r.xa.delete(e.path.canonicalString());const n=r.Oa.get(e);n!==null&&(kp(r.remoteStore,n),r.Oa=r.Oa.remove(e),r.Na.delete(n),Bp(r))}function H0(r,e,n){for(const s of n)s instanceof cb?(r.La.addReference(s.key,e),LI(r,s)):s instanceof hb?(de("SyncEngine","Document no longer in limbo: "+s.key),r.La.removeReference(s.key,e),r.La.containsKey(s.key)||gb(r,s.key)):Te()}function LI(r,e){const n=e.key,s=n.path.canonicalString();r.Oa.get(n)||r.xa.has(s)||(de("SyncEngine","New document in limbo: "+n),r.xa.add(s),Bp(r))}function Bp(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const n=new ye(it.fromString(e)),s=r.qa.next();r.Na.set(s,new RI(n)),r.Oa=r.Oa.insert(n,s),tb(r.remoteStore,new rs(vi(Rp(n.path)),s,"TargetPurposeLimboResolution",Ep.oe))}}async function ou(r,e,n){const s=Ae(r),o=[],u=[],f=[];s.Fa.isEmpty()||(s.Fa.forEach(((m,g)=>{f.push(s.Ka(g,e,n).then((y=>{var T;if((y||n)&&s.isPrimaryClient){const A=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(y){o.push(y);const A=Mp.Wi(g.targetId,y);u.push(A)}})))})),await Promise.all(f),s.Ca.d_(o),await(async function(g,y){const T=Ae(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>W.forEach(y,(R=>W.forEach(R.$i,(U=>T.persistence.referenceDelegate.addReference(A,R.targetId,U))).next((()=>W.forEach(R.Ui,(U=>T.persistence.referenceDelegate.removeReference(A,R.targetId,U)))))))))}catch(A){if(!nu(A))throw A;de("LocalStore","Failed to update sequence numbers: "+A)}for(const A of y){const R=A.targetId;if(!A.fromCache){const U=T.os.get(R),z=U.snapshotVersion,X=U.withLastLimboFreeSnapshotVersion(z);T.os=T.os.insert(R,X)}}})(s.localStore,u))}async function jI(r,e){const n=Ae(r);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const s=await JT(n.localStore,e);n.currentUser=e,(function(u,f){u.ka.forEach((m=>{m.forEach((g=>{g.reject(new ue(Z.CANCELLED,f))}))})),u.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ou(n,s.hs)}}function PI(r,e){const n=Ae(r),s=n.Na.get(e);if(s&&s.va)return Me().add(s.key);{let o=Me();const u=n.Ma.get(e);if(!u)return o;for(const f of u){const m=n.Fa.get(f);o=o.unionWith(m.view.Va)}return o}}function yb(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=db.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kI.bind(null,e),e.Ca.d_=bI.bind(null,e.eventManager),e.Ca.$a=wI.bind(null,e.eventManager),e}function zI(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UI.bind(null,e),e}class Th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ph(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return KC(this.persistence,new FC,e.initialUser,this.serializer)}Ga(e){return new BC(Op.Zr,this.serializer)}Wa(e){return new WC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Th.provider={build:()=>new Th};class $m{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>q0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=jI.bind(null,this.syncEngine),await vI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new TI})()}createDatastore(e){const n=Ph(e.databaseInfo.databaseId),s=(function(u){return new iI(u)})(e.databaseInfo);return(function(u,f,m,g){return new aI(u,f,m,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new lI(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>q0(this.syncEngine,n,0)),(function(){return L0.D()?new L0:new eI})())}createSyncEngine(e,n){return(function(o,u,f,m,g,y,T){const A=new xI(o,u,f,m,g,y);return T&&(A.Qa=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ae(o);de("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await au(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=yT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{de("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(de("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Pp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function vm(r,e){r.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await JT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function F0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await qI(r);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>j0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>j0(e.remoteStore,o))),r._onlineComponents=e}async function qI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await vm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;mo("Error using user provided cache. Falling back to memory cache: "+n),await vm(r,new Th)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await vm(r,new Th);return r._offlineComponents}async function vb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await F0(r,r._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await F0(r,new $m))),r._onlineComponents}function HI(r){return vb(r).then((e=>e.syncEngine))}async function Ym(r){const e=await vb(r),n=e.eventManager;return n.onListen=CI.bind(null,e.syncEngine),n.onUnlisten=DI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=II.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OI.bind(null,e.syncEngine),n}function FI(r,e,n={}){const s=new os;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,y){const T=new _b({next:R=>{T.Za(),f.enqueueAndForget((()=>lb(u,A))),R.fromCache&&g.source==="server"?y.reject(new ue(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),A=new ub(m,T,{includeMetadataChanges:!0,_a:!0});return ob(u,A)})(await Ym(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(r,e,n){if(!n)throw new ue(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function GI(r,e,n,s){if(e===!0&&s===!0)throw new ue(Z.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function K0(r){if(!ye.isDocumentKey(r))throw new ue(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Q0(r){if(ye.isDocumentKey(r))throw new ue(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function qh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te()}function ei(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ue(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qh(r);throw new ue(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Eb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $0(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new cx;switch(s.type){case"firstParty":return new mx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=G0.get(n);s&&(de("ComponentProvider","Removing Datastore"),G0.delete(n),s.terminate())})(this),Promise.resolve()}}function KI(r,e,n,s={}){var o;const u=(r=ei(r,Hh))._getSettings(),f=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==f&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},u),{host:f,ssl:!1})),s.mockUserToken){let m,g;if(typeof s.mockUserToken=="string")m=s.mockUserToken,g=Wt.MOCK_USER;else{m=RE(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new ue(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Wt(y)}r._authCredentials=new hx(new gT(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class En{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class ls extends ua{constructor(e,n,s){super(e,n,Rp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new ye(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function Zi(r,e,...n){if(r=Ye(r),Tb("collection","path",e),r instanceof Hh){const s=it.fromString(e,...n);return Q0(s),new ls(r,null,s)}{if(!(r instanceof En||r instanceof ls))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...n));return Q0(s),new ls(r.firestore,null,s)}}function Fn(r,e,...n){if(r=Ye(r),arguments.length===1&&(e=yT.newId()),Tb("doc","path",e),r instanceof Hh){const s=it.fromString(e,...n);return K0(s),new En(r,null,new ye(s))}{if(!(r instanceof En||r instanceof ls))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...n));return K0(s),new En(r.firestore,r instanceof ls?r.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new WT(this,"async_queue_retry"),this.Vu=()=>{const s=_m();s&&de("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=_m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new os;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!nu(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const o=(function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m})(s);throw or("INTERNAL UNHANDLED ERROR: ",o),s})).then((s=>(this.du=!1,s))))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=jp.createAndSchedule(this,e,n,s,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function X0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class ds extends Hh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Y0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y0(e),this._firestoreClient=void 0,await e}}}function QI(r,e){const n=typeof r=="object"?r:Ch(),s=typeof r=="string"?r:"(default)",o=Jl(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=sp("firestore");u&&KI(o,...u)}return o}function Fh(r){if(r._terminated)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||$I(r),r._firestoreClient}function $I(r){var e,n,s;const o=r._freezeSettings(),u=(function(m,g,y,T){return new xx(m,g,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Eb(T.experimentalLongPollingOptions),T.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new BI(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bo($t.fromBase64String(e))}catch(n){throw new ue(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bo($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=/^__.*__$/;class XI{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new ru(e,this.data,n,this.fieldTransforms)}}class bb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class Gh{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:s,xu:!1});return o.Ou(e),o}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:s,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(wb(this.Cu)&&YI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JI{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ph(e)}Qu(e,n,s,o=!1){return new Gh({Cu:e,methodName:n,qu:s,path:Kt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kh(r){const e=r._freezeSettings(),n=Ph(r._databaseId);return new JI(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Ab(r,e,n,s,o,u={}){const f=r.Qu(u.merge||u.mergeFields?2:0,e,n,o);Kp("Data must be an object, but it was:",f,s);const m=Cb(s,f);let g,y;if(u.merge)g=new Nn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const R=Xm(e,A,n);if(!f.contains(R))throw new ue(Z.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Nb(T,R)||T.push(R)}g=new Nn(T),y=f.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,y=f.fieldTransforms;return new XI(new _n(m),g,y)}class Qh extends uu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qh}}function Sb(r,e,n){return new Gh({Cu:3,qu:e.settings.qu,methodName:r._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Fp extends uu{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Sb(this,e,!0),s=this.Ku.map((u=>ca(u,n))),o=new _o(s);return new jT(e.path,o)}isEqual(e){return e instanceof Fp&&ho(this.Ku,e.Ku)}}class Gp extends uu{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Sb(this,e,!0),s=this.Ku.map((u=>ca(u,n))),o=new vo(s);return new jT(e.path,o)}isEqual(e){return e instanceof Gp&&ho(this.Ku,e.Ku)}}function Rb(r,e,n,s){const o=r.Qu(1,e,n);Kp("Data must be an object, but it was:",o,s);const u=[],f=_n.empty();oa(s,((g,y)=>{const T=Qp(e,g,n);y=Ye(y);const A=o.Nu(T);if(y instanceof Qh)u.push(T);else{const R=ca(y,A);R!=null&&(u.push(T),f.set(T,R))}}));const m=new Nn(u);return new bb(f,m,o.fieldTransforms)}function xb(r,e,n,s,o,u){const f=r.Qu(1,e,n),m=[Xm(e,s,n)],g=[o];if(u.length%2!=0)throw new ue(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(Xm(e,u[R])),g.push(u[R+1]);const y=[],T=_n.empty();for(let R=m.length-1;R>=0;--R)if(!Nb(y,m[R])){const U=m[R];let z=g[R];z=Ye(z);const X=f.Nu(U);if(z instanceof Qh)y.push(U);else{const G=ca(z,X);G!=null&&(y.push(U),T.set(U,G))}}const A=new Nn(y);return new bb(T,A,f.fieldTransforms)}function ZI(r,e,n,s=!1){return ca(n,r.Qu(s?4:3,e))}function ca(r,e){if(Ib(r=Ye(r)))return Kp("Unsupported field value:",e,r),Cb(r,e);if(r instanceof uu)return(function(s,o){if(!wb(o.Cu))throw o.Bu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let g=ca(m,o.Lu(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=Ye(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Yx(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=at.fromDate(s);return{timestampValue:vh(o.serializer,u)}}if(s instanceof at){const u=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vh(o.serializer,u)}}if(s instanceof qp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bo)return{bytesValue:FT(o.serializer,s._byteString)};if(s instanceof En){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Bu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Np(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Hp)return(function(f,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return xp(m.serializer,g)}))}}}}}})(s,o);throw o.Bu(`Unsupported field value: ${qh(s)}`)})(r,e)}function Cb(r,e){const n={};return _T(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(r,((s,o)=>{const u=ca(o,e.Mu(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function Ib(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof at||r instanceof qp||r instanceof bo||r instanceof En||r instanceof uu||r instanceof Hp)}function Kp(r,e,n){if(!Ib(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const s=qh(n);throw s==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+s)}}function Xm(r,e,n){if((e=Ye(e))instanceof lu)return e._internalPath;if(typeof e=="string")return Qp(r,e);throw bh("Field path arguments must be of type string or ",r,!1,void 0,n)}const WI=new RegExp("[~\\*/\\[\\]]");function Qp(r,e,n){if(e.search(WI)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new lu(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function bh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new ue(Z.INVALID_ARGUMENT,m+r+g)}function Nb(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($p("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eN extends Db{data(){return super.data()}}function $p(r,e){return typeof e=="string"?Qp(r,e):e instanceof lu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ue(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yp{}class tN extends Yp{}function lo(r,e,...n){let s=[];e instanceof Yp&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((g=>g instanceof Xp)).length,m=u.filter((g=>g instanceof $h)).length;if(f>1||f>0&&m>0)throw new ue(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class $h extends tN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new $h(e,n,s)}_apply(e){const n=this._parse(e);return Mb(e._query,n),new ua(e.firestore,e.converter,Pm(e._query,n))}_parse(e){const n=Kh(e.firestore);return(function(u,f,m,g,y,T,A){let R;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ue(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Z0(A,T);const U=[];for(const z of A)U.push(J0(g,u,z));R={arrayValue:{values:U}}}else R=J0(g,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Z0(A,T),R=ZI(m,f,A,T==="in"||T==="not-in");return St.create(y,T,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function uo(r,e,n){const s=e,o=$p("where",r);return $h._create(o,s,n)}class Xp extends Yp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)Mb(f,g),f=Pm(f,g)})(e._query,n),new ua(e.firestore,e.converter,Pm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function J0(r,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new ue(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xT(e)&&n.indexOf("/")!==-1)throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(it.fromString(n));if(!ye.isDocumentKey(s))throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return _0(r,new ye(s))}if(n instanceof En)return _0(r,n._key);throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(n)}.`)}function Z0(r,e){if(!Array.isArray(r)||r.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mb(r,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nN{convertValue(e,n="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return oa(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((f=>_t(f.doubleValue)));return new Hp(u)}convertGeoPoint(e){return new qp(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=bp(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const n=hs(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=it.fromString(e);$e(XT(s));const o=new Kl(s.get(1),s.get(3)),u=new ye(s.popFirst(5));return o.isEqual(n)||or(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vb extends Db{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field($p("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class sh extends Vb{data(e={}){return super.data(e)}}class Ub{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Vl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new sh(this._firestore,this._userDataWriter,s.key,s,new Vl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const g=new sh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Vl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new sh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Vl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:iN(m.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function iN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class Jp extends nN{constructor(e){super(),this.firestore=e}convertBytes(e){return new bo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function Jm(r){r=ei(r,ua);const e=ei(r.firestore,ds),n=Fh(e),s=new Jp(e);return Ob(r._query),FI(n,r._query).then((o=>new Ub(e,s,r,o)))}function Js(r,e,n,...s){r=ei(r,En);const o=ei(r.firestore,ds),u=Kh(o);let f;return f=typeof(e=Ye(e))=="string"||e instanceof lu?xb(u,"updateDoc",r._key,e,n,s):Rb(u,"updateDoc",r._key,e),Yh(o,[f.toMutation(r._key,vn.exists(!0))])}function Zm(r){return Yh(ei(r.firestore,ds),[new Lh(r._key,vn.none())])}function Wm(r,e){const n=ei(r.firestore,ds),s=Fn(r),o=kb(r.converter,e);return Yh(n,[Ab(Kh(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,vn.exists(!1))]).then((()=>s))}function wh(r,...e){var n,s,o;r=Ye(r);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||X0(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(X0(e[f])){const A=e[f];e[f]=(n=A.next)===null||n===void 0?void 0:n.bind(A),e[f+1]=(s=A.error)===null||s===void 0?void 0:s.bind(A),e[f+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let g,y,T;if(r instanceof En)y=ei(r.firestore,ds),T=Rp(r._key.path),g={next:A=>{e[f]&&e[f](rN(y,r,A))},error:e[f+1],complete:e[f+2]};else{const A=ei(r,ua);y=ei(A.firestore,ds),T=A._query;const R=new Jp(y);g={next:U=>{e[f]&&e[f](new Ub(y,R,A,U))},error:e[f+1],complete:e[f+2]},Ob(r._query)}return(function(R,U,z,X){const G=new _b(X),oe=new ub(U,G,z);return R.asyncQueue.enqueueAndForget((async()=>ob(await Ym(R),oe))),()=>{G.Za(),R.asyncQueue.enqueueAndForget((async()=>lb(await Ym(R),oe)))}})(Fh(y),T,m,g)}function Yh(r,e){return(function(s,o){const u=new os;return s.asyncQueue.enqueueAndForget((async()=>MI(await HI(s),o,u))),u.promise})(Fh(r),e)}function rN(r,e,n){const s=n.docs.get(e._key),o=new Jp(r);return new Vb(r,o,e._key,s,new Vl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Kh(e)}set(e,n,s){this._verifyNotCommitted();const o=Em(e,this._firestore),u=kb(o.converter,n,s),f=Ab(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(f.toMutation(o._key,vn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=Em(e,this._firestore);let f;return f=typeof(n=Ye(n))=="string"||n instanceof lu?xb(this._dataReader,"WriteBatch.update",u._key,n,s,o):Rb(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Em(e,this._firestore);return this._mutations=this._mutations.concat(new Lh(n._key,vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Em(r,e){if((r=Ye(r)).firestore!==e)throw new ue(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function aN(...r){return new Fp("arrayUnion",r)}function oN(...r){return new Gp("arrayRemove",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(r){return Fh(r=ei(r,ds)),new sN(r,(e=>Yh(r,e)))}(function(e,n=!0){(function(o){Ao=o})(aa),us(new rr("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new ds(new fx(s.getProvider("auth-internal")),new gx(s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(y.options.projectId,T)})(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Gn(d0,"4.7.3",e),Gn(d0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="type.googleapis.com/google.protobuf.Int64Value",cN="type.googleapis.com/google.protobuf.UInt64Value";function Lb(r,e){const n={};for(const s in r)r.hasOwnProperty(s)&&(n[s]=e(r[s]));return n}function ep(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>ep(e));if(typeof r=="function"||typeof r=="object")return Lb(r,e=>ep(e));throw new Error("Data cannot be encoded in JSON: "+r)}function Ah(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case uN:case cN:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>Ah(e)):typeof r=="function"||typeof r=="object"?Lb(r,e=>Ah(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class co extends ni{constructor(e,n,s){super(`${Zp}/${e}`,n||""),this.details=s}}function hN(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function fN(r,e){let n=hN(r),s=n,o;try{const u=e&&e.error;if(u){const f=u.status;if(typeof f=="string"){if(!W0[f])return new co("internal","internal");n=W0[f],s=f}const m=u.message;typeof m=="string"&&(s=m),o=u.details,o!==void 0&&(o=Ah(o))}}catch{}return n==="ok"?null:new co(n,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,s){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||n.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="us-central1";function mN(r){let e=null;return{promise:new Promise((n,s)=>{e=setTimeout(()=>{s(new co("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class pN{constructor(e,n,s,o,u=tp,f){this.app=e,this.fetchImpl=f,this.emulatorOrigin=null,this.contextProvider=new dN(n,s,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(u);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=tp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function gN(r,e,n){r.emulatorOrigin=`http://${e}:${n}`}function yN(r,e,n){return(s=>vN(r,e,s,{}))}async function _N(r,e,n,s){n["Content-Type"]="application/json";let o;try{o=await s(r,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let u=null;try{u=await o.json()}catch{}return{status:o.status,json:u}}function vN(r,e,n,s){const o=r._url(e);return EN(r,o,n,s)}async function EN(r,e,n,s){n=ep(n);const o={data:n},u={},f=await r.contextProvider.getContext(s.limitedUseAppCheckTokens);f.authToken&&(u.Authorization="Bearer "+f.authToken),f.messagingToken&&(u["Firebase-Instance-ID-Token"]=f.messagingToken),f.appCheckToken!==null&&(u["X-Firebase-AppCheck"]=f.appCheckToken);const m=s.timeout||7e4,g=mN(m),y=await Promise.race([_N(e,o,u,r.fetchImpl),g.promise,r.cancelAllRequests]);if(g.cancel(),!y)throw new co("cancelled","Firebase Functions instance was deleted.");const T=fN(y.status,y.json);if(T)throw T;if(!y.json)throw new co("internal","Response is not valid JSON object.");let A=y.json.data;if(typeof A>"u"&&(A=y.json.result),typeof A>"u")throw new co("internal","Response is missing data field.");return{data:Ah(A)}}const eE="@firebase/functions",tE="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="auth-internal",bN="app-check-internal",wN="messaging-internal";function AN(r,e){const n=(s,{instanceIdentifier:o})=>{const u=s.getProvider("app").getImmediate(),f=s.getProvider(TN),m=s.getProvider(wN),g=s.getProvider(bN);return new pN(u,f,m,g,o,r)};us(new rr(Zp,n,"PUBLIC").setMultipleInstances(!0)),Gn(eE,tE,e),Gn(eE,tE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(r=Ch(),e=tp){const s=Jl(Ye(r),Zp).getImmediate({identifier:e}),o=sp("functions");return o&&SN(s,...o),s}function SN(r,e,n){gN(Ye(r),e,n)}function Pb(r,e,n){return yN(Ye(r),e)}AN(fetch.bind(self));var RN="firebase",xN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(RN,xN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firebasestorage.googleapis.com",Bb="storageBucket",CN=120*1e3,IN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends ni{constructor(e,n,s=0){super(Tm(e),`Firebase Storage: ${n} (${Tm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ft;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ft||(ft={}));function Tm(r){return"storage/"+r}function Wp(){const r="An unknown error occurred, please check the error payload for server response.";return new dt(ft.UNKNOWN,r)}function NN(r){return new dt(ft.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function DN(r){return new dt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ON(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ft.UNAUTHENTICATED,r)}function MN(){return new dt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kN(r){return new dt(ft.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function VN(){return new dt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UN(){return new dt(ft.CANCELED,"User canceled the upload/download.")}function LN(r){return new dt(ft.INVALID_URL,"Invalid URL '"+r+"'.")}function jN(r){return new dt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function PN(){return new dt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Bb+"' property when initializing the app?")}function zN(){return new dt(ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BN(){return new dt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qN(r){return new dt(ft.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function np(r){return new dt(ft.INVALID_ARGUMENT,r)}function qb(){return new dt(ft.APP_DELETED,"The Firebase app was deleted.")}function HN(r){return new dt(ft.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bl(r,e){return new dt(ft.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Dl(r){throw new dt(ft.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Dn.makeFromUrl(e,n)}catch{return new Dn(e,"")}if(s.path==="")return s;throw jN(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),g={bucket:1,path:3};function y(ee){ee.path_=decodeURIComponent(ee.path)}const T="v[A-Za-z0-9_]+",A=n.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",U=new RegExp(`^https?://${A}/${T}/b/${o}/o${R}`,"i"),z={bucket:1,path:3},X=n===zb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,G="([^?#]*)",oe=new RegExp(`^https?://${X}/${o}/${G}`,"i"),ne=[{regex:m,indices:g,postModify:u},{regex:U,indices:z,postModify:y},{regex:oe,indices:{bucket:1,path:2},postModify:y}];for(let ee=0;ee<ne.length;ee++){const fe=ne[ee],ie=fe.regex.exec(e);if(ie){const x=ie[fe.indices.bucket];let S=ie[fe.indices.path];S||(S=""),s=new Dn(x,S),fe.postModify(s);break}}if(s==null)throw LN(e);return s}}class FN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r,e,n){let s=1,o=null,u=null,f=!1,m=0;function g(){return m===2}let y=!1;function T(...G){y||(y=!0,e.apply(null,G))}function A(G){o=setTimeout(()=>{o=null,r(U,g())},G)}function R(){u&&clearTimeout(u)}function U(G,...oe){if(y){R();return}if(G){R(),T.call(null,G,...oe);return}if(g()||f){R(),T.call(null,G,...oe);return}s<64&&(s*=2);let ne;m===1?(m=2,ne=0):ne=(s+Math.random())*1e3,A(ne)}let z=!1;function X(G){z||(z=!0,R(),!y&&(o!==null?(G||(m=2),clearTimeout(o),A(0)):G||(m=1)))}return A(0),u=setTimeout(()=>{f=!0,X(!0)},n),X}function KN(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(r){return r!==void 0}function $N(r){return typeof r=="object"&&!Array.isArray(r)}function eg(r){return typeof r=="string"||r instanceof String}function nE(r){return tg()&&r instanceof Blob}function tg(){return typeof Blob<"u"}function iE(r,e,n,s){if(s<e)throw np(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw np(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(r,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${r}`}function Hb(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var ea;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ea||(ea={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,s,o,u,f,m,g,y,T,A,R=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=T,this.connectionFactory_=A,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,z)=>{this.resolve_=U,this.reject_=z,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Kc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===ea.NO_ERROR,g=u.getStatus();if(!m||YN(g,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===ea.ABORT;s(!1,new Kc(!1,null,T));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new Kc(y,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());QN(g)?u(g):u()}catch(g){f(g)}else if(m!==null){const g=Wp();g.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,g)):f(g)}else if(o.canceled){const g=this.appDelete_?qb():UN();f(g)}else{const g=VN();f(g)}};this.canceled_?n(!1,new Kc(!1,null,!0)):this.backoffId_=GN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&KN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kc{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function JN(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function ZN(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WN(r,e){e&&(r["X-Firebase-GMPID"]=e)}function eD(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function tD(r,e,n,s,o,u,f=!0){const m=Hb(r.urlParams),g=r.url+m,y=Object.assign({},r.headers);return WN(y,e),JN(y,n),ZN(y,u),eD(y,s),new XN(g,r.method,y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iD(...r){const e=nD();if(e!==void 0){const n=new e;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(tg())return new Blob(r);throw new dt(ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rD(r,e,n){return r.webkitSlice?r.webkitSlice(e,n):r.mozSlice?r.mozSlice(e,n):r.slice?r.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(r){if(typeof atob>"u")throw qN("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bm{constructor(e,n){this.data=e,this.contentType=n||null}}function aD(r,e){switch(r){case yi.RAW:return new bm(Fb(e));case yi.BASE64:case yi.BASE64URL:return new bm(Gb(r,e));case yi.DATA_URL:return new bm(lD(e),uD(e))}throw Wp()}function Fb(r){const e=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=s,f=r.charCodeAt(++n);s=65536|(u&1023)<<10|f&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function oD(r){let e;try{e=decodeURIComponent(r)}catch{throw Bl(yi.DATA_URL,"Malformed data URL.")}return Fb(e)}function Gb(r,e){switch(r){case yi.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw Bl(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case yi.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw Bl(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=sD(e)}catch(o){throw o.message.includes("polyfill")?o:Bl(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class Kb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Bl(yi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=cD(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function lD(r){const e=new Kb(r);return e.base64?Gb(yi.BASE64,e.rest):oD(e.rest)}function uD(r){return new Kb(r).contentType}function cD(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){let s=0,o="";nE(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(nE(this.data_)){const s=this.data_,o=rD(s,e,n);return o===null?null:new is(o)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new is(s,!0)}}static getBlob(...e){if(tg()){const n=e.map(s=>s instanceof is?s.data_:s);return new is(iD.apply(null,n))}else{const n=e.map(f=>eg(f)?aD(yi.RAW,f).data:f.data_);let s=0;n.forEach(f=>{s+=f.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(f=>{for(let m=0;m<f.length;m++)o[u++]=f[m]}),new is(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(r){let e;try{e=JSON.parse(r)}catch{return null}return $N(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function fD(r,e){const n=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function $b(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(r,e){return e}class cn{constructor(e,n,s,o){this.server=e,this.local=n||e,this.writable=!!s,this.xform=o||dD}}let Qc=null;function mD(r){return!eg(r)||r.length<2?r:$b(r)}function Yb(){if(Qc)return Qc;const r=[];r.push(new cn("bucket")),r.push(new cn("generation")),r.push(new cn("metageneration")),r.push(new cn("name","fullPath",!0));function e(u,f){return mD(f)}const n=new cn("name");n.xform=e,r.push(n);function s(u,f){return f!==void 0?Number(f):f}const o=new cn("size");return o.xform=s,r.push(o),r.push(new cn("timeCreated")),r.push(new cn("updated")),r.push(new cn("md5Hash",null,!0)),r.push(new cn("cacheControl",null,!0)),r.push(new cn("contentDisposition",null,!0)),r.push(new cn("contentEncoding",null,!0)),r.push(new cn("contentLanguage",null,!0)),r.push(new cn("contentType",null,!0)),r.push(new cn("metadata","customMetadata",!0)),Qc=r,Qc}function pD(r,e){function n(){const s=r.bucket,o=r.fullPath,u=new Dn(s,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function gD(r,e,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const f=n[u];s[f.local]=f.xform(s,e[f.server])}return pD(s,r),s}function Xb(r,e,n){const s=Qb(e);return s===null?null:gD(r,s,n)}function yD(r,e,n,s){const o=Qb(e);if(o===null||!eg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const f=encodeURIComponent;return u.split(",").map(y=>{const T=r.bucket,A=r.fullPath,R="/b/"+f(T)+"/o/"+f(A),U=Xh(R,n,s),z=Hb({alt:"media",token:y});return U+z})[0]}function _D(r,e){const n={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(n[u.server]=r[u.local])}return JSON.stringify(n)}class ng{constructor(e,n,s,o){this.url=e,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(r){if(!r)throw Wp()}function vD(r,e){function n(s,o){const u=Xb(r,o,e);return Jb(u!==null),u}return n}function ED(r,e){function n(s,o){const u=Xb(r,o,e);return Jb(u!==null),yD(u,o,r.host,r._protocol)}return n}function Zb(r){function e(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=MN():o=ON():n.getStatus()===402?o=DN(r.bucket):n.getStatus()===403?o=kN(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return e}function Wb(r){const e=Zb(r);function n(s,o){let u=e(s,o);return s.getStatus()===404&&(u=NN(r.path)),u.serverResponse=o.serverResponse,u}return n}function TD(r,e,n){const s=e.fullServerUrl(),o=Xh(s,r.host,r._protocol),u="GET",f=r.maxOperationRetryTime,m=new ng(o,u,ED(r,n),f);return m.errorHandler=Wb(e),m}function bD(r,e){const n=e.fullServerUrl(),s=Xh(n,r.host,r._protocol),o="DELETE",u=r.maxOperationRetryTime;function f(g,y){}const m=new ng(s,o,f,u);return m.successCodes=[200,204],m.errorHandler=Wb(e),m}function wD(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function AD(r,e,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=wD(null,e)),s}function SD(r,e,n,s,o){const u=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function m(){let ne="";for(let ee=0;ee<2;ee++)ne=ne+Math.random().toString().slice(2);return ne}const g=m();f["Content-Type"]="multipart/related; boundary="+g;const y=AD(e,s,o),T=_D(y,n),A="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+T+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,R=`\r
--`+g+"--",U=is.getBlob(A,s,R);if(U===null)throw zN();const z={name:y.fullPath},X=Xh(u,r.host,r._protocol),G="POST",oe=r.maxUploadRetryTime,le=new ng(X,G,vD(r,n),oe);return le.urlParams=z,le.headers=f,le.body=U.uploadData(),le.errorHandler=Zb(e),le}class RD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ea.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ea.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ea.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,o){if(this.sent_)throw Dl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xD extends RD{initXhr(){this.xhr_.responseType="text"}}function ig(){return new xD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this._service=e,n instanceof Dn?this._location=n:this._location=Dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sa(e,n)}get root(){const e=new Dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $b(this._location.path)}get storage(){return this._service}get parent(){const e=hD(this._location.path);if(e===null)return null;const n=new Dn(this._location.bucket,e);return new sa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw HN(e)}}function CD(r,e,n){r._throwIfRoot("uploadBytes");const s=SD(r.storage,r._location,Yb(),new is(e,!0),n);return r.storage.makeRequestWithTokens(s,ig).then(o=>({metadata:o,ref:r}))}function ID(r){r._throwIfRoot("getDownloadURL");const e=TD(r.storage,r._location,Yb());return r.storage.makeRequestWithTokens(e,ig).then(n=>{if(n===null)throw BN();return n})}function ND(r){r._throwIfRoot("deleteObject");const e=bD(r.storage,r._location);return r.storage.makeRequestWithTokens(e,ig)}function DD(r,e){const n=fD(r._location.path,e),s=new Dn(r._location.bucket,n);return new sa(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(r){return/^[A-Za-z]+:\/\//.test(r)}function MD(r,e){return new sa(r,e)}function ew(r,e){if(r instanceof rg){const n=r;if(n._bucket==null)throw PN();const s=new sa(n,n._bucket);return e!=null?ew(s,e):s}else return e!==void 0?DD(r,e):r}function kD(r,e){if(e&&OD(e)){if(r instanceof rg)return MD(r,e);throw np("To use ref(service, url), the first argument must be a Storage instance.")}else return ew(r,e)}function rE(r,e){const n=e==null?void 0:e[Bb];return n==null?null:Dn.makeFromBucketSpec(n,r)}function VD(r,e,n,s={}){r.host=`${e}:${n}`,r._protocol="http";const{mockUserToken:o}=s;o&&(r._overrideAuthToken=typeof o=="string"?o:RE(o,r.app.options.projectId))}class rg{constructor(e,n,s,o,u){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=zb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CN,this._maxUploadRetryTime=IN,this._requests=new Set,o!=null?this._bucket=Dn.makeFromBucketSpec(o,this._host):this._bucket=rE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dn.makeFromBucketSpec(this._url,e):this._bucket=rE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sa(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new FN(qb());{const f=tD(e,this._appId,s,o,n,this._firebaseVersion,u);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const sE="@firebase/storage",aE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="storage";function oE(r,e,n){return r=Ye(r),CD(r,e,n)}function lE(r){return r=Ye(r),ID(r)}function uE(r){return r=Ye(r),ND(r)}function $c(r,e){return r=Ye(r),kD(r,e)}function UD(r=Ch(),e){r=Ye(r);const s=Jl(r,tw).getImmediate({identifier:e}),o=sp("storage");return o&&LD(s,...o),s}function LD(r,e,n,s={}){VD(r,e,n,s)}function jD(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new rg(n,s,o,e,aa)}function PD(){us(new rr(tw,jD,"PUBLIC").setMultipleInstances(!0)),Gn(sE,aE,""),Gn(sE,aE,"esm2017")}PD();const zD={apiKey:"AIzaSyBAHNQFjjHmb6v_RLvsrILADsd11UIP8P8",authDomain:"montu-a4901.firebaseapp.com",projectId:"montu-a4901",storageBucket:"montu-a4901.appspot.com",messagingSenderId:"1049228902413",appId:"Montu"},sg=IE(zD),$s=lx(sg),yt=QI(sg),Yc=UD(sg),nw=se.createContext(void 0),BD=({children:r})=>{const[e,n]=se.useState(null),[s,o]=se.useState([]),[u,f]=se.useState(!0);se.useEffect(()=>{let z;if(e&&e.role==="client"){const X=Fn(yt,"users",e.id);z=wh(X,G=>{G.exists()&&n({id:G.id,...G.data()})})}return()=>{z&&z()}},[e==null?void 0:e.id]);const m=async z=>{console.log("--- Inicio de processUserLogin ---");const X=localStorage.getItem("postLoginAction");if(X&&(localStorage.removeItem("postLoginAction"),JSON.parse(X).action==="subscribe")){console.log("Acción post-login detectada: 'subscribe'. Redirigiendo a pago...");const oe={id:z.uid,email:z.email,username:z.displayName||"Nuevo Entrenador",photoURL:z.photoURL,role:"trainer",subscriptionStatus:"pending"};n(oe);try{const le=jb(),fe=(await Pb(le,"createSubscription")({userId:oe.id,userEmail:oe.email,userName:oe.username})).data;if(fe.checkoutUrl)window.location.href=fe.checkoutUrl;else throw new Error(fe.error||"No se recibió la URL de pago.")}catch(le){console.error("Error al iniciar el proceso de suscripción post-login:",le),alert("Hubo un error al conectar con el sistema de pago."),await Bc($s)}return}console.log("Flujo de login normal (no es suscripción).");try{const G=lo(Zi(yt,"users"),uo("email","==",z.email)),oe=await Jm(G);if(oe.empty){console.error("ERROR: Usuario no encontrado en la base de datos."),alert("Tu cuenta no está registrada. Si eres un cliente, contacta a tu entrenador. Si eres un entrenador, completa la suscripción."),await Bc($s);return}const le=oe.docs[0],ne=le.data();let ee=Fn(yt,"users",le.id);const fe={email:z.email,username:z.displayName||ne.username||"Usuario",photoURL:z.photoURL||null,...ne.role&&{role:ne.role},...ne.subscriptionStatus&&{subscriptionStatus:ne.subscriptionStatus},...ne.trainerId&&{trainerId:ne.trainerId}};if(le.id!==z.uid){console.warn("ADVERTENCIA: Iniciando MIGRACIÓN de ID.");const ie=lN(yt),x=Fn(yt,"users",z.uid);ie.set(x,fe),ie.delete(le.ref),await ie.commit(),ee=x,console.log("MIGRACIÓN COMPLETA.")}else console.log("OK: IDs Coinciden. Actualizando documento."),await Js(ee,fe);n({id:ee.id,...fe}),console.log("SUCCESS: Usuario establecido en el contexto.")}catch(G){console.error("Error al procesar el inicio de sesión:",G.message||G),alert(`Error de autenticación/DB. Se cerró la sesión. Detalle: ${G.code||G.message}`),await Bc($s)}};se.useEffect(()=>{const z=ZR($s,async X=>{X?e||await m(X):n(null),f(!1)});return()=>z()},[]),se.useEffect(()=>{if(e&&e.role==="trainer"){const z=lo(Zi(yt,"users"),uo("trainerId","==",e.id)),X=wh(z,G=>{const oe=G.docs.map(le=>({id:le.id,...le.data()}));o(oe)});return()=>X()}else o([])},[e]);const U={currentUser:e,isAuthLoading:u,trainerClients:s,logout:async()=>{await Bc($s)},updateClientPlan:async(z,X)=>{const G=Fn(yt,"users",z);await Js(G,{plan:X})},addClient:async z=>{if(!e||e.role!=="trainer")return{success:!1,message:"No tienes permiso para realizar esta acción."};const X=lo(Zi(yt,"users"),uo("email","==",z.email));return(await Jm(X)).empty?(await Wm(Zi(yt,"users"),{...z,role:"client",trainerId:e.id}),{success:!0,message:"Cliente añadido con éxito."}):{success:!1,message:"Un usuario con este email ya existe."}},removeClient:async z=>{await Zm(Fn(yt,"users",z))},updateClientExercise:async(z,X,G)=>{if(!e||e.role!=="client"||!e.plan){console.error("Acción no permitida o el plan no existe.");return}const oe=e,le=Fn(yt,"users",oe.id),ne=JSON.parse(JSON.stringify(oe.plan)),ee=ne.workouts.findIndex(fe=>fe.id===z);if(ee===-1){console.error("Workout no encontrado");return}ne.workouts[ee].exercises[X]=G;try{await Js(le,{plan:ne})}catch(fe){console.error("Error al actualizar el ejercicio:",fe)}}};return E.jsx(nw.Provider,{value:U,children:r})},gs=()=>{const r=se.useContext(nw);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},iw=se.createContext(void 0),qD=({children:r})=>{const{currentUser:e}=gs(),[n,s]=se.useState([]),[o,u]=se.useState(!0),[f,m]=se.useState([]),[g,y]=se.useState(!0),[T,A]=se.useState(!1);se.useEffect(()=>{if(e&&e.role==="trainer"){const ee=lo(Zi(yt,"users"),uo("trainerId","==",e.id)),fe=wh(ee,ie=>{const x=ie.docs.map(S=>({id:S.id,...S.data()}));s(x),u(!1)},ie=>{u(!1)});return()=>fe()}else s([]),u(!1)},[e]),se.useEffect(()=>{if(e&&e.role==="trainer"){y(!0);const ee=lo(Zi(yt,"exercises"),uo("trainerId","==",e.id)),fe=wh(ee,ie=>{const x=ie.docs.map(S=>({id:S.id,...S.data()}));m(x),y(!1)},ie=>{y(!1)});return()=>fe()}else m([]),y(!1)},[e]);const ne={trainerClients:n,isLoadingClients:o,masterExercises:f,isLoadingExercises:g,addClient:async ee=>{if(!e||e.role!=="trainer")throw new Error("No tienes permiso para realizar esta acción.");const fe=async()=>{const ie=lo(Zi(yt,"users"),uo("email","==",ee.email.trim()));if(!(await Jm(ie)).empty)throw new Error("Un usuario con este email ya existe.");await Wm(Zi(yt,"users"),{...ee,role:"client",trainerId:e.id})};await Zr.promise(fe(),{loading:"Añadiendo cliente...",success:"Cliente añadido con éxito.",error:ie=>ie.message||"No se pudo añadir al cliente."})},removeClient:async ee=>{const fe=Zm(Fn(yt,"users",ee));await Zr.promise(fe,{loading:"Eliminando cliente...",success:"Cliente eliminado correctamente.",error:"No se pudo eliminar al cliente."})},updateClientPlan:async(ee,fe)=>{if(!e||e.role!=="trainer")throw new Error("No tienes permiso para realizar esta acción.");const ie={...fe,createdAt:fe.createdAt||at.now(),updatedAt:at.now()},x=Js(Fn(yt,"users",ee),{plan:ie});await Zr.promise(x,{loading:"Guardando el plan...",success:"Plan guardado con éxito.",error:"Error al guardar el plan."})},addMasterExercise:async ee=>{if(!e)throw new Error("Acción no permitida");const fe=Wm(Zi(yt,"exercises"),{...ee,trainerId:e.id});await Zr.promise(fe,{loading:"Creando ejercicio...",success:"Ejercicio creado con éxito.",error:"No se pudo crear el ejercicio."})},updateMasterExercise:async(ee,fe)=>{const ie=Js(Fn(yt,"exercises",ee),fe);await Zr.promise(ie,{loading:"Actualizando ejercicio...",success:"Ejercicio actualizado correctamente.",error:"Error al actualizar el ejercicio."})},deleteMasterExercise:async ee=>{const fe=Zm(Fn(yt,"exercises",ee));await Zr.promise(fe,{loading:"Eliminando ejercicio...",success:"Ejercicio eliminado de tu banco.",error:"No se pudo eliminar el ejercicio."})},updateTrainerProfile:async ee=>{if(!e||e.role!=="trainer")throw new Error("Usuario no autenticado o sin permisos.");const fe=async()=>{A(!0);const ie=e,x=Fn(yt,"users",ie.id),S={};if(ee.description!==void 0&&(S.description=ee.description),ee.newProfileImage){if(ie.photoURL)try{await uE($c(Yc,ie.photoURL))}catch{console.warn("No se pudo borrar la imagen antigua.")}const C=$c(Yc,`profile_images/${ie.id}/${Date.now()}_${ee.newProfileImage.name}`);await oE(C,ee.newProfileImage),S.photoURL=await lE(C)}if(ee.galleryImagesToDelete&&ee.galleryImagesToDelete.length>0&&(S.galleryImages=oN(...ee.galleryImagesToDelete),ee.galleryImagesToDelete.forEach(C=>{try{uE($c(Yc,C))}catch{console.warn("No se pudo borrar imagen de galería.")}})),Object.keys(S).length>0&&await Js(x,S),ee.newGalleryImages&&ee.newGalleryImages.length>0){const C=await Promise.all(ee.newGalleryImages.map(async O=>{const k=$c(Yc,`gallery_images/${ie.id}/${Date.now()}_${O.name}`);return await oE(k,O),lE(k)}));await Js(x,{galleryImages:aN(...C)})}};await Zr.promise(fe(),{loading:"Guardando cambios del perfil...",success:"Perfil actualizado con éxito.",error:"Hubo un error al guardar los cambios."}).finally(()=>{A(!1)})},isUpdatingProfile:T};return E.jsx(iw.Provider,{value:ne,children:r})},ha=()=>{const r=se.useContext(iw);if(r===void 0)throw new Error("useTrainer debe ser usado dentro de un TrainerProvider");return r},HD=r=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[E.jsx("path",{d:"M14.4 14.4 9.6 9.6"}),E.jsx("path",{d:"M18 18H5.5"}),E.jsx("path",{d:"M18 6H5.5"}),E.jsx("path",{d:"M18 6V5a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v1"}),E.jsx("path",{d:"M18 18v1a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-1"}),E.jsx("path",{d:"m21 6-2 0"}),E.jsx("path",{d:"m21 18-2 0"}),E.jsx("path",{d:"m3 6-1 0"}),E.jsx("path",{d:"m3 18-1 0"})]}),FD=r=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[E.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),E.jsx("polyline",{points:"16 17 21 12 16 7"}),E.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),GD=r=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[E.jsx("path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.934a.5.5 0 0 0-.777-.416L16 11"}),E.jsx("rect",{x:"2",y:"7",width:"14",height:"10",rx:"2",ry:"2"})]}),KD=r=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[E.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"}),E.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]}),ag=r=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[E.jsx("path",{d:"M12 2L8 7h8L12 2z",fill:"currentColor"}),E.jsx("path",{d:"M12 22l4-5H8l4 5z",fill:"currentColor"}),E.jsx("path",{d:"M7 8l-5 4 5 4"}),E.jsx("path",{d:"M17 8l5 4-5 4"})]}),QD=({onNavigateToLanding:r})=>{const[e,n]=se.useState(!1),s=async()=>{n(!0);const o=new Ji;try{await YR($s,eT),console.log("Persistencia establecida a LOCAL.");const u=await y2($s,o);console.log(`Login exitoso con Popup. Usuario: ${u.user.email}`)}catch(u){console.error("Error al iniciar sesión con POPUP:",u);const f=u.message||"Error desconocido en el Popup.";alert(`❌ ERROR CRÍTICO DE AUTENTICACIÓN ❌
Detalle: ${f}

Si este error persiste, revisa las restricciones de la API Key en Google Cloud Console.`),n(!1)}};return E.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-surface p-8 rounded-2xl shadow-2xl w-full max-w-sm border border-slate-200 text-center",children:[E.jsxs("div",{className:"flex flex-col items-center mb-6",children:[E.jsx(ag,{className:"w-16 h-16 text-primary mb-4"}),E.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Montu"}),E.jsx("p",{className:"text-text-secondary mt-1",children:"Accede con tu cuenta de Google"})]}),E.jsxs("button",{onClick:s,disabled:e,className:"w-full flex items-center justify-center gap-3 bg-white border border-slate-300 text-text-primary font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-colors hover:bg-slate-50 disabled:opacity-50",children:[E.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 48 48",children:[E.jsx("path",{fill:"#4285F4",d:"M24 9.5c3.2 0 6.1 1.1 8.4 3.2l6.5-6.5C34.6 2.3 29.6 0 24 0 14.9 0 7.3 5.4 3 13.2l7.7 6C12.5 13.4 17.8 9.5 24 9.5z"}),E.jsx("path",{fill:"#34A853",d:"M46.2 25.4c0-1.7-.2-3.4-.5-5H24v9.5h12.5c-.5 3.1-2.2 5.7-4.8 7.5l7.3 5.7c4.3-4 6.7-9.8 6.7-16.7z"}),E.jsx("path",{fill:"#FBBC05",d:"M10.7 28.2c-.4-1.2-.6-2.5-.6-3.8s.2-2.6.6-3.8l-7.7-6C1.1 18.2 0 21 0 24.4c0 3.4 1.1 6.3 3 8.8l7.7-5z"}),E.jsx("path",{fill:"#EA4335",d:"M24 48c5.6 0 10.5-1.9 14-5.1l-7.3-5.7c-1.9 1.3-4.3 2-6.7 2-6.2 0-11.5-3.9-13.3-9.3l-7.7 6C7.3 42.6 14.9 48 24 48z"}),E.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),e?"Conectando...":"Ingresar con Google"]}),E.jsx("div",{className:"text-center mt-6",children:E.jsx("button",{onClick:r,className:"text-sm text-text-secondary hover:text-primary transition-colors",children:"« Volver al inicio"})})]})})},$D=()=>{const{logout:r,currentUser:e}=gs();return e?E.jsxs("header",{className:"bg-surface p-4 shadow-sm flex justify-between items-center border-b border-slate-200",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(ag,{className:"w-8 h-8 text-primary"}),E.jsx("h1",{className:"text-2xl font-bold text-text-primary tracking-wider",children:"Montu"})]}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("span",{className:"text-text-secondary hidden sm:block",children:["Bienvenido, ",e.username]}),E.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300","aria-label":"Cerrar Sesión",children:[E.jsx(FD,{className:"w-5 h-5"}),E.jsx("span",{className:"hidden sm:block",children:"Cerrar Sesión"})]})]})]}):null};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XD=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),cE=r=>{const e=XD(r);return e.charAt(0).toUpperCase()+e.slice(1)},rw=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),JD=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=se.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:f,...m},g)=>se.createElement("svg",{ref:g,...ZD,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:rw("lucide",o),...!u&&!JD(m)&&{"aria-hidden":"true"},...m},[...f.map(([y,T])=>se.createElement(y,T)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=(r,e)=>{const n=se.forwardRef(({className:s,...o},u)=>se.createElement(WD,{ref:u,iconNode:e,className:rw(`lucide-${YD(cE(r))}`,`lucide-${r}`,s),...o}));return n.displayName=cE(r),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tO=nn("circle-check-big",eO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],iO=nn("clipboard-list",nO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],sO=nn("credit-card",rO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],hE=nn("image-plus",aO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],lO=nn("layout-dashboard",oO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],cO=nn("menu",uO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Jh=nn("plus",hO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dO=nn("save",fO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sw=nn("settings",mO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gO=nn("square-pen",pO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zh=nn("trash-2",yO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vO=nn("trash",_O);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],og=nn("user",EO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lg=nn("users",TO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cu=nn("x",bO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ug=nn("zap",wO),wm=({icon:r,label:e,value:n,color:s,isLoading:o})=>{const f={indigo:{bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-700",value:"text-indigo-900"},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",value:"text-green-900"},yellow:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-700",value:"text-yellow-900"}}[s];return E.jsx("div",{className:`${f.bg} p-5 rounded-lg border ${f.border} shadow-sm`,children:E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:`p-3 rounded-full ${f.text} ${f.bg==="bg-yellow-50"?"bg-yellow-100":f.bg==="bg-green-50"?"bg-green-100":"bg-indigo-100"}`,children:E.jsx(r,{className:"w-6 h-6"})}),E.jsxs("div",{children:[E.jsx("p",{className:`text-sm font-medium ${f.text}`,children:e}),o?E.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded-md animate-pulse mt-1"}):E.jsx("p",{className:`text-3xl font-bold ${f.value}`,children:n})]})]})})},fE=()=>{const{trainerClients:r,masterExercises:e,isLoadingClients:n,isLoadingExercises:s}=ha(),o=r.length,u=r.filter(m=>m.plan&&m.plan.workouts.length>0).length,f=e.length;return E.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Resumen del Día"}),E.jsx("p",{className:"text-gray-600",children:"Bienvenido de nuevo. Aquí puedes ver un resumen rápido de tus clientes, planes asignados y tu banco de ejercicios."}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[E.jsx(wm,{icon:lg,label:"Clientes Activos",value:o,color:"indigo",isLoading:n}),E.jsx(wm,{icon:iO,label:"Clientes con Plan",value:u,color:"green",isLoading:n}),E.jsx(wm,{icon:ug,label:"Ejercicios Creados",value:f,color:"yellow",isLoading:s})]})]})},AO=({isOpen:r,onClose:e,onSelect:n})=>{const{masterExercises:s,isLoadingExercises:o}=ha(),[u,f]=se.useState(new Set),m=y=>{const T=new Set(u);T.has(y)?T.delete(y):T.add(y),f(T)},g=()=>{const y=s.filter(T=>u.has(T.id));n(y),e()};return r?E.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]",children:[E.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[E.jsx("h3",{className:"text-lg font-semibold",children:"Seleccionar Ejercicios"}),E.jsx("button",{type:"button",onClick:e,children:E.jsx(cu,{className:"w-5 h-5"})})]}),E.jsx("div",{className:"p-4 overflow-y-auto",children:o?E.jsx("p",{children:"Cargando..."}):E.jsx("ul",{className:"space-y-2",children:s.map(y=>E.jsxs("li",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100",children:[E.jsx("input",{type:"checkbox",id:`ex-select-${y.id}`,checked:u.has(y.id),onChange:()=>m(y.id),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),E.jsxs("label",{htmlFor:`ex-select-${y.id}`,className:"flex-grow cursor-pointer",children:[E.jsx("p",{className:"font-medium",children:y.name}),E.jsx("p",{className:"text-sm text-gray-500",children:y.muscleGroup})]})]},y.id))})}),E.jsxs("div",{className:"p-4 bg-gray-50 flex justify-end gap-3",children:[E.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md text-sm",children:"Cancelar"}),E.jsx("button",{type:"button",onClick:g,disabled:u.size===0,className:"py-2 px-4 rounded-md text-sm text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:"Añadir Seleccionados"})]})]})}):null},SO=({exercise:r,onUpdate:e,onRemove:n})=>{const s=(o,u)=>{e({...r,[o]:u})};return E.jsxs("div",{className:"bg-gray-100 p-3 rounded-md border border-gray-200 space-y-2",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("p",{className:"font-semibold text-gray-800",children:r.name}),E.jsx("button",{type:"button",onClick:n,className:"p-1 text-gray-400 hover:text-red-600",children:E.jsx(Zh,{className:"w-4 h-4"})})]}),E.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[E.jsx("input",{type:"number",value:r.sets,onChange:o=>s("sets",parseInt(o.target.value)||0),className:"w-full p-1 border rounded",placeholder:"Sets"}),E.jsx("input",{type:"text",value:r.reps,onChange:o=>s("reps",o.target.value),className:"w-full p-1 border rounded",placeholder:"Reps"}),E.jsx("input",{type:"text",value:r.weight||"",onChange:o=>s("weight",o.target.value),className:"w-full p-1 border rounded",placeholder:"Peso"}),E.jsx("input",{type:"text",value:r.rest,onChange:o=>s("rest",o.target.value),className:"w-full p-1 border rounded",placeholder:"Descanso"})]}),E.jsx("textarea",{value:r.trainerNotes||"",onChange:o=>s("trainerNotes",o.target.value),className:"w-full p-1 border rounded text-sm",placeholder:"Notas para el cliente...",rows:1})]})},RO=({workout:r,onUpdate:e,onDelete:n})=>{const[s,o]=se.useState(!1),u=y=>{e({...r,day:y.target.value})},f=y=>{const T=y.map(A=>({id:A.id,name:A.name,videoUrl:A.videoUrl,sets:4,reps:"10-12",weight:"",rest:"60s",trainerNotes:""}));e({...r,exercises:[...r.exercises,...T]})},m=(y,T)=>{const A=[...r.exercises];A[y]=T,e({...r,exercises:A})},g=y=>{const T=r.exercises.filter((A,R)=>R!==y);e({...r,exercises:T})};return E.jsxs(E.Fragment,{children:[E.jsx(AO,{isOpen:s,onClose:()=>o(!1),onSelect:f}),E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("input",{type:"text",value:r.day,onChange:u,placeholder:"Nombre del día (ej: Día 1: Pecho y Tríceps)",className:"text-lg font-bold text-gray-800 p-1 -ml-1 border-transparent focus:border-gray-300 focus:ring-0 rounded"}),E.jsx("button",{type:"button",onClick:n,className:"p-1 text-gray-400 hover:text-red-600",children:E.jsx(Zh,{className:"w-5 h-5"})})]}),E.jsx("div",{className:"space-y-3 mb-4",children:r.exercises.map((y,T)=>E.jsx(SO,{exercise:y,onUpdate:A=>m(T,A),onRemove:()=>g(T)},T))}),E.jsxs("button",{type:"button",onClick:()=>o(!0),className:"w-full flex items-center justify-center gap-2 py-2 px-4 text-sm font-medium text-indigo-700 bg-indigo-100 hover:bg-indigo-200 rounded-md",children:[E.jsx(Jh,{className:"w-4 h-4"}),"Añadir Ejercicio"]})]})]})},xO=({isOpen:r,onClose:e,client:n})=>{const{updateClientPlan:s}=ha(),[o,u]=se.useState(n.plan||{id:n.id,workouts:[],createdAt:at.now(),updatedAt:at.now()}),[f,m]=se.useState(!1),g=()=>{const R={id:`day-${o.workouts.length+1}`,day:`Día ${o.workouts.length+1}`,exercises:[]};u({...o,workouts:[...o.workouts,R]})},y=(R,U)=>{const z=[...o.workouts];z[R]=U,u({...o,workouts:z})},T=R=>{const U=o.workouts.filter((z,X)=>X!==R);u({...o,workouts:U})},A=async()=>{m(!0);try{await s(n.id,o),e()}catch(R){console.error("Error guardando el plan:",R),alert("No se pudo guardar el plan.")}finally{m(!1)}};return r?E.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-xl w-full max-w-4xl flex flex-col max-h-[90vh]",children:[E.jsxs("div",{className:"p-4 border-b bg-white rounded-t-lg flex justify-between items-center sticky top-0",children:[E.jsxs("h3",{className:"text-xl font-semibold text-gray-800",children:["Editor de Plan para ",n.username]}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:E.jsx(cu,{className:"w-5 h-5 text-gray-500"})})]}),E.jsxs("div",{className:"p-4 md:p-6 overflow-y-auto space-y-4",children:[o.workouts.map((R,U)=>E.jsx(RO,{workout:R,onUpdate:z=>y(U,z),onDelete:()=>T(U)},U)),E.jsxs("button",{type:"button",onClick:g,className:"w-full flex items-center justify-center gap-2 py-2 px-4 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md",children:[E.jsx(Jh,{className:"w-4 h-4"}),"Añadir Día de Entrenamiento"]})]}),E.jsxs("div",{className:"p-4 bg-white border-t rounded-b-lg flex justify-end gap-3 sticky bottom-0",children:[E.jsx("button",{onClick:e,className:"py-2 px-4 border rounded-md text-sm font-medium",children:"Cancelar"}),E.jsx("button",{onClick:A,disabled:f,className:"py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:f?"Guardando...":"Guardar Plan"})]})]})}):null},CO=({isOpen:r,onClose:e,onAdd:n})=>{const[s,o]=se.useState(""),[u,f]=se.useState(""),[m,g]=se.useState(!1),y=async T=>{if(T.preventDefault(),!s.trim()||!u.trim()){Zr.error("Por favor, completa todos los campos.");return}g(!0);try{await n(s,u),e(),o(""),f("")}catch{}finally{g(!1)}};return r?E.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[E.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Añadir Nuevo Cliente"}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:E.jsx(cu,{className:"w-5 h-5 text-gray-500"})})]}),E.jsxs("form",{onSubmit:y,children:[E.jsxs("div",{className:"p-6 space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"client-name",className:"block text-sm font-medium text-gray-700",children:"Nombre del Cliente"}),E.jsx("input",{type:"text",id:"client-name",value:s,onChange:T=>o(T.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"client-email",className:"block text-sm font-medium text-gray-700",children:"Email del Cliente"}),E.jsx("input",{type:"email",id:"client-email",value:u,onChange:T=>f(T.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"}),E.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El cliente usará esta cuenta de Google para iniciar sesión."})]})]}),E.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-lg flex justify-end gap-3",children:[E.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancelar"}),E.jsx("button",{type:"submit",disabled:m,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:m?"Añadiendo...":"Añadir Cliente"})]})]})]})}):null},IO=({client:r,onOpenPlanEditor:e})=>r?E.jsxs("div",{className:"p-6",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[E.jsx("img",{src:r.photoURL||`https://ui-avatars.com/api/?name=${r.username}&background=random`,alt:r.username,className:"w-20 h-20 rounded-full object-cover"}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:r.username}),E.jsx("p",{className:"text-gray-500",children:r.email})]})]}),E.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[E.jsx("h4",{className:"font-semibold text-lg text-gray-700 mb-2",children:"Plan de Entrenamiento"}),r.plan&&r.plan.workouts.length>0?E.jsxs("div",{className:"space-y-2",children:[E.jsxs("p",{className:"text-gray-600",children:["Este cliente tiene un plan con ",r.plan.workouts.length," día(s)."]}),E.jsx("ul",{className:"list-disc list-inside text-gray-500",children:r.plan.workouts.map(n=>E.jsx("li",{children:n.day},n.id))})]}):E.jsx("p",{className:"text-gray-600",children:"Este cliente aún no tiene un plan de entrenamiento asignado."}),E.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm",children:r.plan?"Editar Plan":"Crear Plan"})]})]}):E.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:E.jsx("p",{children:"Selecciona un cliente para ver sus detalles"})}),NO=()=>{const{trainerClients:r,isLoadingClients:e,addClient:n,removeClient:s}=ha(),[o,u]=se.useState(null),[f,m]=se.useState(!1),[g,y]=se.useState(!1),T=async(R,U)=>{await n({username:R,email:U})},A=(R,U)=>{R.stopPropagation(),window.confirm("¿Estás seguro de que quieres eliminar a este cliente? Esta acción es irreversible.")&&(s(U),(o==null?void 0:o.id)===U&&u(null))};return E.jsxs(E.Fragment,{children:[E.jsx(CO,{isOpen:f,onClose:()=>m(!1),onAdd:T}),o&&E.jsx(xO,{isOpen:g,onClose:()=>y(!1),client:o}),E.jsxs("div",{className:"flex flex-col md:flex-row h-full max-h-[calc(100vh-160px)] bg-white rounded-lg shadow-md overflow-hidden",children:[E.jsxs("aside",{className:"w-full md:w-1/3 lg:w-1/4 border-r border-gray-200 overflow-y-auto",children:[E.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[E.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[E.jsx(lg,{className:"w-5 h-5 mr-2"})," Clientes"]}),E.jsx("button",{onClick:()=>m(!0),className:"p-2 rounded-full bg-indigo-600 text-white hover:bg-indigo-700",title:"Añadir nuevo cliente",children:E.jsx(Jh,{className:"w-5 h-5"})})]}),e?E.jsx("p",{className:"p-4 text-center text-gray-500",children:"Cargando clientes..."}):E.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(R=>E.jsxs("li",{onClick:()=>u(R),className:`p-3 flex justify-between items-center cursor-pointer ${(o==null?void 0:o.id)===R.id?"bg-indigo-100":"hover:bg-gray-50"}`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("img",{src:R.photoURL||`https://ui-avatars.com/api/?name=${R.username}&background=random`,alt:R.username,className:"w-10 h-10 rounded-full object-cover"}),E.jsxs("div",{children:[E.jsx("p",{className:"font-semibold text-gray-800",children:R.username}),E.jsx("p",{className:"text-xs text-gray-500",children:R.email})]})]}),E.jsx("button",{onClick:U=>A(U,R.id),className:"p-1 rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600",title:"Eliminar cliente",children:E.jsx(vO,{className:"w-4 h-4"})})]},R.id))})]}),E.jsx("main",{className:"flex-1 overflow-y-auto",children:E.jsx(IO,{client:o,onOpenPlanEditor:()=>y(!0)})})]})]})},DO=({isOpen:r,onClose:e,exercise:n})=>{const{addMasterExercise:s,updateMasterExercise:o}=ha(),[u,f]=se.useState((n==null?void 0:n.name)||""),[m,g]=se.useState((n==null?void 0:n.muscleGroup)||""),[y,T]=se.useState((n==null?void 0:n.videoUrl)||""),[A,R]=se.useState(!1),U=async z=>{z.preventDefault(),R(!0);try{n?await o(n.id,{name:u,muscleGroup:m,videoUrl:y}):await s({name:u,muscleGroup:m,videoUrl:y}),e()}catch(X){console.error("Error guardando ejercicio:",X),alert("No se pudo guardar el ejercicio.")}finally{R(!1)}};return r?E.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[E.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n?"Editar Ejercicio":"Crear Nuevo Ejercicio"}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:E.jsx(cu,{className:"w-5 h-5 text-gray-500"})})]}),E.jsxs("form",{onSubmit:U,children:[E.jsxs("div",{className:"p-6 space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"ex-name",className:"block text-sm font-medium text-gray-700",children:"Nombre del Ejercicio"}),E.jsx("input",{type:"text",id:"ex-name",value:u,onChange:z=>f(z.target.value),required:!0,className:"mt-1 block w-full p-2 rounded-md border-gray-300 shadow-sm"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"ex-group",className:"block text-sm font-medium text-gray-700",children:"Grupo Muscular"}),E.jsx("input",{type:"text",id:"ex-group",value:m,onChange:z=>g(z.target.value),required:!0,className:"mt-1 block w-full p-2 rounded-md border-gray-300 shadow-sm"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"ex-video",className:"block text-sm font-medium text-gray-700",children:"URL del Video (YouTube, etc.)"}),E.jsx("input",{type:"url",id:"ex-video",value:y,onChange:z=>T(z.target.value),className:"mt-1 block w-full p-2 rounded-md border-gray-300 shadow-sm"})]})]}),E.jsxs("div",{className:"p-6 bg-gray-50 flex justify-end gap-3",children:[E.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md text-sm font-medium",children:"Cancelar"}),E.jsx("button",{type:"submit",disabled:A,className:"py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:A?"Guardando...":"Guardar Ejercicio"})]})]})]})}):null},OO=()=>{const{masterExercises:r,isLoadingExercises:e,deleteMasterExercise:n}=ha(),[s,o]=se.useState(!1),[u,f]=se.useState(null),m=()=>{f(null),o(!0)},g=T=>{f(T),o(!0)},y=async T=>{if(window.confirm("¿Seguro que quieres eliminar este ejercicio de tu banco?"))try{await n(T)}catch{alert("No se pudo eliminar el ejercicio.")}};return E.jsxs(E.Fragment,{children:[s&&E.jsx(DO,{isOpen:s,onClose:()=>o(!1),exercise:u}),E.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center",children:[E.jsx(ug,{className:"w-6 h-6 mr-3 text-red-500"}),"Banco de Ejercicios"]}),E.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition duration-150 shadow-md",children:[E.jsx(Jh,{className:"w-5 h-5"}),"Nuevo Ejercicio"]})]}),e?E.jsx("p",{children:"Cargando ejercicios..."}):E.jsx("div",{className:"space-y-3",children:r.length===0?E.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aún no has creado ningún ejercicio. ¡Añade el primero!"}):r.map(T=>E.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex justify-between items-center border border-gray-200",children:[E.jsxs("div",{children:[E.jsx("p",{className:"font-semibold text-gray-900",children:T.name}),E.jsx("p",{className:"text-sm text-gray-600",children:T.muscleGroup})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>g(T),className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-100 rounded-full",children:E.jsx(gO,{className:"w-4 h-4"})}),E.jsx("button",{onClick:()=>y(T.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-full",children:E.jsx(Zh,{className:"w-4 h-4"})})]})]},T.id))})]})]})},MO=()=>{var fe;const{currentUser:r}=gs(),{updateTrainerProfile:e,isUpdatingProfile:n}=ha(),s=r,[o,u]=se.useState(""),[f,m]=se.useState(null),[g,y]=se.useState([]),[T,A]=se.useState([]),[R,U]=se.useState(null),[z,X]=se.useState([]);se.useEffect(()=>{s&&(u(s.description||""),U(s.photoURL||null))},[s]);const G=ie=>{if(ie.target.files&&ie.target.files[0]){const x=ie.target.files[0];m(x),U(URL.createObjectURL(x))}},oe=ie=>{var x;if(ie.target.files){const S=Array.from(ie.target.files),C=(((x=s.galleryImages)==null?void 0:x.length)||0)-T.length,O=S.length;if(C+O>5){alert(`Puedes subir un máximo de 5 imágenes. Ya tienes ${C}.`);return}y(S);const k=S.map(L=>URL.createObjectURL(L));X(k)}},le=ie=>{window.confirm("¿Seguro que quieres eliminar esta imagen?")&&A(x=>[...x,ie])},ne=async ie=>{ie.preventDefault();try{await e({description:o,newProfileImage:f,newGalleryImages:g,galleryImagesToDelete:T}),m(null),y([]),X([]),A([])}catch(x){console.error("Fallo el submit del perfil:",x)}};if(!s)return E.jsx("div",{children:"Cargando perfil..."});const ee=((fe=s.galleryImages)==null?void 0:fe.filter(ie=>!T.includes(ie)))||[];return E.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-4xl mx-auto",children:[E.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[E.jsx(og,{className:"w-8 h-8 mr-3 text-green-500"}),"Mi Perfil"]}),E.jsxs("form",{onSubmit:ne,className:"space-y-8",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto de Perfil"}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("img",{src:R||`https://ui-avatars.com/api/?name=${s.username}&background=random&color=fff`,alt:"Vista previa del perfil",className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"}),E.jsxs("label",{htmlFor:"profile-upload",className:"cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg border border-gray-300 transition duration-150 flex items-center gap-2",children:[E.jsx(hE,{className:"w-5 h-5"})," Cambiar foto"]}),E.jsx("input",{id:"profile-upload",type:"file",accept:"image/*",className:"hidden",onChange:G})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripción / Biografía"}),E.jsx("textarea",{id:"description",rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2",placeholder:"Cuéntales a tus clientes sobre ti, tu experiencia y tu filosofía de entrenamiento.",value:o,onChange:ie=>u(ie.target.value)})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Galería de Fotos (Máx. 5)"}),E.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mb-4",children:[ee.map((ie,x)=>E.jsxs("div",{className:"relative group aspect-square",children:[E.jsx("img",{src:ie,alt:`Galería ${x+1}`,className:"w-full h-full object-cover rounded-lg shadow-sm"}),E.jsx("button",{type:"button",onClick:()=>le(ie),className:"absolute top-1 right-1 bg-red-600/80 hover:bg-red-700 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Eliminar imagen",children:E.jsx(Zh,{className:"w-4 h-4"})})]},x)),z.map((ie,x)=>E.jsx("div",{className:"relative aspect-square",children:E.jsx("img",{src:ie,alt:`Nueva ${x+1}`,className:"w-full h-full object-cover rounded-lg shadow-sm border-2 border-green-400"})},`preview-${x}`))]}),E.jsxs("label",{htmlFor:"gallery-upload",className:"cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg border border-gray-300 transition duration-150 flex items-center gap-2 w-fit",children:[E.jsx(hE,{className:"w-5 h-5"})," Añadir más fotos"]}),E.jsx("input",{id:"gallery-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:oe})]}),E.jsx("div",{className:"flex justify-end",children:E.jsxs("button",{type:"submit",disabled:n,className:"flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg transition duration-150 shadow-md disabled:bg-indigo-300 disabled:cursor-not-allowed",children:[E.jsx(dO,{className:"w-5 h-5"}),n?"Guardando...":"Guardar Cambios"]})})]})]})},kO=()=>{const{currentUser:r}=gs(),e=r;return E.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-4xl mx-auto",children:[E.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[E.jsx(sw,{className:"w-8 h-8 mr-3 text-gray-500"}),"Configuración"]}),E.jsxs("div",{className:"space-y-8",children:[E.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[E.jsxs("h3",{className:"text-xl font-semibold text-gray-700 mb-4 flex items-center",children:[E.jsx(og,{className:"w-5 h-5 mr-2 text-indigo-500"}),"Cuenta"]}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nombre de Usuario"}),E.jsx("p",{className:"text-gray-800",children:e.username})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),E.jsx("p",{className:"text-gray-800",children:e.email})]}),E.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"El nombre y el email se gestionan a través de tu cuenta de Google."})]})]}),E.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[E.jsxs("h3",{className:"text-xl font-semibold text-gray-700 mb-4 flex items-center",children:[E.jsx(sO,{className:"w-5 h-5 mr-2 text-green-500"}),"Suscripción"]}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Estado de la Suscripción"}),E.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${e.subscriptionStatus==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.subscriptionStatus?e.subscriptionStatus.charAt(0).toUpperCase()+e.subscriptionStatus.slice(1):"Desconocido"})]}),E.jsx("div",{className:"pt-2",children:E.jsx("a",{href:"https://www.mercadopago.com/subscriptions",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm transition-colors",children:"Gestionar en Mercado Pago"})}),E.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Serás redirigido a Mercado Pago para ver los detalles de tu suscripción y métodos de pago."})]})]})]})]})},VO=({view:r,label:e,icon:n,isSelected:s,onClick:o})=>E.jsx("li",{onClick:()=>o(r),children:E.jsxs("div",{className:`flex items-center p-3 rounded-lg transition-all duration-200 cursor-pointer ${s?"bg-indigo-700 text-white shadow-lg":"text-indigo-200 hover:bg-indigo-700/50 hover:text-white"}`,children:[E.jsx(n,{className:"w-5 h-5 mr-3"}),E.jsx("span",{className:"font-medium",children:e})]})}),UO=()=>{var f;const[r,e]=se.useState("overview"),[n,s]=se.useState(!1),o=se.useMemo(()=>[{view:"overview",label:"Resumen",icon:lO},{view:"clients",label:"Clientes",icon:lg},{view:"programs",label:"Programas",icon:ug},{view:"profile",label:"Perfil",icon:og},{view:"settings",label:"Configuración",icon:sw}],[]),u=()=>{switch(r){case"overview":return E.jsx(fE,{});case"clients":return E.jsx(NO,{});case"programs":return E.jsx(OO,{});case"profile":return E.jsx(MO,{});case"settings":return E.jsx(kO,{});default:return E.jsx(fE,{})}};return E.jsxs("div",{className:"min-h-screen bg-gray-100 flex font-inter antialiased",children:[E.jsx("button",{className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-indigo-600 text-white rounded-full shadow-lg",onClick:()=>s(!n),"aria-label":"Toggle Navigation",children:n?E.jsx(cu,{className:"w-6 h-6"}):E.jsx(cO,{className:"w-6 h-6"})}),E.jsxs("aside",{className:`fixed inset-y-0 left-0 transform ${n?"translate-x-0":"-translate-x-full"} 
                   lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out 
                   w-64 bg-indigo-800 p-4 flex flex-col z-40`,children:[E.jsx("div",{className:"flex items-center justify-between lg:justify-center mb-10 mt-2",children:E.jsx("h1",{className:"text-2xl font-extrabold text-white tracking-wider",children:"Montu"})}),E.jsx("nav",{className:"flex-grow",children:E.jsx("ul",{className:"space-y-2",children:o.map(m=>E.jsx(VO,{view:m.view,label:m.label,icon:m.icon,isSelected:r===m.view,onClick:g=>{e(g),s(!1)}},m.view))})}),E.jsx("div",{className:"mt-auto pt-4 border-t border-indigo-700",children:E.jsx("p",{className:"text-sm text-indigo-300 text-center",children:"Dashboard del Entrenador"})})]}),n&&E.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 lg:hidden",onClick:()=>s(!1)}),E.jsxs("main",{className:"flex-1 p-4 md:p-8 lg:ml-0 pt-20 lg:pt-8 overflow-y-auto",children:[E.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 mb-8 capitalize hidden lg:block",children:(f=o.find(m=>m.view===r))==null?void 0:f.label}),u()]})]})},LO=({exercise:r,workoutId:e,exerciseIndex:n})=>{const{updateClientExercise:s}=gs(),[o,u]=se.useState(r.clientWeight||""),[f,m]=se.useState(r.clientNotes||""),[g,y]=se.useState(!1),T=async()=>{y(!0);const X={...r,clientWeight:o,clientNotes:f};await s(e,n,X),y(!1)},A=async()=>{const X={...r,isCompleted:!r.isCompleted,clientWeight:o,clientNotes:f};await s(e,n,X)},R=r.isCompleted?"bg-green-50 border-green-300":"bg-white border-gray-200",U=r.isCompleted?"text-gray-500":"text-gray-800",z=r.isCompleted?"line-through":"";return E.jsxs("div",{className:`p-4 rounded-lg border shadow-sm transition-colors ${R}`,children:[E.jsxs("div",{className:"flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsx("h4",{className:`text-lg font-bold ${U} ${z}`,children:r.name}),r.videoUrl&&E.jsxs("a",{href:r.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center gap-1 mt-1",children:[E.jsx(GD,{className:"w-4 h-4"})," Ver Video"]})]}),E.jsx("button",{onClick:A,className:`p-2 rounded-full transition-colors ${r.isCompleted?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":r.isCompleted?"Marcar como no completado":"Marcar como completado",children:E.jsx(tO,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[E.jsxs("div",{className:`${z}`,children:[E.jsx("p",{className:"text-sm text-gray-500",children:"Series"}),E.jsx("p",{className:`font-semibold text-lg ${U}`,children:r.sets})]}),E.jsxs("div",{className:`${z}`,children:[E.jsx("p",{className:"text-sm text-gray-500",children:"Reps"}),E.jsx("p",{className:`font-semibold text-lg ${U}`,children:r.reps})]}),E.jsxs("div",{className:`${z}`,children:[E.jsx("p",{className:"text-sm text-gray-500",children:"Descanso"}),E.jsx("p",{className:`font-semibold text-lg ${U}`,children:r.rest})]}),E.jsxs("div",{className:`${z}`,children:[E.jsx("p",{className:"text-sm text-gray-500",children:"Peso Sugerido"}),E.jsx("p",{className:`font-semibold text-lg ${U}`,children:r.weight||"N/A"})]})]}),r.trainerNotes&&E.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 rounded-md",children:[E.jsx("p",{className:"text-sm font-semibold text-indigo-800",children:"Notas del Entrenador:"}),E.jsx("p",{className:"text-sm text-indigo-700",children:r.trainerNotes})]}),E.jsxs("div",{className:"mt-4 space-y-3",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:`weight-${r.id}`,className:"block text-sm font-medium text-gray-700",children:"Peso Utilizado (kg/lbs)"}),E.jsx("input",{type:"text",id:`weight-${r.id}`,value:o,onChange:X=>u(X.target.value),onBlur:T,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: 80kg"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:`notes-${r.id}`,className:"block text-sm font-medium text-gray-700",children:"Mis Notas"}),E.jsx("textarea",{id:`notes-${r.id}`,rows:2,value:f,onChange:X=>m(X.target.value),onBlur:T,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"¿Cómo te sentiste? ¿Alguna dificultad?"})]})]})]})},jO=({workout:r})=>E.jsxs("div",{className:"bg-surface p-4 sm:p-6 rounded-xl shadow-md border border-gray-200",children:[E.jsxs("h3",{className:"text-2xl font-bold text-text-primary mb-5 flex items-center gap-3",children:[E.jsx(HD,{className:"w-6 h-6 text-primary"}),r.day]}),E.jsx("div",{className:"space-y-4",children:r.exercises.map((e,n)=>E.jsx(LO,{exercise:e,workoutId:r.id,exerciseIndex:n},`${e.id}-${n}`))})]}),PO=()=>{const{currentUser:r}=gs(),e=r;return(r==null?void 0:r.role)!=="client"?null:e?!e.plan||e.plan.workouts.length===0?E.jsxs("div",{className:"p-8 text-center",children:[E.jsxs("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:["Bienvenido, ",e.username,"!"]}),E.jsx("p",{className:"text-text-secondary",children:"Aún no tienes un plan de entrenamiento asignado. Por favor, contacta a tu entrenador."})]}):E.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[E.jsx("h2",{className:"text-4xl font-extrabold text-text-primary mb-6 text-center",children:"Tu Plan de Entrenamiento"}),E.jsx("div",{className:"space-y-8",children:e.plan.workouts.map(n=>E.jsx(jO,{workout:n},n.id))})]}):E.jsx("div",{className:"p-8 text-center text-text-secondary",children:"Cargando datos del cliente..."})},zO=({onNavigateToOnboarding:r,onNavigateToLogin:e})=>E.jsxs("div",{className:"bg-background min-h-screen text-text-primary",children:[E.jsx("header",{className:"bg-surface/80 backdrop-blur-sm sticky top-0 z-40 border-b border-slate-200",children:E.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(ag,{className:"w-8 h-8 text-primary"}),E.jsx("h1",{className:"text-2xl font-bold text-text-primary tracking-wider",children:"Montu"})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{onClick:e,className:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Acceso Alumno"}),E.jsx("button",{onClick:e,className:"bg-primary hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Acceso Entrenador"})]})]})}),E.jsx("main",{children:E.jsxs("section",{className:"relative text-center py-40 px-6 bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"url('https://images.unsplash.com/photo-1571902943202-507ec2618e8f?q=80&w=2575&auto=format&fit=crop')"},children:[E.jsx("div",{className:"absolute inset-0 bg-black/60"}),E.jsxs("div",{className:"relative z-10",children:[E.jsx("h2",{className:"text-5xl font-extrabold text-white mb-4",children:"Transforma tu Entrenamiento"}),E.jsx("p",{className:"text-xl text-slate-200 max-w-2xl mx-auto mb-8",children:"La herramienta definitiva para entrenadores y alumnos que buscan resultados reales y seguimiento profesional."}),E.jsx("button",{onClick:r,className:"bg-secondary hover:bg-emerald-500 text-white font-bold py-3 px-8 rounded-lg text-lg transition-transform transform hover:scale-105",children:"Comienza Ahora"})]})]})}),E.jsx("footer",{className:"bg-surface py-6 border-t border-slate-200",children:E.jsx("div",{className:"container mx-auto px-6 text-center text-text-secondary",children:E.jsxs("p",{children:["© ",new Date().getFullYear()," Montu. Todos los derechos reservados."]})})})]}),BO=({onNavigateToLogin:r,onNavigateToLanding:e})=>{const[n,s]=se.useState(!1),{currentUser:o}=gs(),u=async()=>{if(s(!0),o)try{const f=jb(),y=(await Pb(f,"createSubscription")({userId:o.id,userEmail:o.email,userName:o.username})).data;if(y.checkoutUrl)window.location.href=y.checkoutUrl;else throw new Error(y.error||"No se recibió la URL de pago.")}catch(f){console.error("Error al iniciar el proceso de pago:",f),alert("Hubo un error al conectar con Mercado Pago. Por favor, inténtalo de nuevo."),s(!1)}else console.log("Usuario no logueado. Guardando intención de suscribirse y redirigiendo a login."),localStorage.setItem("postLoginAction",JSON.stringify({action:"subscribe"})),r()};return E.jsx("div",{className:"bg-background min-h-screen text-text-primary font-sans p-4 sm:p-6 lg:p-8 flex items-center justify-center",children:E.jsxs("div",{className:"mt-auto pt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[E.jsxs("button",{onClick:u,disabled:n,className:"flex items-center justify-center gap-2 bg-secondary hover:bg-emerald-500 text-white font-bold py-3 px-4 rounded-lg text-base transition-transform transform hover:scale-105 disabled:bg-emerald-300",children:[E.jsx(KD,{className:"w-5 h-5"}),E.jsx("span",{children:n?"...":E.jsxs(E.Fragment,{children:["Adquirir Plan",E.jsx("br",{}),"20 usd/mes"]})})]}),E.jsx("button",{onClick:r,className:"bg-primary hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg text-base transition-transform transform hover:scale-105",children:"Acceso Entrenador"})]})})},qO=()=>{const{currentUser:r,isAuthLoading:e}=gs(),[n,s]=se.useState("landing");if(e)return E.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Cargando..."});if(!r)switch(n){case"onboarding":return E.jsx(BO,{onNavigateToLogin:()=>s("login"),onNavigateToLanding:()=>s("landing")});case"login":return E.jsx(QD,{onNavigateToLanding:()=>s("landing")});case"landing":default:return E.jsx(zO,{onNavigateToOnboarding:()=>s("onboarding"),onNavigateToLogin:()=>s("login")})}return E.jsxs("div",{className:"bg-background min-h-screen text-text-primary font-sans",children:[E.jsx($D,{}),E.jsxs("main",{children:[r.role==="trainer"&&E.jsx(qD,{children:E.jsx(UO,{})}),r.role==="client"&&E.jsx(PO,{})]})]})},HO=()=>E.jsxs(BD,{children:[E.jsx(M1,{position:"top-center",reverseOrder:!1,toastOptions:{duration:4e3,style:{background:"#374151",color:"#ffffff",borderRadius:"8px",fontSize:"16px",padding:"16px"},success:{iconTheme:{primary:"#10b981",secondary:"white"}},error:{iconTheme:{primary:"#ef4444",secondary:"white"}}}}),E.jsx(qO,{})]}),aw=document.getElementById("root");if(!aw)throw new Error("Could not find root element to mount to");const FO=GA.createRoot(aw);FO.render(E.jsx(HO,{}));
//# sourceMappingURL=index-BbWWkUFT.js.map
